import{g as br,d as R,e as Et,f as is,i as Sr,r as xr,j as B}from"./index-CbRHuHWR.js";const as="/assets/react-CHdo91hT.svg",os="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='31.88'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20257'%3e%3cdefs%3e%3clinearGradient%20id='IconifyId1813088fe1fbc01fb466'%20x1='-.828%25'%20x2='57.636%25'%20y1='7.652%25'%20y2='78.411%25'%3e%3cstop%20offset='0%25'%20stop-color='%2341D1FF'%3e%3c/stop%3e%3cstop%20offset='100%25'%20stop-color='%23BD34FE'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient%20id='IconifyId1813088fe1fbc01fb467'%20x1='43.376%25'%20x2='50.316%25'%20y1='2.242%25'%20y2='89.03%25'%3e%3cstop%20offset='0%25'%20stop-color='%23FFEA83'%3e%3c/stop%3e%3cstop%20offset='8.333%25'%20stop-color='%23FFDD35'%3e%3c/stop%3e%3cstop%20offset='100%25'%20stop-color='%23FFA800'%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3cpath%20fill='url(%23IconifyId1813088fe1fbc01fb466)'%20d='M255.153%2037.938L134.897%20252.976c-2.483%204.44-8.862%204.466-11.382.048L.875%2037.958c-2.746-4.814%201.371-10.646%206.827-9.67l120.385%2021.517a6.537%206.537%200%200%200%202.322-.004l117.867-21.483c5.438-.991%209.574%204.796%206.877%209.62Z'%3e%3c/path%3e%3cpath%20fill='url(%23IconifyId1813088fe1fbc01fb467)'%20d='M185.432.063L96.44%2017.501a3.268%203.268%200%200%200-2.634%203.014l-5.474%2092.456a3.268%203.268%200%200%200%203.997%203.378l24.777-5.718c2.318-.535%204.413%201.507%203.936%203.838l-7.361%2036.047c-.495%202.426%201.782%204.5%204.151%203.78l15.304-4.649c2.372-.72%204.652%201.36%204.15%203.788l-11.698%2056.621c-.732%203.542%203.979%205.473%205.943%202.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505%204.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z'%3e%3c/path%3e%3c/svg%3e";var Gt={},Le={};function cs(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tr={exports:{}};const ds={},ls=Object.freeze(Object.defineProperty({__proto__:null,default:ds},Symbol.toStringTag,{value:"Module"})),us=br(ls);(function(t,e){(function(r,s){t.exports=s()})(R,function(){var r=r||function(s,n){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof R<"u"&&R.crypto&&(i=R.crypto),!i&&typeof cs=="function")try{i=us}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function u(){}return function(g){var y;return u.prototype=g,y=new u,u.prototype=null,y}}(),d={},c=d.lib={},l=c.Base=function(){return{extend:function(u){var g=o(this);return u&&g.mixIn(u),(!g.hasOwnProperty("init")||this.init===g.init)&&(g.init=function(){g.$super.init.apply(this,arguments)}),g.init.prototype=g,g.$super=this,g},create:function(){var u=this.extend();return u.init.apply(u,arguments),u},init:function(){},mixIn:function(u){for(var g in u)u.hasOwnProperty(g)&&(this[g]=u[g]);u.hasOwnProperty("toString")&&(this.toString=u.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=c.WordArray=l.extend({init:function(u,g){u=this.words=u||[],g!=n?this.sigBytes=g:this.sigBytes=u.length*4},toString:function(u){return(u||v).stringify(this)},concat:function(u){var g=this.words,y=u.words,x=this.sigBytes,U=u.sigBytes;if(this.clamp(),x%4)for(var j=0;j<U;j++){var Z=y[j>>>2]>>>24-j%4*8&255;g[x+j>>>2]|=Z<<24-(x+j)%4*8}else for(var L=0;L<U;L+=4)g[x+L>>>2]=y[L>>>2];return this.sigBytes+=U,this},clamp:function(){var u=this.words,g=this.sigBytes;u[g>>>2]&=4294967295<<32-g%4*8,u.length=s.ceil(g/4)},clone:function(){var u=l.clone.call(this);return u.words=this.words.slice(0),u},random:function(u){for(var g=[],y=0;y<u;y+=4)g.push(a());return new h.init(g,u)}}),S=d.enc={},v=S.Hex={stringify:function(u){for(var g=u.words,y=u.sigBytes,x=[],U=0;U<y;U++){var j=g[U>>>2]>>>24-U%4*8&255;x.push((j>>>4).toString(16)),x.push((j&15).toString(16))}return x.join("")},parse:function(u){for(var g=u.length,y=[],x=0;x<g;x+=2)y[x>>>3]|=parseInt(u.substr(x,2),16)<<24-x%8*4;return new h.init(y,g/2)}},P=S.Latin1={stringify:function(u){for(var g=u.words,y=u.sigBytes,x=[],U=0;U<y;U++){var j=g[U>>>2]>>>24-U%4*8&255;x.push(String.fromCharCode(j))}return x.join("")},parse:function(u){for(var g=u.length,y=[],x=0;x<g;x++)y[x>>>2]|=(u.charCodeAt(x)&255)<<24-x%4*8;return new h.init(y,g)}},w=S.Utf8={stringify:function(u){try{return decodeURIComponent(escape(P.stringify(u)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(u){return P.parse(unescape(encodeURIComponent(u)))}},_=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(u){typeof u=="string"&&(u=w.parse(u)),this._data.concat(u),this._nDataBytes+=u.sigBytes},_process:function(u){var g,y=this._data,x=y.words,U=y.sigBytes,j=this.blockSize,Z=j*4,L=U/Z;u?L=s.ceil(L):L=s.max((L|0)-this._minBufferSize,0);var Q=L*j,O=s.min(Q*4,U);if(Q){for(var A=0;A<Q;A+=j)this._doProcessBlock(x,A);g=x.splice(0,Q),y.sigBytes-=O}return new h.init(g,O)},clone:function(){var u=l.clone.call(this);return u._data=this._data.clone(),u},_minBufferSize:0});c.Hasher=_.extend({cfg:l.extend(),init:function(u){this.cfg=this.cfg.extend(u),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(u){return this._append(u),this._process(),this},finalize:function(u){u&&this._append(u);var g=this._doFinalize();return g},blockSize:16,_createHelper:function(u){return function(g,y){return new u.init(y).finalize(g)}},_createHmacHelper:function(u){return function(g,y){return new M.HMAC.init(u,y).finalize(g)}}});var M=d.algo={};return d}(Math);return r})})(Tr);var It=Tr.exports,Er={exports:{}};(function(t,e){(function(r,s){t.exports=s(It)})(R,function(r){return function(s){var n=r,i=n.lib,a=i.WordArray,o=i.Hasher,d=n.algo,c=[],l=[];(function(){function v(M){for(var u=s.sqrt(M),g=2;g<=u;g++)if(!(M%g))return!1;return!0}function P(M){return(M-(M|0))*4294967296|0}for(var w=2,_=0;_<64;)v(w)&&(_<8&&(c[_]=P(s.pow(w,1/2))),l[_]=P(s.pow(w,1/3)),_++),w++})();var h=[],S=d.SHA256=o.extend({_doReset:function(){this._hash=new a.init(c.slice(0))},_doProcessBlock:function(v,P){for(var w=this._hash.words,_=w[0],M=w[1],u=w[2],g=w[3],y=w[4],x=w[5],U=w[6],j=w[7],Z=0;Z<64;Z++){if(Z<16)h[Z]=v[P+Z]|0;else{var L=h[Z-15],Q=(L<<25|L>>>7)^(L<<14|L>>>18)^L>>>3,O=h[Z-2],A=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;h[Z]=Q+h[Z-7]+A+h[Z-16]}var $=y&x^~y&U,q=_&M^_&u^M&u,K=(_<<30|_>>>2)^(_<<19|_>>>13)^(_<<10|_>>>22),H=(y<<26|y>>>6)^(y<<21|y>>>11)^(y<<7|y>>>25),G=j+H+$+l[Z]+h[Z],z=K+q;j=U,U=x,x=y,y=g+G|0,g=u,u=M,M=_,_=G+z|0}w[0]=w[0]+_|0,w[1]=w[1]+M|0,w[2]=w[2]+u|0,w[3]=w[3]+g|0,w[4]=w[4]+y|0,w[5]=w[5]+x|0,w[6]=w[6]+U|0,w[7]=w[7]+j|0},_doFinalize:function(){var v=this._data,P=v.words,w=this._nDataBytes*8,_=v.sigBytes*8;return P[_>>>5]|=128<<24-_%32,P[(_+64>>>9<<4)+14]=s.floor(w/4294967296),P[(_+64>>>9<<4)+15]=w,v.sigBytes=P.length*4,this._process(),this._hash},clone:function(){var v=o.clone.call(this);return v._hash=this._hash.clone(),v}});n.SHA256=o._createHelper(S),n.HmacSHA256=o._createHmacHelper(S)}(Math),r.SHA256})})(Er);var hs=Er.exports,Ir={exports:{}};(function(t,e){(function(r,s){t.exports=s(It)})(R,function(r){return function(){var s=r,n=s.lib,i=n.WordArray,a=s.enc;a.Base64={stringify:function(d){var c=d.words,l=d.sigBytes,h=this._map;d.clamp();for(var S=[],v=0;v<l;v+=3)for(var P=c[v>>>2]>>>24-v%4*8&255,w=c[v+1>>>2]>>>24-(v+1)%4*8&255,_=c[v+2>>>2]>>>24-(v+2)%4*8&255,M=P<<16|w<<8|_,u=0;u<4&&v+u*.75<l;u++)S.push(h.charAt(M>>>6*(3-u)&63));var g=h.charAt(64);if(g)for(;S.length%4;)S.push(g);return S.join("")},parse:function(d){var c=d.length,l=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var S=0;S<l.length;S++)h[l.charCodeAt(S)]=S}var v=l.charAt(64);if(v){var P=d.indexOf(v);P!==-1&&(c=P)}return o(d,c,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(d,c,l){for(var h=[],S=0,v=0;v<c;v++)if(v%4){var P=l[d.charCodeAt(v-1)]<<v%4*2,w=l[d.charCodeAt(v)]>>>6-v%4*2,_=P|w;h[S>>>2]|=_<<24-S%4*8,S++}return i.create(h,S)}}(),r.enc.Base64})})(Ir);var fs=Ir.exports,Cr={exports:{}};(function(t,e){(function(r,s){t.exports=s(It)})(R,function(r){return r.enc.Utf8})})(Cr);var gs=Cr.exports;function Ht(t){this.message=t}Ht.prototype=new Error,Ht.prototype.name="InvalidCharacterError";var sr=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Ht("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,s,n=0,i=0,a="";s=e.charAt(i++);~s&&(r=n%4?64*r+s:s,n++%4)?a+=String.fromCharCode(255&r>>(-2*n&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return a};function ps(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(sr(r).replace(/(.)/g,function(s,n){var i=n.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return sr(e)}}function Ke(t){this.message=t}function _s(t,e){if(typeof t!="string")throw new Ke("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(ps(t.split(".")[r]))}catch(s){throw new Ke("Invalid token specified: "+s.message)}}Ke.prototype=new Error,Ke.prototype.name="InvalidTokenError";const ms=Object.freeze(Object.defineProperty({__proto__:null,InvalidTokenError:Ke,default:_s},Symbol.toStringTag,{value:"Module"})),Yt=br(ms);var vs=Object.create,Ct=Object.defineProperty,ys=Object.getOwnPropertyDescriptor,ws=Object.getOwnPropertyNames,ks=Object.getPrototypeOf,bs=Object.prototype.hasOwnProperty,Ss=(t,e)=>{for(var r in e)Ct(t,r,{get:e[r],enumerable:!0})},Rr=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ws(e))!bs.call(t,n)&&n!==r&&Ct(t,n,{get:()=>e[n],enumerable:!(s=ys(e,n))||s.enumerable});return t},dt=(t,e,r)=>(r=t!=null?vs(ks(t)):{},Rr(e||!t||!t.__esModule?Ct(r,"default",{value:t,enumerable:!0}):r,t)),xs=t=>Rr(Ct({},"__esModule",{value:!0}),t),Or={};Ss(Or,{AccessTokenEvents:()=>Pr,CheckSessionIFrame:()=>Ur,ErrorResponse:()=>ke,ErrorTimeout:()=>Rt,InMemoryWebStorage:()=>Xt,Log:()=>Qe,Logger:()=>T,MetadataService:()=>Ar,OidcClient:()=>Mr,OidcClientSettingsStore:()=>_t,SessionMonitor:()=>Zr,SigninResponse:()=>gt,SigninState:()=>Ot,SignoutResponse:()=>Nr,State:()=>Ce,User:()=>Je,UserManager:()=>rn,UserManagerSettingsStore:()=>Hr,Version:()=>nn,WebStorageStateStore:()=>tr});var Ts=xs(Or),Es=dt(It),Is=dt(hs),nr=dt(fs),Cs=dt(gs),Rs={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},oe,ce,Qe=(t=>(t[t.NONE=0]="NONE",t[t.ERROR=1]="ERROR",t[t.WARN=2]="WARN",t[t.INFO=3]="INFO",t[t.DEBUG=4]="DEBUG",t))(Qe||{});(t=>{function e(){oe=3,ce=Rs}t.reset=e;function r(n){if(!(0<=n&&n<=4))throw new Error("Invalid log level");oe=n}t.setLevel=r;function s(n){ce=n}t.setLogger=s})(Qe||(Qe={}));var T=class{constructor(t){this._name=t}debug(...t){oe>=4&&ce.debug(T._format(this._name,this._method),...t)}info(...t){oe>=3&&ce.info(T._format(this._name,this._method),...t)}warn(...t){oe>=2&&ce.warn(T._format(this._name,this._method),...t)}error(...t){oe>=1&&ce.error(T._format(this._name,this._method),...t)}throw(t){throw this.error(t),t}create(t){const e=Object.create(this);return e._method=t,e.debug("begin"),e}static createStatic(t,e){const r=new T(`${t}.${e}`);return r.debug("begin"),r}static _format(t,e){const r=`[${t}]`;return e?`${r} ${e}:`:r}static debug(t,...e){oe>=4&&ce.debug(T._format(t),...e)}static info(t,...e){oe>=3&&ce.info(T._format(t),...e)}static warn(t,...e){oe>=2&&ce.warn(T._format(t),...e)}static error(t,...e){oe>=1&&ce.error(T._format(t),...e)}};Qe.reset();var Os="10000000-1000-4000-8000-100000000000",le=class{static _randomWord(){return Es.default.lib.WordArray.random(1).words[0]}static generateUUIDv4(){return Os.replace(/[018]/g,e=>(+e^le._randomWord()&15>>+e/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return le.generateUUIDv4()+le.generateUUIDv4()+le.generateUUIDv4()}static generateCodeChallenge(t){try{const e=(0,Is.default)(t);return nr.default.stringify(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(e){throw T.error("CryptoUtils.generateCodeChallenge",e),e}}static generateBasicAuth(t,e){const r=Cs.default.parse([t,e].join(":"));return nr.default.stringify(r)}},ve=class{constructor(t){this._name=t,this._logger=new T(`Event('${this._name}')`),this._callbacks=[]}addHandler(t){return this._callbacks.push(t),()=>this.removeHandler(t)}removeHandler(t){const e=this._callbacks.lastIndexOf(t);e>=0&&this._callbacks.splice(e,1)}raise(...t){this._logger.debug("raise:",...t);for(const e of this._callbacks)e(...t)}},Ps=dt(Yt),Bt=class{static decode(t){try{return(0,Ps.default)(t)}catch(e){throw T.error("JwtUtils.decode",e),e}}},ir=class{static center({...t}){var e,r,s;return t.width==null&&(t.width=(e=[800,720,600,480].find(n=>n<=window.outerWidth/1.618))!=null?e:360),(r=t.left)!=null||(t.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-t.width)/2))),t.height!=null&&((s=t.top)!=null||(t.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-t.height)/2)))),t}static serialize(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}=${typeof r!="boolean"?r:r?"yes":"no"}`).join(",")}},X=class extends ve{constructor(){super(...arguments),this._logger=new T(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{const t=this._expiration-X.getEpochTime();this._logger.debug("timer completes in",t),this._expiration<=X.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(t){const e=this._logger.create("init");t=Math.max(Math.floor(t),1);const r=X.getEpochTime()+t;if(this.expiration===r&&this._timerHandle){e.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),e.debug("using duration",t),this._expiration=r;const s=Math.min(t,5);this._timerHandle=setInterval(this._callback,s*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},zt=class{static readParams(t,e="query"){if(!t)throw new TypeError("Invalid URL");const s=new URL(t,"http://127.0.0.1")[e==="fragment"?"hash":"search"];return new URLSearchParams(s.slice(1))}},Wt=";",ke=class extends Error{constructor(t,e){var r,s,n;if(super(t.error_description||t.error||""),this.form=e,this.name="ErrorResponse",!t.error)throw T.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=t.error,this.error_description=(r=t.error_description)!=null?r:null,this.error_uri=(s=t.error_uri)!=null?s:null,this.state=t.userState,this.session_state=(n=t.session_state)!=null?n:null,this.url_state=t.url_state}},Rt=class extends Error{constructor(t){super(t),this.name="ErrorTimeout"}},Pr=class{constructor(t){this._logger=new T("AccessTokenEvents"),this._expiringTimer=new X("Access token expiring"),this._expiredTimer=new X("Access token expired"),this._expiringNotificationTimeInSeconds=t.expiringNotificationTimeInSeconds}load(t){const e=this._logger.create("load");if(t.access_token&&t.expires_in!==void 0){const r=t.expires_in;if(e.debug("access token present, remaining duration:",r),r>0){let n=r-this._expiringNotificationTimeInSeconds;n<=0&&(n=1),e.debug("registering expiring timer, raising in",n,"seconds"),this._expiringTimer.init(n)}else e.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();const s=r+1;e.debug("registering expired timer, raising in",s,"seconds"),this._expiredTimer.init(s)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(t){return this._expiringTimer.addHandler(t)}removeAccessTokenExpiring(t){this._expiringTimer.removeHandler(t)}addAccessTokenExpired(t){return this._expiredTimer.addHandler(t)}removeAccessTokenExpired(t){this._expiredTimer.removeHandler(t)}},Ur=class{constructor(t,e,r,s,n){this._callback=t,this._client_id=e,this._intervalInSeconds=s,this._stopOnError=n,this._logger=new T("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=a=>{a.origin===this._frame_origin&&a.source===this._frame.contentWindow&&(a.data==="error"?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):a.data==="changed"?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(a.data+" message from check session op iframe"))};const i=new URL(r);this._frame_origin=i.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=i.href}load(){return new Promise(t=>{this._frame.onload=()=>{t()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(t){if(this._session_state===t)return;this._logger.create("start"),this.stop(),this._session_state=t;const e=()=>{!this._frame.contentWindow||!this._session_state||this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};e(),this._timer=setInterval(e,this._intervalInSeconds*1e3)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},Xt=class{constructor(){this._logger=new T("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(t){return this._logger.create(`getItem('${t}')`),this._data[t]}setItem(t,e){this._logger.create(`setItem('${t}')`),this._data[t]=e}removeItem(t){this._logger.create(`removeItem('${t}')`),delete this._data[t]}get length(){return Object.getOwnPropertyNames(this._data).length}key(t){return Object.getOwnPropertyNames(this._data)[t]}},er=class{constructor(t=[],e=null,r={}){this._jwtHandler=e,this._extraHeaders=r,this._logger=new T("JsonService"),this._contentTypes=[],this._contentTypes.push(...t,"application/json"),e&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(t,e={}){const{timeoutInSeconds:r,...s}=e;if(!r)return await fetch(t,s);const n=new AbortController,i=setTimeout(()=>n.abort(),r*1e3);try{return await fetch(t,{...e,signal:n.signal})}catch(a){throw a instanceof DOMException&&a.name==="AbortError"?new Rt("Network timed out"):a}finally{clearTimeout(i)}}async getJson(t,{token:e,credentials:r}={}){const s=this._logger.create("getJson"),n={Accept:this._contentTypes.join(", ")};e&&(s.debug("token passed, setting Authorization header"),n.Authorization="Bearer "+e),this.appendExtraHeaders(n);let i;try{s.debug("url:",t),i=await this.fetchWithTimeout(t,{method:"GET",headers:n,credentials:r})}catch(d){throw s.error("Network Error"),d}s.debug("HTTP response received, status",i.status);const a=i.headers.get("Content-Type");if(a&&!this._contentTypes.find(d=>a.startsWith(d))&&s.throw(new Error(`Invalid response Content-Type: ${a??"undefined"}, from URL: ${t}`)),i.ok&&this._jwtHandler&&(a!=null&&a.startsWith("application/jwt")))return await this._jwtHandler(await i.text());let o;try{o=await i.json()}catch(d){throw s.error("Error parsing JSON response",d),i.ok?d:new Error(`${i.statusText} (${i.status})`)}if(!i.ok)throw s.error("Error from server:",o),o.error?new ke(o):new Error(`${i.statusText} (${i.status}): ${JSON.stringify(o)}`);return o}async postForm(t,{body:e,basicAuth:r,timeoutInSeconds:s,initCredentials:n}){const i=this._logger.create("postForm"),a={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded"};r!==void 0&&(a.Authorization="Basic "+r),this.appendExtraHeaders(a);let o;try{i.debug("url:",t),o=await this.fetchWithTimeout(t,{method:"POST",headers:a,body:e,timeoutInSeconds:s,credentials:n})}catch(h){throw i.error("Network error"),h}i.debug("HTTP response received, status",o.status);const d=o.headers.get("Content-Type");if(d&&!this._contentTypes.find(h=>d.startsWith(h)))throw new Error(`Invalid response Content-Type: ${d??"undefined"}, from URL: ${t}`);const c=await o.text();let l={};if(c)try{l=JSON.parse(c)}catch(h){throw i.error("Error parsing JSON response",h),o.ok?h:new Error(`${o.statusText} (${o.status})`)}if(!o.ok)throw i.error("Error from server:",l),l.error?new ke(l,e):new Error(`${o.statusText} (${o.status}): ${JSON.stringify(l)}`);return l}appendExtraHeaders(t){const e=this._logger.create("appendExtraHeaders"),r=Object.keys(this._extraHeaders),s=["authorization","accept","content-type"];r.length!==0&&r.forEach(n=>{if(s.includes(n.toLocaleLowerCase())){e.warn("Protected header could not be overridden",n,s);return}const i=typeof this._extraHeaders[n]=="function"?this._extraHeaders[n]():this._extraHeaders[n];i&&i!==""&&(t[n]=i)})}},Ar=class{constructor(t){this._settings=t,this._logger=new T("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new er(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){const t=this._logger.create("getMetadata");if(this._metadata)return t.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw t.throw(new Error("No authority or metadataUrl configured on settings")),null;t.debug("getting metadata from",this._metadataUrl);const e=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials});return t.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},this._settings.metadataSeed,e),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(t=!0){return this._getMetadataProperty("token_endpoint",t)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(t=!0){return this._getMetadataProperty("revocation_endpoint",t)}getKeysEndpoint(t=!0){return this._getMetadataProperty("jwks_uri",t)}async _getMetadataProperty(t,e=!1){const r=this._logger.create(`_getMetadataProperty('${t}')`),s=await this.getMetadata();if(r.debug("resolved"),s[t]===void 0){if(e===!0){r.warn("Metadata does not contain optional property");return}r.throw(new Error("Metadata does not contain property "+t))}return s[t]}async getSigningKeys(){const t=this._logger.create("getSigningKeys");if(this._signingKeys)return t.debug("returning signingKeys from cache"),this._signingKeys;const e=await this.getKeysEndpoint(!1);t.debug("got jwks_uri",e);const r=await this._jsonService.getJson(e);if(t.debug("got key set",r),!Array.isArray(r.keys))throw t.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=r.keys,this._signingKeys}},tr=class{constructor({prefix:t="oidc.",store:e=localStorage}={}){this._logger=new T("WebStorageStateStore"),this._store=e,this._prefix=t}async set(t,e){this._logger.create(`set('${t}')`),t=this._prefix+t,await this._store.setItem(t,e)}async get(t){return this._logger.create(`get('${t}')`),t=this._prefix+t,await this._store.getItem(t)}async remove(t){this._logger.create(`remove('${t}')`),t=this._prefix+t;const e=await this._store.getItem(t);return await this._store.removeItem(t),e}async getAllKeys(){this._logger.create("getAllKeys");const t=await this._store.length,e=[];for(let r=0;r<t;r++){const s=await this._store.key(r);s&&s.indexOf(this._prefix)===0&&e.push(s.substr(this._prefix.length))}return e}},Us="code",As="openid",js="client_secret_post",Ns="query",Ms=60*15,Zs=60*5,_t=class{constructor({authority:t,metadataUrl:e,metadata:r,signingKeys:s,metadataSeed:n,client_id:i,client_secret:a,response_type:o=Us,scope:d=As,redirect_uri:c,post_logout_redirect_uri:l,client_authentication:h=js,prompt:S,display:v,max_age:P,ui_locales:w,acr_values:_,resource:M,response_mode:u=Ns,filterProtocolClaims:g=!0,loadUserInfo:y=!1,staleStateAgeInSeconds:x=Ms,clockSkewInSeconds:U=Zs,userInfoJwtIssuer:j="OP",mergeClaims:Z=!1,disablePKCE:L=!1,stateStore:Q,refreshTokenCredentials:O,revokeTokenAdditionalContentTypes:A,fetchRequestCredentials:$,refreshTokenAllowedScope:q,extraQueryParams:K={},extraTokenParams:H={},extraHeaders:G={}}){if(this.authority=t,e?this.metadataUrl=e:(this.metadataUrl=t,t&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=r,this.metadataSeed=n,this.signingKeys=s,this.client_id=i,this.client_secret=a,this.response_type=o,this.scope=d,this.redirect_uri=c,this.post_logout_redirect_uri=l,this.client_authentication=h,this.prompt=S,this.display=v,this.max_age=P,this.ui_locales=w,this.acr_values=_,this.resource=M,this.response_mode=u,this.filterProtocolClaims=g??!0,this.loadUserInfo=!!y,this.staleStateAgeInSeconds=x,this.clockSkewInSeconds=U,this.userInfoJwtIssuer=j,this.mergeClaims=!!Z,this.disablePKCE=!!L,this.revokeTokenAdditionalContentTypes=A,$&&O&&console.warn("Both fetchRequestCredentials and refreshTokenCredentials is set. Only fetchRequestCredentials will be used."),this.fetchRequestCredentials=$||O||"same-origin",Q)this.stateStore=Q;else{const z=typeof window<"u"?window.localStorage:new Xt;this.stateStore=new tr({store:z})}this.refreshTokenAllowedScope=q,this.extraQueryParams=K,this.extraTokenParams=H,this.extraHeaders=G}},Ls=class{constructor(t,e){this._settings=t,this._metadataService=e,this._logger=new T("UserInfoService"),this._getClaimsFromJwt=async r=>{const s=this._logger.create("_getClaimsFromJwt");try{const n=Bt.decode(r);return s.debug("JWT decoding successful"),n}catch(n){throw s.error("Error parsing JWT response"),n}},this._jsonService=new er(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(t){const e=this._logger.create("getClaims");t||this._logger.throw(new Error("No token passed"));const r=await this._metadataService.getUserInfoEndpoint();e.debug("got userinfo url",r);const s=await this._jsonService.getJson(r,{token:t,credentials:this._settings.fetchRequestCredentials});return e.debug("got claims",s),s}},jr=class{constructor(t,e){this._settings=t,this._metadataService=e,this._logger=new T("TokenClient"),this._jsonService=new er(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:t="authorization_code",redirect_uri:e=this._settings.redirect_uri,client_id:r=this._settings.client_id,client_secret:s=this._settings.client_secret,...n}){const i=this._logger.create("exchangeCode");r||i.throw(new Error("A client_id is required")),e||i.throw(new Error("A redirect_uri is required")),n.code||i.throw(new Error("A code is required"));const a=new URLSearchParams({grant_type:t,redirect_uri:e});for(const[l,h]of Object.entries(n))h!=null&&a.set(l,h);let o;switch(this._settings.client_authentication){case"client_secret_basic":if(!s)throw i.throw(new Error("A client_secret is required")),null;o=le.generateBasicAuth(r,s);break;case"client_secret_post":a.append("client_id",r),s&&a.append("client_secret",s);break}const d=await this._metadataService.getTokenEndpoint(!1);i.debug("got token endpoint");const c=await this._jsonService.postForm(d,{body:a,basicAuth:o,initCredentials:this._settings.fetchRequestCredentials});return i.debug("got response"),c}async exchangeCredentials({grant_type:t="password",client_id:e=this._settings.client_id,client_secret:r=this._settings.client_secret,scope:s=this._settings.scope,...n}){const i=this._logger.create("exchangeCredentials");e||i.throw(new Error("A client_id is required"));const a=new URLSearchParams({grant_type:t,scope:s});for(const[l,h]of Object.entries(n))h!=null&&a.set(l,h);let o;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw i.throw(new Error("A client_secret is required")),null;o=le.generateBasicAuth(e,r);break;case"client_secret_post":a.append("client_id",e),r&&a.append("client_secret",r);break}const d=await this._metadataService.getTokenEndpoint(!1);i.debug("got token endpoint");const c=await this._jsonService.postForm(d,{body:a,basicAuth:o,initCredentials:this._settings.fetchRequestCredentials});return i.debug("got response"),c}async exchangeRefreshToken({grant_type:t="refresh_token",client_id:e=this._settings.client_id,client_secret:r=this._settings.client_secret,timeoutInSeconds:s,...n}){const i=this._logger.create("exchangeRefreshToken");e||i.throw(new Error("A client_id is required")),n.refresh_token||i.throw(new Error("A refresh_token is required"));const a=new URLSearchParams({grant_type:t});for(const[l,h]of Object.entries(n))Array.isArray(h)?h.forEach(S=>a.append(l,S)):h!=null&&a.set(l,h);let o;switch(this._settings.client_authentication){case"client_secret_basic":if(!r)throw i.throw(new Error("A client_secret is required")),null;o=le.generateBasicAuth(e,r);break;case"client_secret_post":a.append("client_id",e),r&&a.append("client_secret",r);break}const d=await this._metadataService.getTokenEndpoint(!1);i.debug("got token endpoint");const c=await this._jsonService.postForm(d,{body:a,basicAuth:o,timeoutInSeconds:s,initCredentials:this._settings.fetchRequestCredentials});return i.debug("got response"),c}async revoke(t){var e;const r=this._logger.create("revoke");t.token||r.throw(new Error("A token is required"));const s=await this._metadataService.getRevocationEndpoint(!1);r.debug(`got revocation endpoint, revoking ${(e=t.token_type_hint)!=null?e:"default token type"}`);const n=new URLSearchParams;for(const[i,a]of Object.entries(t))a!=null&&n.set(i,a);n.set("client_id",this._settings.client_id),this._settings.client_secret&&n.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(s,{body:n}),r.debug("got response")}},$s=class{constructor(t,e,r){this._settings=t,this._metadataService=e,this._claimsService=r,this._logger=new T("ResponseValidator"),this._userInfoService=new Ls(this._settings,this._metadataService),this._tokenClient=new jr(this._settings,this._metadataService)}async validateSigninResponse(t,e){const r=this._logger.create("validateSigninResponse");this._processSigninState(t,e),r.debug("state processed"),await this._processCode(t,e),r.debug("code processed"),t.isOpenId&&this._validateIdTokenAttributes(t),r.debug("tokens validated"),await this._processClaims(t,e==null?void 0:e.skipUserInfo,t.isOpenId),r.debug("claims processed")}async validateCredentialsResponse(t,e){const r=this._logger.create("validateCredentialsResponse");t.isOpenId&&t.id_token&&this._validateIdTokenAttributes(t),r.debug("tokens validated"),await this._processClaims(t,e,t.isOpenId),r.debug("claims processed")}async validateRefreshResponse(t,e){var r,s;const n=this._logger.create("validateRefreshResponse");t.userState=e.data,(r=t.session_state)!=null||(t.session_state=e.session_state),(s=t.scope)!=null||(t.scope=e.scope),t.isOpenId&&t.id_token&&(this._validateIdTokenAttributes(t,e.id_token),n.debug("ID Token validated")),t.id_token||(t.id_token=e.id_token,t.profile=e.profile);const i=t.isOpenId&&!!t.id_token;await this._processClaims(t,!1,i),n.debug("claims processed")}validateSignoutResponse(t,e){const r=this._logger.create("validateSignoutResponse");if(e.id!==t.state&&r.throw(new Error("State does not match")),r.debug("state validated"),t.userState=e.data,t.error)throw r.warn("Response was error",t.error),new ke(t)}_processSigninState(t,e){var r;const s=this._logger.create("_processSigninState");if(e.id!==t.state&&s.throw(new Error("State does not match")),e.client_id||s.throw(new Error("No client_id on state")),e.authority||s.throw(new Error("No authority on state")),this._settings.authority!==e.authority&&s.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==e.client_id&&s.throw(new Error("client_id mismatch on settings vs. signin state")),s.debug("state validated"),t.userState=e.data,t.url_state=e.url_state,(r=t.scope)!=null||(t.scope=e.scope),t.error)throw s.warn("Response was error",t.error),new ke(t);e.code_verifier&&!t.code&&s.throw(new Error("Expected code in response"))}async _processClaims(t,e=!1,r=!0){const s=this._logger.create("_processClaims");if(t.profile=this._claimsService.filterProtocolClaims(t.profile),e||!this._settings.loadUserInfo||!t.access_token){s.debug("not loading user info");return}s.debug("loading user info");const n=await this._userInfoService.getClaims(t.access_token);s.debug("user info claims received from user info endpoint"),r&&n.sub!==t.profile.sub&&s.throw(new Error("subject from UserInfo response does not match subject in ID Token")),t.profile=this._claimsService.mergeClaims(t.profile,this._claimsService.filterProtocolClaims(n)),s.debug("user info claims received, updated profile:",t.profile)}async _processCode(t,e){const r=this._logger.create("_processCode");if(t.code){r.debug("Validating code");const s=await this._tokenClient.exchangeCode({client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier,...e.extraTokenParams});Object.assign(t,s)}else r.debug("No code to process")}_validateIdTokenAttributes(t,e){var r;const s=this._logger.create("_validateIdTokenAttributes");s.debug("decoding ID Token JWT");const n=Bt.decode((r=t.id_token)!=null?r:"");if(n.sub||s.throw(new Error("ID Token is missing a subject claim")),e){const i=Bt.decode(e);n.sub!==i.sub&&s.throw(new Error("sub in id_token does not match current sub")),n.auth_time&&n.auth_time!==i.auth_time&&s.throw(new Error("auth_time in id_token does not match original auth_time")),n.azp&&n.azp!==i.azp&&s.throw(new Error("azp in id_token does not match original azp")),!n.azp&&i.azp&&s.throw(new Error("azp not in id_token, but present in original id_token"))}t.profile=n}},Ce=class{constructor(t){this.id=t.id||le.generateUUIDv4(),this.data=t.data,t.created&&t.created>0?this.created=t.created:this.created=X.getEpochTime(),this.request_type=t.request_type,this.url_state=t.url_state}toStorageString(){return new T("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(t){return T.createStatic("State","fromStorageString"),new Ce(JSON.parse(t))}static async clearStaleState(t,e){const r=T.createStatic("State","clearStaleState"),s=X.getEpochTime()-e,n=await t.getAllKeys();r.debug("got keys",n);for(let i=0;i<n.length;i++){const a=n[i],o=await t.get(a);let d=!1;if(o)try{const c=Ce.fromStorageString(o);r.debug("got item from key:",a,c.created),c.created<=s&&(d=!0)}catch(c){r.error("Error parsing state for key:",a,c),d=!0}else r.debug("no item in storage for key:",a),d=!0;d&&(r.debug("removed item for key:",a),t.remove(a))}}},Ot=class extends Ce{constructor(t){super(t),t.code_verifier===!0?this.code_verifier=le.generateCodeVerifier():t.code_verifier&&(this.code_verifier=t.code_verifier),this.code_verifier&&(this.code_challenge=le.generateCodeChallenge(this.code_verifier)),this.authority=t.authority,this.client_id=t.client_id,this.redirect_uri=t.redirect_uri,this.scope=t.scope,this.client_secret=t.client_secret,this.extraTokenParams=t.extraTokenParams,this.response_mode=t.response_mode,this.skipUserInfo=t.skipUserInfo}toStorageString(){return new T("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(t){T.createStatic("SigninState","fromStorageString");const e=JSON.parse(t);return new Ot(e)}},Ds=class{constructor({url:t,authority:e,client_id:r,redirect_uri:s,response_type:n,scope:i,state_data:a,response_mode:o,request_type:d,client_secret:c,nonce:l,url_state:h,resource:S,skipUserInfo:v,extraQueryParams:P,extraTokenParams:w,disablePKCE:_,...M}){if(this._logger=new T("SigninRequest"),!t)throw this._logger.error("ctor: No url passed"),new Error("url");if(!r)throw this._logger.error("ctor: No client_id passed"),new Error("client_id");if(!s)throw this._logger.error("ctor: No redirect_uri passed"),new Error("redirect_uri");if(!n)throw this._logger.error("ctor: No response_type passed"),new Error("response_type");if(!i)throw this._logger.error("ctor: No scope passed"),new Error("scope");if(!e)throw this._logger.error("ctor: No authority passed"),new Error("authority");this.state=new Ot({data:a,request_type:d,url_state:h,code_verifier:!_,client_id:r,authority:e,redirect_uri:s,response_mode:o,client_secret:c,scope:i,extraTokenParams:w,skipUserInfo:v});const u=new URL(t);u.searchParams.append("client_id",r),u.searchParams.append("redirect_uri",s),u.searchParams.append("response_type",n),u.searchParams.append("scope",i),l&&u.searchParams.append("nonce",l);let g=this.state.id;h&&(g=`${g}${Wt}${h}`),u.searchParams.append("state",g),this.state.code_challenge&&(u.searchParams.append("code_challenge",this.state.code_challenge),u.searchParams.append("code_challenge_method","S256")),S&&(Array.isArray(S)?S:[S]).forEach(x=>u.searchParams.append("resource",x));for(const[y,x]of Object.entries({response_mode:o,...M,...P}))x!=null&&u.searchParams.append(y,x.toString());this.url=u.href}},qs="openid",gt=class{constructor(t){if(this.access_token="",this.token_type="",this.profile={},this.state=t.get("state"),this.session_state=t.get("session_state"),this.state){const e=decodeURIComponent(this.state).split(Wt);this.state=e[0],e.length>1&&(this.url_state=e.slice(1).join(Wt))}this.error=t.get("error"),this.error_description=t.get("error_description"),this.error_uri=t.get("error_uri"),this.code=t.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-X.getEpochTime()}set expires_in(t){typeof t=="string"&&(t=Number(t)),t!==void 0&&t>=0&&(this.expires_at=Math.floor(t)+X.getEpochTime())}get isOpenId(){var t;return((t=this.scope)==null?void 0:t.split(" ").includes(qs))||!!this.id_token}},Hs=class{constructor({url:t,state_data:e,id_token_hint:r,post_logout_redirect_uri:s,extraQueryParams:n,request_type:i,client_id:a}){if(this._logger=new T("SignoutRequest"),!t)throw this._logger.error("ctor: No url passed"),new Error("url");const o=new URL(t);r&&o.searchParams.append("id_token_hint",r),a&&o.searchParams.append("client_id",a),s&&(o.searchParams.append("post_logout_redirect_uri",s),e&&(this.state=new Ce({data:e,request_type:i}),o.searchParams.append("state",this.state.id)));for(const[d,c]of Object.entries({...n}))c!=null&&o.searchParams.append(d,c.toString());this.url=o.href}},Nr=class{constructor(t){this.state=t.get("state"),this.error=t.get("error"),this.error_description=t.get("error_description"),this.error_uri=t.get("error_uri")}},Bs=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],zs=["sub","iss","aud","exp","iat"],Ws=class{constructor(t){this._settings=t,this._logger=new T("ClaimsService")}filterProtocolClaims(t){const e={...t};if(this._settings.filterProtocolClaims){let r;Array.isArray(this._settings.filterProtocolClaims)?r=this._settings.filterProtocolClaims:r=Bs;for(const s of r)zs.includes(s)||delete e[s]}return e}mergeClaims(t,e){const r={...t};for(const[s,n]of Object.entries(e))for(const i of Array.isArray(n)?n:[n]){const a=r[s];a===void 0?r[s]=i:Array.isArray(a)?a.includes(i)||a.push(i):r[s]!==i&&(typeof i=="object"&&this._settings.mergeClaims?r[s]=this.mergeClaims(a,i):r[s]=[a,i])}return r}},Mr=class{constructor(t,e){this._logger=new T("OidcClient"),this.settings=t instanceof _t?t:new _t(t),this.metadataService=e??new Ar(this.settings),this._claimsService=new Ws(this.settings),this._validator=new $s(this.settings,this.metadataService,this._claimsService),this._tokenClient=new jr(this.settings,this.metadataService)}async createSigninRequest({state:t,request:e,request_uri:r,request_type:s,id_token_hint:n,login_hint:i,skipUserInfo:a,nonce:o,url_state:d,response_type:c=this.settings.response_type,scope:l=this.settings.scope,redirect_uri:h=this.settings.redirect_uri,prompt:S=this.settings.prompt,display:v=this.settings.display,max_age:P=this.settings.max_age,ui_locales:w=this.settings.ui_locales,acr_values:_=this.settings.acr_values,resource:M=this.settings.resource,response_mode:u=this.settings.response_mode,extraQueryParams:g=this.settings.extraQueryParams,extraTokenParams:y=this.settings.extraTokenParams}){const x=this._logger.create("createSigninRequest");if(c!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");const U=await this.metadataService.getAuthorizationEndpoint();x.debug("Received authorization endpoint",U);const j=new Ds({url:U,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:h,response_type:c,scope:l,state_data:t,url_state:d,prompt:S,display:v,max_age:P,ui_locales:w,id_token_hint:n,login_hint:i,acr_values:_,resource:M,request:e,request_uri:r,extraQueryParams:g,extraTokenParams:y,request_type:s,response_mode:u,client_secret:this.settings.client_secret,skipUserInfo:a,nonce:o,disablePKCE:this.settings.disablePKCE});await this.clearStaleState();const Z=j.state;return await this.settings.stateStore.set(Z.id,Z.toStorageString()),j}async readSigninResponseState(t,e=!1){const r=this._logger.create("readSigninResponseState"),s=new gt(zt.readParams(t,this.settings.response_mode));if(!s.state)throw r.throw(new Error("No state in response")),null;const n=await this.settings.stateStore[e?"remove":"get"](s.state);if(!n)throw r.throw(new Error("No matching state found in storage")),null;return{state:Ot.fromStorageString(n),response:s}}async processSigninResponse(t){const e=this._logger.create("processSigninResponse"),{state:r,response:s}=await this.readSigninResponseState(t,!0);return e.debug("received state from storage; validating response"),await this._validator.validateSigninResponse(s,r),s}async processResourceOwnerPasswordCredentials({username:t,password:e,skipUserInfo:r=!1,extraTokenParams:s={}}){const n=await this._tokenClient.exchangeCredentials({username:t,password:e,...s}),i=new gt(new URLSearchParams);return Object.assign(i,n),await this._validator.validateCredentialsResponse(i,r),i}async useRefreshToken({state:t,timeoutInSeconds:e}){var r;const s=this._logger.create("useRefreshToken");let n;if(this.settings.refreshTokenAllowedScope===void 0)n=t.scope;else{const o=this.settings.refreshTokenAllowedScope.split(" ");n=(((r=t.scope)==null?void 0:r.split(" "))||[]).filter(c=>o.includes(c)).join(" ")}const i=await this._tokenClient.exchangeRefreshToken({refresh_token:t.refresh_token,resource:t.resource,scope:n,timeoutInSeconds:e}),a=new gt(new URLSearchParams);return Object.assign(a,i),s.debug("validating response",a),await this._validator.validateRefreshResponse(a,{...t,scope:n}),a}async createSignoutRequest({state:t,id_token_hint:e,client_id:r,request_type:s,post_logout_redirect_uri:n=this.settings.post_logout_redirect_uri,extraQueryParams:i=this.settings.extraQueryParams}={}){const a=this._logger.create("createSignoutRequest"),o=await this.metadataService.getEndSessionEndpoint();if(!o)throw a.throw(new Error("No end session endpoint")),null;a.debug("Received end session endpoint",o),!r&&n&&!e&&(r=this.settings.client_id);const d=new Hs({url:o,id_token_hint:e,client_id:r,post_logout_redirect_uri:n,state_data:t,extraQueryParams:i,request_type:s});await this.clearStaleState();const c=d.state;return c&&(a.debug("Signout request has state to persist"),await this.settings.stateStore.set(c.id,c.toStorageString())),d}async readSignoutResponseState(t,e=!1){const r=this._logger.create("readSignoutResponseState"),s=new Nr(zt.readParams(t,this.settings.response_mode));if(!s.state){if(r.debug("No state in response"),s.error)throw r.warn("Response was error:",s.error),new ke(s);return{state:void 0,response:s}}const n=await this.settings.stateStore[e?"remove":"get"](s.state);if(!n)throw r.throw(new Error("No matching state found in storage")),null;return{state:Ce.fromStorageString(n),response:s}}async processSignoutResponse(t){const e=this._logger.create("processSignoutResponse"),{state:r,response:s}=await this.readSignoutResponseState(t,!0);return r?(e.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(s,r)):e.debug("No state from storage; skipping response validation"),s}clearStaleState(){return this._logger.create("clearStaleState"),Ce.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(t,e){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:t,token_type_hint:e})}},Zr=class{constructor(t){this._userManager=t,this._logger=new T("SessionMonitor"),this._start=async e=>{const r=e.session_state;if(!r)return;const s=this._logger.create("_start");if(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,s.debug("session_state",r,", sub",this._sub)):(this._sub=void 0,this._sid=void 0,s.debug("session_state",r,", anonymous user")),this._checkSessionIFrame){this._checkSessionIFrame.start(r);return}try{const n=await this._userManager.metadataService.getCheckSessionIframe();if(n){s.debug("initializing check session iframe");const i=this._userManager.settings.client_id,a=this._userManager.settings.checkSessionIntervalInSeconds,o=this._userManager.settings.stopCheckSessionOnError,d=new Ur(this._callback,i,n,a,o);await d.load(),this._checkSessionIFrame=d,d.start(r)}else s.warn("no check session iframe found in the metadata")}catch(n){s.error("Error from getCheckSessionIframe:",n instanceof Error?n.message:n)}},this._stop=()=>{const e=this._logger.create("_stop");if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){const r=setInterval(async()=>{clearInterval(r);try{const s=await this._userManager.querySessionStatus();if(s){const n={session_state:s.session_state,profile:s.sub&&s.sid?{sub:s.sub,sid:s.sid}:null};this._start(n)}}catch(s){e.error("error from querySessionStatus",s instanceof Error?s.message:s)}},1e3)}},this._callback=async()=>{const e=this._logger.create("_callback");try{const r=await this._userManager.querySessionStatus();let s=!0;r&&this._checkSessionIFrame?r.sub===this._sub?(s=!1,this._checkSessionIFrame.start(r.session_state),r.sid===this._sid?e.debug("same sub still logged in at OP, restarting check session iframe; session_state",r.session_state):(e.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",r.session_state),this._userManager.events._raiseUserSessionChanged())):e.debug("different subject signed into OP",r.sub):e.debug("subject no longer signed into OP"),s?this._sub?this._userManager.events._raiseUserSignedOut():this._userManager.events._raiseUserSignedIn():e.debug("no change in session detected, no event to raise")}catch(r){this._sub&&(e.debug("Error calling queryCurrentSigninSession; raising signed out event",r),this._userManager.events._raiseUserSignedOut())}},t||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(e=>{this._logger.error(e)})}async _init(){this._logger.create("_init");const t=await this._userManager.getUser();if(t)this._start(t);else if(this._userManager.settings.monitorAnonymousSession){const e=await this._userManager.querySessionStatus();if(e){const r={session_state:e.session_state,profile:e.sub&&e.sid?{sub:e.sub,sid:e.sid}:null};this._start(r)}}}},Je=class{constructor(t){var e;this.id_token=t.id_token,this.session_state=(e=t.session_state)!=null?e:null,this.access_token=t.access_token,this.refresh_token=t.refresh_token,this.token_type=t.token_type,this.scope=t.scope,this.profile=t.profile,this.expires_at=t.expires_at,this.state=t.userState,this.url_state=t.url_state}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-X.getEpochTime()}set expires_in(t){t!==void 0&&(this.expires_at=Math.floor(t)+X.getEpochTime())}get expired(){const t=this.expires_in;if(t!==void 0)return t<=0}get scopes(){var t,e;return(e=(t=this.scope)==null?void 0:t.split(" "))!=null?e:[]}toStorageString(){return new T("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(t){return T.createStatic("User","fromStorageString"),new Je(JSON.parse(t))}},ar="oidc-client",Lr=class{constructor(){this._abort=new ve("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(t){const e=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");e.debug("setting URL in window"),this._window.location.replace(t.url);const{url:r,keepOpen:s}=await new Promise((n,i)=>{const a=o=>{var d;const c=o.data,l=(d=t.scriptOrigin)!=null?d:window.location.origin;if(!(o.origin!==l||(c==null?void 0:c.source)!==ar)){try{const h=zt.readParams(c.url,t.response_mode).get("state");if(h||e.warn("no state found in response url"),o.source!==this._window&&h!==t.state)return}catch{this._dispose(),i(new Error("Invalid response from window"))}n(c)}};window.addEventListener("message",a,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",a,!1)),this._disposeHandlers.add(this._abort.addHandler(o=>{this._dispose(),i(o)}))});return e.debug("got response from window"),this._dispose(),s||this.close(),{url:r}}_dispose(){this._logger.create("_dispose");for(const t of this._disposeHandlers)t();this._disposeHandlers.clear()}static _notifyParent(t,e,r=!1,s=window.location.origin){t.postMessage({source:ar,url:e,keepOpen:r},s)}},$r={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},Dr="_blank",Vs=60,Fs=2,qr=10,Hr=class extends _t{constructor(t){const{popup_redirect_uri:e=t.redirect_uri,popup_post_logout_redirect_uri:r=t.post_logout_redirect_uri,popupWindowFeatures:s=$r,popupWindowTarget:n=Dr,redirectMethod:i="assign",redirectTarget:a="self",iframeNotifyParentOrigin:o=t.iframeNotifyParentOrigin,iframeScriptOrigin:d=t.iframeScriptOrigin,silent_redirect_uri:c=t.redirect_uri,silentRequestTimeoutInSeconds:l=qr,automaticSilentRenew:h=!0,validateSubOnSilentRenew:S=!0,includeIdTokenInSilentRenew:v=!1,monitorSession:P=!1,monitorAnonymousSession:w=!1,checkSessionIntervalInSeconds:_=Fs,query_status_response_type:M="code",stopCheckSessionOnError:u=!0,revokeTokenTypes:g=["access_token","refresh_token"],revokeTokensOnSignout:y=!1,includeIdTokenInSilentSignout:x=!1,accessTokenExpiringNotificationTimeInSeconds:U=Vs,userStore:j}=t;if(super(t),this.popup_redirect_uri=e,this.popup_post_logout_redirect_uri=r,this.popupWindowFeatures=s,this.popupWindowTarget=n,this.redirectMethod=i,this.redirectTarget=a,this.iframeNotifyParentOrigin=o,this.iframeScriptOrigin=d,this.silent_redirect_uri=c,this.silentRequestTimeoutInSeconds=l,this.automaticSilentRenew=h,this.validateSubOnSilentRenew=S,this.includeIdTokenInSilentRenew=v,this.monitorSession=P,this.monitorAnonymousSession=w,this.checkSessionIntervalInSeconds=_,this.stopCheckSessionOnError=u,this.query_status_response_type=M,this.revokeTokenTypes=g,this.revokeTokensOnSignout=y,this.includeIdTokenInSilentSignout=x,this.accessTokenExpiringNotificationTimeInSeconds=U,j)this.userStore=j;else{const Z=typeof window<"u"?window.sessionStorage:new Xt;this.userStore=new tr({store:Z})}}},Vt=class extends Lr{constructor({silentRequestTimeoutInSeconds:t=qr}){super(),this._logger=new T("IFrameWindow"),this._timeoutInSeconds=t,this._frame=Vt.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){const t=window.document.createElement("iframe");return t.style.visibility="hidden",t.style.position="fixed",t.style.left="-1000px",t.style.top="0",t.width="0",t.height="0",window.document.body.appendChild(t),t}async navigate(t){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);const e=setTimeout(()=>this._abort.raise(new Rt("IFrame timed out without a response")),this._timeoutInSeconds*1e3);return this._disposeHandlers.add(()=>clearTimeout(e)),await super.navigate(t)}close(){var t;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",e=>{var r;const s=e.target;(r=s.parentNode)==null||r.removeChild(s),this._abort.raise(new Error("IFrame removed from DOM"))},!0),(t=this._frame.contentWindow)==null||t.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(t,e){return super._notifyParent(window.parent,t,!1,e)}},Js=class{constructor(t){this._settings=t,this._logger=new T("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:t=this._settings.silentRequestTimeoutInSeconds}){return new Vt({silentRequestTimeoutInSeconds:t})}async callback(t){this._logger.create("callback"),Vt.notifyParent(t,this._settings.iframeNotifyParentOrigin)}},Ks=500,Qs=1e3,or=class extends Lr{constructor({popupWindowTarget:t=Dr,popupWindowFeatures:e={}}){super(),this._logger=new T("PopupWindow");const r=ir.center({...$r,...e});this._window=window.open(void 0,t,ir.serialize(r)),e.closePopupWindowAfterInSeconds&&e.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{if(!this._window||typeof this._window.closed!="boolean"||this._window.closed){this._abort.raise(new Error("Popup blocked by user"));return}this.close()},e.closePopupWindowAfterInSeconds*Qs)}async navigate(t){var e;(e=this._window)==null||e.focus();const r=setInterval(()=>{(!this._window||this._window.closed)&&this._abort.raise(new Error("Popup closed by user"))},Ks);return this._disposeHandlers.add(()=>clearInterval(r)),await super.navigate(t)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(t,e){if(!window.opener)throw new Error("No window.opener. Can't complete notification.");return super._notifyParent(window.opener,t,e)}},Gs=class{constructor(t){this._settings=t,this._logger=new T("PopupNavigator")}async prepare({popupWindowFeatures:t=this._settings.popupWindowFeatures,popupWindowTarget:e=this._settings.popupWindowTarget}){return new or({popupWindowFeatures:t,popupWindowTarget:e})}async callback(t,{keepOpen:e=!1}){this._logger.create("callback"),or.notifyOpener(t,e)}},Ys=class{constructor(t){this._settings=t,this._logger=new T("RedirectNavigator")}async prepare({redirectMethod:t=this._settings.redirectMethod,redirectTarget:e=this._settings.redirectTarget}){var r;this._logger.create("prepare");let s=window.self;e==="top"&&(s=(r=window.top)!=null?r:window.self);const n=s.location[t].bind(s.location);let i;return{navigate:async a=>{this._logger.create("navigate");const o=new Promise((d,c)=>{i=c});return n(a.url),await o},close:()=>{this._logger.create("close"),i==null||i(new Error("Redirect aborted")),s.stop()}}}async callback(){}},Xs=class extends Pr{constructor(t){super({expiringNotificationTimeInSeconds:t.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new T("UserManagerEvents"),this._userLoaded=new ve("User loaded"),this._userUnloaded=new ve("User unloaded"),this._silentRenewError=new ve("Silent renew error"),this._userSignedIn=new ve("User signed in"),this._userSignedOut=new ve("User signed out"),this._userSessionChanged=new ve("User session changed")}load(t,e=!0){super.load(t),e&&this._userLoaded.raise(t)}unload(){super.unload(),this._userUnloaded.raise()}addUserLoaded(t){return this._userLoaded.addHandler(t)}removeUserLoaded(t){return this._userLoaded.removeHandler(t)}addUserUnloaded(t){return this._userUnloaded.addHandler(t)}removeUserUnloaded(t){return this._userUnloaded.removeHandler(t)}addSilentRenewError(t){return this._silentRenewError.addHandler(t)}removeSilentRenewError(t){return this._silentRenewError.removeHandler(t)}_raiseSilentRenewError(t){this._silentRenewError.raise(t)}addUserSignedIn(t){return this._userSignedIn.addHandler(t)}removeUserSignedIn(t){this._userSignedIn.removeHandler(t)}_raiseUserSignedIn(){this._userSignedIn.raise()}addUserSignedOut(t){return this._userSignedOut.addHandler(t)}removeUserSignedOut(t){this._userSignedOut.removeHandler(t)}_raiseUserSignedOut(){this._userSignedOut.raise()}addUserSessionChanged(t){return this._userSessionChanged.addHandler(t)}removeUserSessionChanged(t){this._userSessionChanged.removeHandler(t)}_raiseUserSessionChanged(){this._userSessionChanged.raise()}},en=class{constructor(t){this._userManager=t,this._logger=new T("SilentRenewService"),this._isStarted=!1,this._retryTimer=new X("Retry Silent Renew"),this._tokenExpiring=async()=>{const e=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),e.debug("silent token renewal successful")}catch(r){if(r instanceof Rt){e.warn("ErrorTimeout from signinSilent:",r,"retry in 5s"),this._retryTimer.init(5);return}e.error("Error from signinSilent:",r),this._userManager.events._raiseSilentRenewError(r)}}}async start(){const t=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(e){t.error("getUser error",e)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},tn=class{constructor(t,e){this.refresh_token=t.refresh_token,this.id_token=t.id_token,this.session_state=t.session_state,this.scope=t.scope,this.profile=t.profile,this.resource=e,this.data=t.state}},rn=class{constructor(t,e,r,s){this._logger=new T("UserManager"),this.settings=new Hr(t),this._client=new Mr(t),this._redirectNavigator=e??new Ys(this.settings),this._popupNavigator=r??new Gs(this.settings),this._iframeNavigator=s??new Js(this.settings),this._events=new Xs(this.settings),this._silentRenewService=new en(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new Zr(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(){const t=this._logger.create("getUser"),e=await this._loadUser();return e?(t.info("user loaded"),this._events.load(e,!1),e):(t.info("user not found in storage"),null)}async removeUser(){const t=this._logger.create("removeUser");await this.storeUser(null),t.info("user removed from storage"),this._events.unload()}async signinRedirect(t={}){this._logger.create("signinRedirect");const{redirectMethod:e,...r}=t,s=await this._redirectNavigator.prepare({redirectMethod:e});await this._signinStart({request_type:"si:r",...r},s)}async signinRedirectCallback(t=window.location.href){const e=this._logger.create("signinRedirectCallback"),r=await this._signinEnd(t);return r.profile&&r.profile.sub?e.info("success, signed in subject",r.profile.sub):e.info("no subject"),r}async signinResourceOwnerCredentials({username:t,password:e,skipUserInfo:r=!1}){const s=this._logger.create("signinResourceOwnerCredential"),n=await this._client.processResourceOwnerPasswordCredentials({username:t,password:e,skipUserInfo:r,extraTokenParams:this.settings.extraTokenParams});s.debug("got signin response");const i=await this._buildUser(n);return i.profile&&i.profile.sub?s.info("success, signed in subject",i.profile.sub):s.info("no subject"),i}async signinPopup(t={}){const e=this._logger.create("signinPopup"),{popupWindowFeatures:r,popupWindowTarget:s,...n}=t,i=this.settings.popup_redirect_uri;i||e.throw(new Error("No popup_redirect_uri configured"));const a=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:s}),o=await this._signin({request_type:"si:p",redirect_uri:i,display:"popup",...n},a);return o&&(o.profile&&o.profile.sub?e.info("success, signed in subject",o.profile.sub):e.info("no subject")),o}async signinPopupCallback(t=window.location.href,e=!1){const r=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(t,{keepOpen:e}),r.info("success")}async signinSilent(t={}){var e;const r=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:s,resource:n,...i}=t;let a=await this._loadUser();if(a!=null&&a.refresh_token){r.debug("using refresh token");const l=new tn(a,n);return await this._useRefreshToken(l)}const o=this.settings.silent_redirect_uri;o||r.throw(new Error("No silent_redirect_uri configured"));let d;a&&this.settings.validateSubOnSilentRenew&&(r.debug("subject prior to silent renew:",a.profile.sub),d=a.profile.sub);const c=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:s});return a=await this._signin({request_type:"si:s",redirect_uri:o,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?a==null?void 0:a.id_token:void 0,...i},c,d),a&&((e=a.profile)!=null&&e.sub?r.info("success, signed in subject",a.profile.sub):r.info("no subject")),a}async _useRefreshToken(t){const e=await this._client.useRefreshToken({state:t,timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds}),r=new Je({...t,...e});return await this.storeUser(r),this._events.load(r),r}async signinSilentCallback(t=window.location.href){const e=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(t),e.info("success")}async signinCallback(t=window.location.href){const{state:e}=await this._client.readSigninResponseState(t);switch(e.request_type){case"si:r":return await this.signinRedirectCallback(t);case"si:p":return await this.signinPopupCallback(t);case"si:s":return await this.signinSilentCallback(t);default:throw new Error("invalid response_type in state")}}async signoutCallback(t=window.location.href,e=!1){const{state:r}=await this._client.readSignoutResponseState(t);if(r)switch(r.request_type){case"so:r":await this.signoutRedirectCallback(t);break;case"so:p":await this.signoutPopupCallback(t,e);break;case"so:s":await this.signoutSilentCallback(t);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(t={}){const e=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:r,...s}=t,n=this.settings.silent_redirect_uri;n||e.throw(new Error("No silent_redirect_uri configured"));const i=await this._loadUser(),a=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r}),o=await this._signinStart({request_type:"si:s",redirect_uri:n,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?i==null?void 0:i.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...s},a);try{const d=await this._client.processSigninResponse(o.url);return e.debug("got signin response"),d.session_state&&d.profile.sub?(e.info("success for subject",d.profile.sub),{session_state:d.session_state,sub:d.profile.sub,sid:d.profile.sid}):(e.info("success, user not authenticated"),null)}catch(d){if(this.settings.monitorAnonymousSession&&d instanceof ke)switch(d.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return e.info("success for anonymous user"),{session_state:d.session_state}}throw d}}async _signin(t,e,r){const s=await this._signinStart(t,e);return await this._signinEnd(s.url,r)}async _signinStart(t,e){const r=this._logger.create("_signinStart");try{const s=await this._client.createSigninRequest(t);return r.debug("got signin request"),await e.navigate({url:s.url,state:s.state.id,response_mode:s.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(s){throw r.debug("error after preparing navigator, closing navigator window"),e.close(),s}}async _signinEnd(t,e){const r=this._logger.create("_signinEnd"),s=await this._client.processSigninResponse(t);return r.debug("got signin response"),await this._buildUser(s,e)}async _buildUser(t,e){const r=this._logger.create("_buildUser"),s=new Je(t);if(e){if(e!==s.profile.sub)throw r.debug("current user does not match user returned from signin. sub from signin:",s.profile.sub),new ke({...t,error:"login_required"});r.debug("current user matches user returned from signin")}return await this.storeUser(s),r.debug("user stored"),this._events.load(s),s}async signoutRedirect(t={}){const e=this._logger.create("signoutRedirect"),{redirectMethod:r,...s}=t,n=await this._redirectNavigator.prepare({redirectMethod:r});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...s},n),e.info("success")}async signoutRedirectCallback(t=window.location.href){const e=this._logger.create("signoutRedirectCallback"),r=await this._signoutEnd(t);return e.info("success"),r}async signoutPopup(t={}){const e=this._logger.create("signoutPopup"),{popupWindowFeatures:r,popupWindowTarget:s,...n}=t,i=this.settings.popup_post_logout_redirect_uri,a=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:s});await this._signout({request_type:"so:p",post_logout_redirect_uri:i,state:i==null?void 0:{},...n},a),e.info("success")}async signoutPopupCallback(t=window.location.href,e=!1){const r=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(t,{keepOpen:e}),r.info("success")}async _signout(t,e){const r=await this._signoutStart(t,e);return await this._signoutEnd(r.url)}async _signoutStart(t={},e){var r;const s=this._logger.create("_signoutStart");try{const n=await this._loadUser();s.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(n);const i=t.id_token_hint||n&&n.id_token;i&&(s.debug("setting id_token_hint in signout request"),t.id_token_hint=i),await this.removeUser(),s.debug("user removed, creating signout request");const a=await this._client.createSignoutRequest(t);return s.debug("got signout request"),await e.navigate({url:a.url,state:(r=a.state)==null?void 0:r.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(n){throw s.debug("error after preparing navigator, closing navigator window"),e.close(),n}}async _signoutEnd(t){const e=this._logger.create("_signoutEnd"),r=await this._client.processSignoutResponse(t);return e.debug("got signout response"),r}async signoutSilent(t={}){var e;const r=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:s,...n}=t,i=this.settings.includeIdTokenInSilentSignout?(e=await this._loadUser())==null?void 0:e.id_token:void 0,a=this.settings.popup_post_logout_redirect_uri,o=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:s});await this._signout({request_type:"so:s",post_logout_redirect_uri:a,id_token_hint:i,...n},o),r.info("success")}async signoutSilentCallback(t=window.location.href){const e=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(t),e.info("success")}async revokeTokens(t){const e=await this._loadUser();await this._revokeInternal(e,t)}async _revokeInternal(t,e=this.settings.revokeTokenTypes){const r=this._logger.create("_revokeInternal");if(!t)return;const s=e.filter(n=>typeof t[n]=="string");if(!s.length){r.debug("no need to revoke due to no token(s)");return}for(const n of s)await this._client.revokeToken(t[n],n),r.info(`${n} revoked successfully`),n!=="access_token"&&(t[n]=null);await this.storeUser(t),r.debug("user stored"),this._events.load(t)}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){const t=this._logger.create("_loadUser"),e=await this.settings.userStore.get(this._userStoreKey);return e?(t.debug("user storageString loaded"),Je.fromStorageString(e)):(t.debug("no user storageString"),null)}async storeUser(t){const e=this._logger.create("storeUser");if(t){e.debug("storing user");const r=t.toStorageString();await this.settings.userStore.set(this._userStoreKey,r)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey)}async clearStaleState(){await this._client.clearStaleState()}},sn="2.4.0",nn=sn,Pt={},an=R&&R.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.readExpirationTimeInJwt=void 0;var on=an(Yt),cn=Et();function dn(t){var e;try{e=(0,on.default)(t).exp*1e3,(0,cn.assert)(typeof e=="number"&&!isNaN(e))}catch{return}return e}Pt.readExpirationTimeInJwt=dn;var we={},cr=R&&R.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),n,i=[],a;try{for(;(e===void 0||e-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i};Object.defineProperty(we,"__esModule",{value:!0});we.retrieveQueryParamFromUrl=we.retrieveAllQueryParamStartingWithPrefixFromUrl=we.addQueryParamToUrl=void 0;function ln(t){var e=t.url,r=t.name,s=t.value,n=e,i=zr({url:e,name:r});return i.wasPresent&&(n=i.newUrl),n+="".concat(n.includes("?")?"&":n.endsWith("?")?"":"?").concat(r,"=").concat(encodeURIComponent(s)),{newUrl:n}}we.addQueryParamToUrl=ln;function Br(t){var e=t.url,r=t.prefix,s=t.doLeavePrefixInResults,n=cr(e.split("?"),2),i=n[0],a=n[1],o=a===void 0?"":a,d={},c=function(){var l=o.replace(/^\?/,"").split("&").map(function(h){return h.split("=")}).filter(function(h){var S=cr(h,2),v=S[0],P=S[1];return v.startsWith(r)?(d[s?v:v.substring(r.length)]=decodeURIComponent(P),!1):!0}).map(function(h){return h.join("=")}).join("&");return l=l===""?"":"?".concat(l),{newLocationSearch:l}}().newLocationSearch;return{newUrl:"".concat(i).concat(c),values:d}}we.retrieveAllQueryParamStartingWithPrefixFromUrl=Br;function zr(t){var e=t.url,r=t.name,s=Br({url:e,prefix:r,doLeavePrefixInResults:!0}),n=s.newUrl,i=s.values;return r in i?{wasPresent:!0,newUrl:n,value:i[r]}:{wasPresent:!1}}we.retrieveQueryParamFromUrl=zr;var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.fnv1aHashToHex=void 0;function un(t){for(var e=2166136261,r=0;r<t.length;r++)e^=t.charCodeAt(r),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return(e>>>0).toString(16)}Ut.fnv1aHashToHex=un;var $e={},hn=R&&R.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty($e,"__esModule",{value:!0});$e.VoidDeferred=$e.Deferred=void 0;var dr=is(),Wr=function(){function t(){var e=this;this.isPending=!0;var r,s;this.pr=new Promise(function(n,i){r=function(a){(0,dr.overwriteReadonlyProp)(e,"isPending",!1),n(a)},s=function(a){(0,dr.overwriteReadonlyProp)(e,"isPending",!1),i(a)}}),this.resolve=r,this.reject=s}return t}();$e.Deferred=Wr;var fn=function(t){hn(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Wr);$e.VoidDeferred=fn;var At={},gn=R&&R.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(At,"__esModule",{value:!0});At.decodeJwt=void 0;var pn=gn(Yt);At.decodeJwt=pn.default;var jt={},_n=R&&R.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(jt,"__esModule",{value:!0});jt.getDownlinkAndRtt=void 0;var lr=Et();function mn(){var t,e;if(window.navigator instanceof Object){var r=window.navigator;try{for(var s=_n(["connection","mozConnection","webkitConnection"]),n=s.next();!n.done;n=s.next()){var i=n.value;try{var a=r[i],o=a.downlink,d=a.rtt;return(0,lr.assert)(typeof o=="number"),(0,lr.assert)(typeof d=="number"),{downlink:o,rtt:d}}catch{}}}catch(c){t={error:c}}finally{try{n&&!n.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}}}jt.getDownlinkAndRtt=mn;var vn=R&&R.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function s(){this.constructor=e}e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),de=R&&R.__assign||function(){return de=Object.assign||function(t){for(var e,r=1,s=arguments.length;r<s;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},de.apply(this,arguments)},Te=R&&R.__awaiter||function(t,e,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(l){try{c(s.next(l))}catch(h){a(h)}}function d(l){try{c(s.throw(l))}catch(h){a(h)}}function c(l){l.done?i(l.value):n(l.value).then(o,d)}c((s=s.apply(t,e||[])).next())})},Ee=R&&R.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,n,i,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(l){return d([c,l])}}function d(c){if(s)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(s=1,n&&(i=c[0]&2?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],n=0}finally{s=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Lt=R&&R.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),n,i=[],a;try{for(;(e===void 0||e-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i},ur=R&&R.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var s=0,n=e.length,i;s<n;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))},hr=R&&R.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Le,"__esModule",{value:!0});Le.createOidc=Le.OidcInitializationError=void 0;var yn=Ts,$t=Sr,fr=Pt,ge=Et(),ae=we,wn=Ut,kn=$e,bn=At,Sn=jt,Ae=function(t){vn(e,t);function e(r){var s=this.constructor,n=t.call(this,function(){switch(r.type){case"server down":return"The OIDC server is down";case"bad configuration":return"Bad configuration. Timed out after ".concat(r.timeoutDelayMs,"ms");case"unknown":return r.cause.message}}(),{cause:r.type==="unknown"?r.cause:void 0})||this;return n.type=r.type,Object.setPrototypeOf(n,s.prototype),n}return e}(Error);Le.OidcInitializationError=Ae;var gr=["code","state","session_state","iss"];function xn(t){return Te(this,void 0,void 0,function(){var e,r,s,n,i,a,o,d,c,l,h,S,v,P,w,_,M,u,g,y,x,U,j,Z,L=this;return Ee(this,function(Q){switch(Q.label){case 0:return e=t.issuerUri,r=t.clientId,s=t.clientSecret,n=t.transformUrlBeforeRedirect,i=n===void 0?function(O){return O}:n,a=t.extraQueryParams,o=t.publicUrl,d=t.decodedIdTokenSchema,c=function(){if(typeof a=="function")return a;if(a!==void 0)return function(){return a}}(),l=function(){return o===void 0?window.location.origin:(o.startsWith("http")?o:"".concat(window.location.origin).concat(o)).replace(/\/$/,"")}(),h=(0,wn.fnv1aHashToHex)("".concat(e," ").concat(r)),S="configHash",v=new yn.UserManager({authority:e,client_id:r,client_secret:s,redirect_uri:"",response_type:"code",scope:"openid profile",automaticSilentRenew:!1,silent_redirect_uri:"".concat(l,"/silent-sso.html?").concat(S,"=").concat(h)}),P=void 0,w=history.pushState.bind(history),history.pushState=function(){for(var A=[],$=0;$<arguments.length;$++)A[$]=arguments[$];return P=window.location.href,w.apply(void 0,ur([],Lt(A),!1))},_=!1,M=function(O){var A=O.doesCurrentHrefRequiresAuth,$=O.extraQueryParams;return Te(L,void 0,void 0,function(){function q(){for(var z=[],fe=0;fe<arguments.length;fe++)z[fe]=arguments[fe];var Ue=new(K.bind.apply(K,ur([void 0],Lt(z),!1)));return new Proxy(Ue,{get:function(He,ee){if(ee==="href"){var W=Ue.href;return Object.entries(de(de({},c==null?void 0:c()),$)).forEach(function(Be){var ze=Lt(Be,2),J=ze[0],Y=ze[1];return W=(0,ae.addQueryParamToUrl)({url:W,name:J,value:Y}).newUrl}),W=i(W),W}return He[ee]}})}var K,H,G;return Ee(this,function(z){switch(z.label){case 0:return _?[2,new Promise(function(){})]:(_=!0,K=window.URL,Object.defineProperty(window,"URL",{value:q}),H=(0,ae.addQueryParamToUrl)({url:window.location.href,name:S,value:h}).newUrl,A&&(G=function(){document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",G),P!==void 0?window.location.href=P:window.history.back())},document.addEventListener("visibilitychange",G)),[4,v.signinRedirect({redirect_uri:H,redirectMethod:A?"replace":"assign"})]);case 1:return z.sent(),[2,new Promise(function(){})]}})})},[4,function(){return Te(this,void 0,void 0,function(){var A,H,H,ee,$,q,K,H,W,W,G,z,fe,Ue,He,ee,W,Be,ze;return Ee(this,function(J){switch(J.label){case 0:A=window.location.href;{if(H=(0,ae.retrieveQueryParamFromUrl)({name:S,url:A}),!H.wasPresent||H.value!==h)return[3,5];A=H.newUrl}if(H=(0,ae.retrieveQueryParamFromUrl)({name:"error",url:A}),H.wasPresent)throw new Error("OIDC error: ".concat(H.value));ee="https://dummy.com";try{for($=hr(gr),q=$.next();!q.done;q=$.next()){if(K=q.value,H=(0,ae.retrieveQueryParamFromUrl)({name:K,url:A}),!H.wasPresent){if(K==="iss")continue;throw new Error("Missing query param: ".concat(K))}ee=(0,ae.addQueryParamToUrl)({url:ee,name:K,value:H.value}).newUrl,A=H.newUrl}}catch(Y){Be={error:Y}}finally{try{q&&!q.done&&(ze=$.return)&&ze.call($)}finally{if(Be)throw Be.error}}window.history.pushState(null,"",A),W=void 0,J.label=1;case 1:return J.trys.push([1,3,,4]),[4,v.signinRedirectCallback(ee)];case 2:return W=J.sent(),[3,4];case 3:return J.sent(),[2,void 0];case 4:return[2,W];case 5:return[4,v.getUser()];case 6:if(W=J.sent(),W===null)return[3,11];J.label=7;case 7:return J.trys.push([7,9,,10]),[4,v.signinSilent()];case 8:return J.sent(),[3,10];case 9:if(G=J.sent(),(0,ge.assert)(G instanceof Error),G.message==="Failed to fetch")throw new Ae({type:"server down"});return[2,void 0];case 10:return[2,W];case 11:return z=new kn.Deferred,fe=function(){var Y=(0,Sn.getDownlinkAndRtt)();if(Y===void 0)return 5e3;var We=Y.downlink,ut=Y.rtt,Ve=3e3,ie=ut*2.5+3e3/(We+1);return Math.max(Ve,ie)}(),Ue=setTimeout(function(){return z.reject(new Ae({type:"bad configuration",timeoutDelayMs:fe}))},fe),He=function(Y){var We,ut;if(typeof Y.data=="string"){var Ve=Y.data;{var ie=void 0;try{ie=(0,ae.retrieveQueryParamFromUrl)({name:S,url:Ve})}catch{return}if(!ie.wasPresent||ie.value!==h)return}clearTimeout(Ue),window.removeEventListener("message",He);{var ie=(0,ae.retrieveQueryParamFromUrl)({name:"error",url:Ve});if(ie.wasPresent){z.resolve(void 0);return}}var Zt="https://dummy.com";try{for(var ht=hr(gr),Fe=ht.next();!Fe.done;Fe=ht.next()){var ft=Fe.value,ie=(0,ae.retrieveQueryParamFromUrl)({name:ft,url:Ve});if(!ie.wasPresent){if(ft==="iss")continue;throw new Error("Missing query param: ".concat(ft))}Zt=(0,ae.addQueryParamToUrl)({url:Zt,name:ft,value:ie.value}).newUrl}}catch(rr){We={error:rr}}finally{try{Fe&&!Fe.done&&(ut=ht.return)&&ut.call(ht)}finally{if(We)throw We.error}}z.resolve(Zt)}},window.addEventListener("message",He,!1),v.signinSilent({silentRequestTimeoutInSeconds:fe/1e3}).catch(function(Y){Y.message==="Failed to fetch"&&(clearTimeout(Ue),z.reject(new Ae({type:"server down"})))}),[4,z.pr];case 12:return ee=J.sent(),ee===void 0?[3,14]:[4,v.signinRedirectCallback(ee)];case 13:return W=J.sent(),[2,W];case 14:return[2,void 0]}})})}().then(function(O){if(O!==void 0){var A=pr({oidcClientTsUser:O,decodedIdTokenSchema:d});return A.refreshTokenExpirationTime<A.accessTokenExpirationTime&&console.warn(["The OIDC refresh token shorter than the one of the access token.","This is very unusual and probably a misconfiguration.","Check your oidc server configuration for ".concat(r," ").concat(e)].join(" ")),A}},function(O){return(0,ge.assert)(O instanceof Error),O})];case 1:return u=Q.sent(),g={params:{issuerUri:e,clientId:r}},u instanceof Error?(y=u,x=y instanceof Ae?y:new Ae({type:"unknown",cause:y}),console.error("OIDC initilization error: ".concat(x.message)),[2,(0,$t.id)(de(de({},g),{isUserLoggedIn:!1,login:function(){return Te(L,void 0,void 0,function(){return Ee(this,function(O){return alert("Authentication is currently unavailable. Please try again later."),[2,new Promise(function(){})]})})},initializationError:x}))]):u===void 0?[2,(0,$t.id)(de(de({},g),{isUserLoggedIn:!1,login:M,initializationError:void 0}))]:(U=u,j=new Set,Z=(0,$t.id)(de(de({},g),{isUserLoggedIn:!0,getTokens:function(){return U},logout:function(O){return Te(L,void 0,void 0,function(){return Ee(this,function(A){switch(A.label){case 0:return[4,v.signoutRedirect({post_logout_redirect_uri:function(){switch(O.redirectTo){case"current page":return window.location.href;case"home":return l;case"specific url":return O.url}(0,ge.assert)(!1)}()})];case 1:return A.sent(),[2,new Promise(function(){})]}})})},renewTokens:function(){return Te(L,void 0,void 0,function(){var O,A;return Ee(this,function($){switch($.label){case 0:return[4,v.signinSilent()];case 1:return O=$.sent(),(0,ge.assert)(O!==null),A=Object.getOwnPropertyDescriptor(U,"decodedIdToken"),(0,ge.assert)(A!==void 0),U=pr({oidcClientTsUser:O,decodedIdTokenSchema:d}),Object.defineProperty(U,"decodedIdToken",A),j.forEach(function(q){return q()}),[2]}})})},subscribeToTokensChange:function(O){return j.add(O),{unsubscribe:function(){j.delete(O)}}}})),function O(){var A=this,$=Math.min(U.accessTokenExpirationTime,U.refreshTokenExpirationTime)-Date.now();setTimeout(function(){return Te(A,void 0,void 0,function(){return Ee(this,function(q){switch(q.label){case 0:return q.trys.push([0,2,,4]),[4,Z.renewTokens()];case 1:return q.sent(),[3,4];case 2:return q.sent(),[4,M({doesCurrentHrefRequiresAuth:!0})];case 3:return q.sent(),[3,4];case 4:return O(),[2]}})})},$-25*1e3)}(),[2,Z])}})})}Le.createOidc=xn;function pr(t){var e=t.oidcClientTsUser,r=t.decodedIdTokenSchema,s=e.access_token,n=function(){e:{var l=e.expires_at;if(l===void 0)break e;return l*1e3}e:{var h=(0,fr.readExpirationTimeInJwt)(s);if(h===void 0)break e;return h}(0,ge.assert)(!1,"Failed to get access token expiration time")}(),i=e.refresh_token;(0,ge.assert)(i!==void 0,"No refresh token provided by the oidc server");var a=function(){e:{var l=(0,fr.readExpirationTimeInJwt)(i);if(l===void 0)break e;return l}(0,ge.assert)(!1,"Failed to get refresh token expiration time")}(),o=e.id_token;(0,ge.assert)(o!==void 0,"No id token provided by the oidc server");var d={accessToken:s,accessTokenExpirationTime:n,refreshToken:i,refreshTokenExpirationTime:a,idToken:o,decodedIdToken:null},c=void 0;return Object.defineProperty(d,"decodedIdToken",{get:function(){if(c!==void 0&&c.idToken===this.idToken)return c.decodedIdToken;var l=(0,bn.decodeJwt)(this.idToken);return r!==void 0&&(l=r.parse(l)),c={idToken:this.idToken,decodedIdToken:l},l},configurable:!0,enumerable:!0}),d}var Nt={},Tn=R&&R.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),n,i=[],a;try{for(;(e===void 0||e-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i},En=R&&R.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var s=0,n=e.length,i;s<n;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.useGuaranteedMemo=void 0;var In=xr;function Cn(t,e){var r=(0,In.useRef)();return(!r.current||e.length!==r.current.prevDeps.length||r.current.prevDeps.map(function(s,n){return s===e[n]}).indexOf(!1)>=0)&&(r.current={v:t(),prevDeps:En([],Tn(e),!1)}),r.current.v}Nt.useGuaranteedMemo=Cn;var Me=R&&R.__assign||function(){return Me=Object.assign||function(t){for(var e,r=1,s=arguments.length;r<s;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Me.apply(this,arguments)},_r=R&&R.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),n,i=[],a;try{for(;(e===void 0||e-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return i};Object.defineProperty(Gt,"__esModule",{value:!0});var Vr=Gt.createReactOidc=void 0,Dt=B,je=xr,Rn=Le,mr=Et(),vr=Sr,On=Nt,yr=(0,je.createContext)(void 0);function Pn(t){var e=(0,Rn.createOidc)(t),r=t.decodedIdTokenSchema;function s(i){var a=i.children,o=i.fallback,d=_r((0,je.useState)(void 0),2),c=d[0],l=d[1];return(0,je.useEffect)(function(){e.then(l)},[]),c===void 0?(0,Dt.jsx)(Dt.Fragment,{children:o===void 0?null:o}):(0,Dt.jsx)(yr.Provider,{value:{oidc:c,decodedIdTokenSchema:r},children:a})}function n(i){var a=(i??{}).assertUserLoggedIn,o=a===void 0?!1:a,d=function(){var _=(0,je.useContext)(yr);return(0,mr.assert)(_!==void 0,"You must use useOidc inside a OidcProvider"),_}(),c=d.oidc,l=d.decodedIdTokenSchema,h=_r((0,je.useReducer)(function(){return[]},[]),2),S=h[1];if((0,je.useEffect)(function(){if(c.isUserLoggedIn){var w=c.subscribeToTokensChange(S).unsubscribe;return w}},[c]),o&&!c.isUserLoggedIn)throw new Error("The user must be logged in to use this hook (assertUserLoggedIn was set to true)");var v=function(){var _=c.isUserLoggedIn?c.getTokens():void 0,M=(0,On.useGuaranteedMemo)(function(){if(_!==void 0){var u={accessToken:_.accessToken,accessTokenExpirationTime:_.accessTokenExpirationTime,idToken:_.idToken,refreshToken:_.refreshToken,refreshTokenExpirationTime:_.refreshTokenExpirationTime,decodedIdToken:null},g=void 0;return Object.defineProperty(u,"decodedIdToken",{get:function(){if(g!==void 0)return g.decodedIdToken;var y=_.decodedIdToken;return r!==void 0&&r!==l&&(y=r.parse(y)),g={decodedIdToken:y},y}}),u}},[_==null?void 0:_.accessToken,_==null?void 0:_.accessTokenExpirationTime,_==null?void 0:_.idToken,_==null?void 0:_.refreshToken,_==null?void 0:_.refreshTokenExpirationTime]);return{oidcTokens:M}}().oidcTokens,P={params:c.params};return c.isUserLoggedIn?(0,vr.id)(((0,mr.assert)(v!==void 0),Me(Me({},P),{isUserLoggedIn:!0,oidcTokens:v,logout:c.logout,renewTokens:c.renewTokens}))):(0,vr.id)(Me(Me({},P),{isUserLoggedIn:!1,login:c.login,initializationError:c.initializationError}))}return{OidcProvider:s,useOidc:n,prOidc:e}}Vr=Gt.createReactOidc=Pn;var N;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{const i={};for(const a of n)i[a]=a;return i},t.getValidEnumValues=n=>{const i=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),a={};for(const o of i)a[o]=n[o];return t.objectValues(a)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.push(a);return i},t.find=(n,i)=>{for(const a of n)if(i(a))return a},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}t.joinValues=s,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(N||(N={}));var Ft;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ft||(Ft={}));const p=N.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ye=t=>{switch(typeof t){case"undefined":return p.undefined;case"string":return p.string;case"number":return isNaN(t)?p.nan:p.number;case"boolean":return p.boolean;case"function":return p.function;case"bigint":return p.bigint;case"symbol":return p.symbol;case"object":return Array.isArray(t)?p.array:t===null?p.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?p.promise:typeof Map<"u"&&t instanceof Map?p.map:typeof Set<"u"&&t instanceof Set?p.set:typeof Date<"u"&&t instanceof Date?p.date:p.object;default:return p.unknown}},f=N.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Un=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class re extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},s={_errors:[]},n=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)s._errors.push(r(a));else{let o=s,d=0;for(;d<a.path.length;){const c=a.path[d];d===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(r(a))):o[c]=o[c]||{_errors:[]},o=o[c],d++}}};return n(this),s}toString(){return this.message}get message(){return JSON.stringify(this.issues,N.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},s=[];for(const n of this.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}}re.create=t=>new re(t);const Ge=(t,e)=>{let r;switch(t.code){case f.invalid_type:t.received===p.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case f.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,N.jsonStringifyReplacer)}`;break;case f.unrecognized_keys:r=`Unrecognized key(s) in object: ${N.joinValues(t.keys,", ")}`;break;case f.invalid_union:r="Invalid input";break;case f.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${N.joinValues(t.options)}`;break;case f.invalid_enum_value:r=`Invalid enum value. Expected ${N.joinValues(t.options)}, received '${t.received}'`;break;case f.invalid_arguments:r="Invalid function arguments";break;case f.invalid_return_type:r="Invalid function return type";break;case f.invalid_date:r="Invalid date";break;case f.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:N.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case f.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case f.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case f.custom:r="Invalid input";break;case f.invalid_intersection_types:r="Intersection results could not be merged";break;case f.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case f.not_finite:r="Number must be finite";break;default:r=e.defaultError,N.assertNever(t)}return{message:r}};let Fr=Ge;function An(t){Fr=t}function mt(){return Fr}const vt=t=>{const{data:e,path:r,errorMaps:s,issueData:n}=t,i=[...r,...n.path||[]],a={...n,path:i};let o="";const d=s.filter(c=>!!c).slice().reverse();for(const c of d)o=c(a,{data:e,defaultError:o}).message;return{...n,path:i,message:n.message||o}},jn=[];function m(t,e){const r=vt({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,mt(),Ge].filter(s=>!!s)});t.common.issues.push(r)}class V{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const s=[];for(const n of r){if(n.status==="aborted")return E;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,r){const s=[];for(const n of r)s.push({key:await n.key,value:await n.value});return V.mergeObjectSync(e,s)}static mergeObjectSync(e,r){const s={};for(const n of r){const{key:i,value:a}=n;if(i.status==="aborted"||a.status==="aborted")return E;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||n.alwaysSet)&&(s[i.value]=a.value)}return{status:e.value,value:s}}}const E=Object.freeze({status:"aborted"}),Jr=t=>({status:"dirty",value:t}),F=t=>({status:"valid",value:t}),Jt=t=>t.status==="aborted",Kt=t=>t.status==="dirty",Ye=t=>t.status==="valid",yt=t=>typeof Promise<"u"&&t instanceof Promise;var k;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(k||(k={}));class ue{constructor(e,r,s,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wr=(t,e)=>{if(Ye(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new re(t.common.issues);return this._error=r,this._error}}};function I(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:s,description:n}=t;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:s??o.defaultError}:{message:r??o.defaultError},description:n}}class C{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ye(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new V,ctx:{common:e.parent.common,data:e.data,parsedType:ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(yt(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const s=this.safeParse(e,r);if(s.success)return s.data;throw s.error}safeParse(e,r){var s;const n={common:{issues:[],async:(s=r==null?void 0:r.async)!==null&&s!==void 0?s:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ye(e)},i=this._parseSync({data:e,path:n.path,parent:n});return wr(n,i)}async parseAsync(e,r){const s=await this.safeParseAsync(e,r);if(s.success)return s.data;throw s.error}async safeParseAsync(e,r){const s={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ye(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(yt(n)?n:Promise.resolve(n));return wr(s,i)}refine(e,r){const s=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{const a=e(n),o=()=>i.addIssue({code:f.custom,...s(n)});return typeof Promise<"u"&&a instanceof Promise?a.then(d=>d?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof r=="function"?r(s,n):r),!1))}_refinement(e){return new ne({schema:this,typeName:b.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return pe.create(this,this._def)}nullable(){return Pe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return se.create(this,this._def)}promise(){return qe.create(this,this._def)}or(e){return rt.create([this,e],this._def)}and(e){return st.create(this,e,this._def)}transform(e){return new ne({...I(this._def),schema:this,typeName:b.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new ct({...I(this._def),innerType:this,defaultValue:r,typeName:b.ZodDefault})}brand(){return new Qr({typeName:b.ZodBranded,type:this,...I(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new St({...I(this._def),innerType:this,catchValue:r,typeName:b.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return lt.create(this,e)}readonly(){return Tt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Nn=/^c[^\s-]{8,}$/i,Mn=/^[a-z][a-z0-9]*$/,Zn=/^[0-9A-HJKMNP-TV-Z]{26}$/,Ln=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,$n=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Dn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let qt;const qn=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Hn=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Bn=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function zn(t,e){return!!((e==="v4"||!e)&&qn.test(t)||(e==="v6"||!e)&&Hn.test(t))}class te extends C{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==p.string){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_type,expected:p.string,received:i.parsedType}),E}const s=new V;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:f.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:f.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(n=this._getOrReturnCtx(e,n),a?m(n,{code:f.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&m(n,{code:f.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")$n.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"email",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")qt||(qt=new RegExp(Dn,"u")),qt.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"emoji",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")Ln.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"uuid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")Nn.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"cuid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")Mn.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"cuid2",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")Zn.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"ulid",code:f.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),m(n,{validation:"url",code:f.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"regex",code:f.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),m(n,{code:f.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),m(n,{code:f.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),m(n,{code:f.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?Bn(i).test(e.data)||(n=this._getOrReturnCtx(e,n),m(n,{code:f.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="ip"?zn(e.data,i.version)||(n=this._getOrReturnCtx(e,n),m(n,{validation:"ip",code:f.invalid_string,message:i.message}),s.dirty()):N.assertNever(i);return{status:s.value,value:e.data}}_regex(e,r,s){return this.refinement(n=>e.test(n),{validation:r,code:f.invalid_string,...k.errToObj(s)})}_addCheck(e){return new te({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...k.errToObj(e)})}url(e){return this._addCheck({kind:"url",...k.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...k.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...k.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...k.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...k.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...k.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...k.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,...k.errToObj(e==null?void 0:e.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...k.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...k.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...k.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...k.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...k.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...k.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...k.errToObj(r)})}nonempty(e){return this.min(1,k.errToObj(e))}trim(){return new te({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new te({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new te({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}te.create=t=>{var e;return new te({checks:[],typeName:b.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...I(t)})};function Wn(t,e){const r=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=r>s?r:s,i=parseInt(t.toFixed(n).replace(".","")),a=parseInt(e.toFixed(n).replace(".",""));return i%a/Math.pow(10,n)}class be extends C{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==p.number){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_type,expected:p.number,received:i.parsedType}),E}let s;const n=new V;for(const i of this._def.checks)i.kind==="int"?N.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),m(s,{code:f.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?Wn(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),m(s,{code:f.not_finite,message:i.message}),n.dirty()):N.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,s,n){return new be({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:k.toString(n)}]})}_addCheck(e){return new be({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:k.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:k.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:k.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:k.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&N.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(r)&&Number.isFinite(e)}}be.create=t=>new be({checks:[],typeName:b.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...I(t)});class Se extends C{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==p.bigint){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_type,expected:p.bigint,received:i.parsedType}),E}let s;const n=new V;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),m(s,{code:f.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):N.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,k.toString(r))}gt(e,r){return this.setLimit("min",e,!1,k.toString(r))}lte(e,r){return this.setLimit("max",e,!0,k.toString(r))}lt(e,r){return this.setLimit("max",e,!1,k.toString(r))}setLimit(e,r,s,n){return new Se({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:k.toString(n)}]})}_addCheck(e){return new Se({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:k.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:k.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:k.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:k.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:k.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Se.create=t=>{var e;return new Se({checks:[],typeName:b.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...I(t)})};class Xe extends C{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==p.boolean){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:p.boolean,received:s.parsedType}),E}return F(e.data)}}Xe.create=t=>new Xe({typeName:b.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...I(t)});class Re extends C{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==p.date){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_type,expected:p.date,received:i.parsedType}),E}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return m(i,{code:f.invalid_date}),E}const s=new V;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:f.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),m(n,{code:f.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):N.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Re({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:k.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:k.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Re.create=t=>new Re({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:b.ZodDate,...I(t)});class wt extends C{_parse(e){if(this._getType(e)!==p.symbol){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:p.symbol,received:s.parsedType}),E}return F(e.data)}}wt.create=t=>new wt({typeName:b.ZodSymbol,...I(t)});class et extends C{_parse(e){if(this._getType(e)!==p.undefined){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:p.undefined,received:s.parsedType}),E}return F(e.data)}}et.create=t=>new et({typeName:b.ZodUndefined,...I(t)});class tt extends C{_parse(e){if(this._getType(e)!==p.null){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:p.null,received:s.parsedType}),E}return F(e.data)}}tt.create=t=>new tt({typeName:b.ZodNull,...I(t)});class De extends C{constructor(){super(...arguments),this._any=!0}_parse(e){return F(e.data)}}De.create=t=>new De({typeName:b.ZodAny,...I(t)});class Ie extends C{constructor(){super(...arguments),this._unknown=!0}_parse(e){return F(e.data)}}Ie.create=t=>new Ie({typeName:b.ZodUnknown,...I(t)});class _e extends C{_parse(e){const r=this._getOrReturnCtx(e);return m(r,{code:f.invalid_type,expected:p.never,received:r.parsedType}),E}}_e.create=t=>new _e({typeName:b.ZodNever,...I(t)});class kt extends C{_parse(e){if(this._getType(e)!==p.undefined){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:p.void,received:s.parsedType}),E}return F(e.data)}}kt.create=t=>new kt({typeName:b.ZodVoid,...I(t)});class se extends C{_parse(e){const{ctx:r,status:s}=this._processInputParams(e),n=this._def;if(r.parsedType!==p.array)return m(r,{code:f.invalid_type,expected:p.array,received:r.parsedType}),E;if(n.exactLength!==null){const a=r.data.length>n.exactLength.value,o=r.data.length<n.exactLength.value;(a||o)&&(m(r,{code:a?f.too_big:f.too_small,minimum:o?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(m(r,{code:f.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(m(r,{code:f.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>n.type._parseAsync(new ue(r,a,r.path,o)))).then(a=>V.mergeArray(s,a));const i=[...r.data].map((a,o)=>n.type._parseSync(new ue(r,a,r.path,o)));return V.mergeArray(s,i)}get element(){return this._def.type}min(e,r){return new se({...this._def,minLength:{value:e,message:k.toString(r)}})}max(e,r){return new se({...this._def,maxLength:{value:e,message:k.toString(r)}})}length(e,r){return new se({...this._def,exactLength:{value:e,message:k.toString(r)}})}nonempty(e){return this.min(1,e)}}se.create=(t,e)=>new se({type:t,minLength:null,maxLength:null,exactLength:null,typeName:b.ZodArray,...I(e)});function Ne(t){if(t instanceof D){const e={};for(const r in t.shape){const s=t.shape[r];e[r]=pe.create(Ne(s))}return new D({...t._def,shape:()=>e})}else return t instanceof se?new se({...t._def,type:Ne(t.element)}):t instanceof pe?pe.create(Ne(t.unwrap())):t instanceof Pe?Pe.create(Ne(t.unwrap())):t instanceof he?he.create(t.items.map(e=>Ne(e))):t}class D extends C{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=N.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==p.object){const c=this._getOrReturnCtx(e);return m(c,{code:f.invalid_type,expected:p.object,received:c.parsedType}),E}const{status:s,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof _e&&this._def.unknownKeys==="strip"))for(const c in n.data)a.includes(c)||o.push(c);const d=[];for(const c of a){const l=i[c],h=n.data[c];d.push({key:{status:"valid",value:c},value:l._parse(new ue(n,h,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof _e){const c=this._def.unknownKeys;if(c==="passthrough")for(const l of o)d.push({key:{status:"valid",value:l},value:{status:"valid",value:n.data[l]}});else if(c==="strict")o.length>0&&(m(n,{code:f.unrecognized_keys,keys:o}),s.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const l of o){const h=n.data[l];d.push({key:{status:"valid",value:l},value:c._parse(new ue(n,h,n.path,l)),alwaysSet:l in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const c=[];for(const l of d){const h=await l.key;c.push({key:h,value:await l.value,alwaysSet:l.alwaysSet})}return c}).then(c=>V.mergeObjectSync(s,c)):V.mergeObjectSync(s,d)}get shape(){return this._def.shape()}strict(e){return k.errToObj,new D({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,s)=>{var n,i,a,o;const d=(a=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,r,s).message)!==null&&a!==void 0?a:s.defaultError;return r.code==="unrecognized_keys"?{message:(o=k.errToObj(e).message)!==null&&o!==void 0?o:d}:{message:d}}}:{}})}strip(){return new D({...this._def,unknownKeys:"strip"})}passthrough(){return new D({...this._def,unknownKeys:"passthrough"})}extend(e){return new D({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new D({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:b.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new D({...this._def,catchall:e})}pick(e){const r={};return N.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(r[s]=this.shape[s])}),new D({...this._def,shape:()=>r})}omit(e){const r={};return N.objectKeys(this.shape).forEach(s=>{e[s]||(r[s]=this.shape[s])}),new D({...this._def,shape:()=>r})}deepPartial(){return Ne(this)}partial(e){const r={};return N.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?r[s]=n:r[s]=n.optional()}),new D({...this._def,shape:()=>r})}required(e){const r={};return N.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])r[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof pe;)i=i._def.innerType;r[s]=i}}),new D({...this._def,shape:()=>r})}keyof(){return Kr(N.objectKeys(this.shape))}}D.create=(t,e)=>new D({shape:()=>t,unknownKeys:"strip",catchall:_e.create(),typeName:b.ZodObject,...I(e)});D.strictCreate=(t,e)=>new D({shape:()=>t,unknownKeys:"strict",catchall:_e.create(),typeName:b.ZodObject,...I(e)});D.lazycreate=(t,e)=>new D({shape:t,unknownKeys:"strip",catchall:_e.create(),typeName:b.ZodObject,...I(e)});class rt extends C{_parse(e){const{ctx:r}=this._processInputParams(e),s=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new re(o.ctx.common.issues));return m(r,{code:f.invalid_union,unionErrors:a}),E}if(r.common.async)return Promise.all(s.map(async i=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(n);{let i;const a=[];for(const d of s){const c={...r,common:{...r.common,issues:[]},parent:null},l=d._parseSync({data:r.data,path:r.path,parent:c});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(d=>new re(d));return m(r,{code:f.invalid_union,unionErrors:o}),E}}get options(){return this._def.options}}rt.create=(t,e)=>new rt({options:t,typeName:b.ZodUnion,...I(e)});const pt=t=>t instanceof it?pt(t.schema):t instanceof ne?pt(t.innerType()):t instanceof at?[t.value]:t instanceof xe?t.options:t instanceof ot?Object.keys(t.enum):t instanceof ct?pt(t._def.innerType):t instanceof et?[void 0]:t instanceof tt?[null]:null;class Mt extends C{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==p.object)return m(r,{code:f.invalid_type,expected:p.object,received:r.parsedType}),E;const s=this.discriminator,n=r.data[s],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(m(r,{code:f.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),E)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,s){const n=new Map;for(const i of r){const a=pt(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new Mt({typeName:b.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,...I(s)})}}function Qt(t,e){const r=ye(t),s=ye(e);if(t===e)return{valid:!0,data:t};if(r===p.object&&s===p.object){const n=N.objectKeys(e),i=N.objectKeys(t).filter(o=>n.indexOf(o)!==-1),a={...t,...e};for(const o of i){const d=Qt(t[o],e[o]);if(!d.valid)return{valid:!1};a[o]=d.data}return{valid:!0,data:a}}else if(r===p.array&&s===p.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<t.length;i++){const a=t[i],o=e[i],d=Qt(a,o);if(!d.valid)return{valid:!1};n.push(d.data)}return{valid:!0,data:n}}else return r===p.date&&s===p.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class st extends C{_parse(e){const{status:r,ctx:s}=this._processInputParams(e),n=(i,a)=>{if(Jt(i)||Jt(a))return E;const o=Qt(i.value,a.value);return o.valid?((Kt(i)||Kt(a))&&r.dirty(),{status:r.value,value:o.data}):(m(s,{code:f.invalid_intersection_types}),E)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,a])=>n(i,a)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}st.create=(t,e,r)=>new st({left:t,right:e,typeName:b.ZodIntersection,...I(r)});class he extends C{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.array)return m(s,{code:f.invalid_type,expected:p.array,received:s.parsedType}),E;if(s.data.length<this._def.items.length)return m(s,{code:f.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),E;!this._def.rest&&s.data.length>this._def.items.length&&(m(s,{code:f.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...s.data].map((a,o)=>{const d=this._def.items[o]||this._def.rest;return d?d._parse(new ue(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(i).then(a=>V.mergeArray(r,a)):V.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new he({...this._def,rest:e})}}he.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new he({items:t,typeName:b.ZodTuple,rest:null,...I(e)})};class nt extends C{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.object)return m(s,{code:f.invalid_type,expected:p.object,received:s.parsedType}),E;const n=[],i=this._def.keyType,a=this._def.valueType;for(const o in s.data)n.push({key:i._parse(new ue(s,o,s.path,o)),value:a._parse(new ue(s,s.data[o],s.path,o))});return s.common.async?V.mergeObjectAsync(r,n):V.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,s){return r instanceof C?new nt({keyType:e,valueType:r,typeName:b.ZodRecord,...I(s)}):new nt({keyType:te.create(),valueType:e,typeName:b.ZodRecord,...I(r)})}}class bt extends C{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.map)return m(s,{code:f.invalid_type,expected:p.map,received:s.parsedType}),E;const n=this._def.keyType,i=this._def.valueType,a=[...s.data.entries()].map(([o,d],c)=>({key:n._parse(new ue(s,o,s.path,[c,"key"])),value:i._parse(new ue(s,d,s.path,[c,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const d of a){const c=await d.key,l=await d.value;if(c.status==="aborted"||l.status==="aborted")return E;(c.status==="dirty"||l.status==="dirty")&&r.dirty(),o.set(c.value,l.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const d of a){const c=d.key,l=d.value;if(c.status==="aborted"||l.status==="aborted")return E;(c.status==="dirty"||l.status==="dirty")&&r.dirty(),o.set(c.value,l.value)}return{status:r.value,value:o}}}}bt.create=(t,e,r)=>new bt({valueType:e,keyType:t,typeName:b.ZodMap,...I(r)});class Oe extends C{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==p.set)return m(s,{code:f.invalid_type,expected:p.set,received:s.parsedType}),E;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(m(s,{code:f.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(m(s,{code:f.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());const i=this._def.valueType;function a(d){const c=new Set;for(const l of d){if(l.status==="aborted")return E;l.status==="dirty"&&r.dirty(),c.add(l.value)}return{status:r.value,value:c}}const o=[...s.data.values()].map((d,c)=>i._parse(new ue(s,d,s.path,c)));return s.common.async?Promise.all(o).then(d=>a(d)):a(o)}min(e,r){return new Oe({...this._def,minSize:{value:e,message:k.toString(r)}})}max(e,r){return new Oe({...this._def,maxSize:{value:e,message:k.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}Oe.create=(t,e)=>new Oe({valueType:t,minSize:null,maxSize:null,typeName:b.ZodSet,...I(e)});class Ze extends C{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==p.function)return m(r,{code:f.invalid_type,expected:p.function,received:r.parsedType}),E;function s(o,d){return vt({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,mt(),Ge].filter(c=>!!c),issueData:{code:f.invalid_arguments,argumentsError:d}})}function n(o,d){return vt({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,mt(),Ge].filter(c=>!!c),issueData:{code:f.invalid_return_type,returnTypeError:d}})}const i={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof qe){const o=this;return F(async function(...d){const c=new re([]),l=await o._def.args.parseAsync(d,i).catch(v=>{throw c.addIssue(s(d,v)),c}),h=await Reflect.apply(a,this,l);return await o._def.returns._def.type.parseAsync(h,i).catch(v=>{throw c.addIssue(n(h,v)),c})})}else{const o=this;return F(function(...d){const c=o._def.args.safeParse(d,i);if(!c.success)throw new re([s(d,c.error)]);const l=Reflect.apply(a,this,c.data),h=o._def.returns.safeParse(l,i);if(!h.success)throw new re([n(l,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ze({...this._def,args:he.create(e).rest(Ie.create())})}returns(e){return new Ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,s){return new Ze({args:e||he.create([]).rest(Ie.create()),returns:r||Ie.create(),typeName:b.ZodFunction,...I(s)})}}class it extends C{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}it.create=(t,e)=>new it({getter:t,typeName:b.ZodLazy,...I(e)});class at extends C{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return m(r,{received:r.data,code:f.invalid_literal,expected:this._def.value}),E}return{status:"valid",value:e.data}}get value(){return this._def.value}}at.create=(t,e)=>new at({value:t,typeName:b.ZodLiteral,...I(e)});function Kr(t,e){return new xe({values:t,typeName:b.ZodEnum,...I(e)})}class xe extends C{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),s=this._def.values;return m(r,{expected:N.joinValues(s),received:r.parsedType,code:f.invalid_type}),E}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),s=this._def.values;return m(r,{received:r.data,code:f.invalid_enum_value,options:s}),E}return F(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return xe.create(e)}exclude(e){return xe.create(this.options.filter(r=>!e.includes(r)))}}xe.create=Kr;class ot extends C{_parse(e){const r=N.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==p.string&&s.parsedType!==p.number){const n=N.objectValues(r);return m(s,{expected:N.joinValues(n),received:s.parsedType,code:f.invalid_type}),E}if(r.indexOf(e.data)===-1){const n=N.objectValues(r);return m(s,{received:s.data,code:f.invalid_enum_value,options:n}),E}return F(e.data)}get enum(){return this._def.values}}ot.create=(t,e)=>new ot({values:t,typeName:b.ZodNativeEnum,...I(e)});class qe extends C{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==p.promise&&r.common.async===!1)return m(r,{code:f.invalid_type,expected:p.promise,received:r.parsedType}),E;const s=r.parsedType===p.promise?r.data:Promise.resolve(r.data);return F(s.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}}qe.create=(t,e)=>new qe({type:t,typeName:b.ZodPromise,...I(e)});class ne extends C{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===b.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:a=>{m(s,a),a.fatal?r.abort():r.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const a=n.transform(s.data,i);return s.common.issues.length?{status:"dirty",value:s.data}:s.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:s.path,parent:s})):this._def.schema._parseSync({data:a,path:s.path,parent:s})}if(n.type==="refinement"){const a=o=>{const d=n.refinement(o,i);if(s.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?E:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?E:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Ye(a))return a;const o=n.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>Ye(a)?Promise.resolve(n.transform(a.value,i)).then(o=>({status:r.value,value:o})):a);N.assertNever(n)}}ne.create=(t,e,r)=>new ne({schema:t,typeName:b.ZodEffects,effect:e,...I(r)});ne.createWithPreprocess=(t,e,r)=>new ne({schema:e,effect:{type:"preprocess",transform:t},typeName:b.ZodEffects,...I(r)});class pe extends C{_parse(e){return this._getType(e)===p.undefined?F(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pe.create=(t,e)=>new pe({innerType:t,typeName:b.ZodOptional,...I(e)});class Pe extends C{_parse(e){return this._getType(e)===p.null?F(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pe.create=(t,e)=>new Pe({innerType:t,typeName:b.ZodNullable,...I(e)});class ct extends C{_parse(e){const{ctx:r}=this._processInputParams(e);let s=r.data;return r.parsedType===p.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}ct.create=(t,e)=>new ct({innerType:t,typeName:b.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...I(e)});class St extends C{_parse(e){const{ctx:r}=this._processInputParams(e),s={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return yt(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new re(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new re(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}St.create=(t,e)=>new St({innerType:t,typeName:b.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...I(e)});class xt extends C{_parse(e){if(this._getType(e)!==p.nan){const s=this._getOrReturnCtx(e);return m(s,{code:f.invalid_type,expected:p.nan,received:s.parsedType}),E}return{status:"valid",value:e.data}}}xt.create=t=>new xt({typeName:b.ZodNaN,...I(t)});const Vn=Symbol("zod_brand");class Qr extends C{_parse(e){const{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}}class lt extends C{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?E:i.status==="dirty"?(r.dirty(),Jr(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?E:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,r){return new lt({in:e,out:r,typeName:b.ZodPipeline})}}class Tt extends C{_parse(e){const r=this._def.innerType._parse(e);return Ye(r)&&(r.value=Object.freeze(r.value)),r}}Tt.create=(t,e)=>new Tt({innerType:t,typeName:b.ZodReadonly,...I(e)});const Gr=(t,e={},r)=>t?De.create().superRefine((s,n)=>{var i,a;if(!t(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,d=(a=(i=o.fatal)!==null&&i!==void 0?i:r)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:d})}}):De.create(),Fn={object:D.lazycreate};var b;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(b||(b={}));const Jn=(t,e={message:`Input not instance of ${t.name}`})=>Gr(r=>r instanceof t,e),Yr=te.create,Xr=be.create,Kn=xt.create,Qn=Se.create,es=Xe.create,Gn=Re.create,Yn=wt.create,Xn=et.create,ei=tt.create,ti=De.create,ri=Ie.create,si=_e.create,ni=kt.create,ii=se.create,ai=D.create,oi=D.strictCreate,ci=rt.create,di=Mt.create,li=st.create,ui=he.create,hi=nt.create,fi=bt.create,gi=Oe.create,pi=Ze.create,_i=it.create,mi=at.create,vi=xe.create,yi=ot.create,wi=qe.create,kr=ne.create,ki=pe.create,bi=Pe.create,Si=ne.createWithPreprocess,xi=lt.create,Ti=()=>Yr().optional(),Ei=()=>Xr().optional(),Ii=()=>es().optional(),Ci={string:t=>te.create({...t,coerce:!0}),number:t=>be.create({...t,coerce:!0}),boolean:t=>Xe.create({...t,coerce:!0}),bigint:t=>Se.create({...t,coerce:!0}),date:t=>Re.create({...t,coerce:!0})},Ri=E;var me=Object.freeze({__proto__:null,defaultErrorMap:Ge,setErrorMap:An,getErrorMap:mt,makeIssue:vt,EMPTY_PATH:jn,addIssueToContext:m,ParseStatus:V,INVALID:E,DIRTY:Jr,OK:F,isAborted:Jt,isDirty:Kt,isValid:Ye,isAsync:yt,get util(){return N},get objectUtil(){return Ft},ZodParsedType:p,getParsedType:ye,ZodType:C,ZodString:te,ZodNumber:be,ZodBigInt:Se,ZodBoolean:Xe,ZodDate:Re,ZodSymbol:wt,ZodUndefined:et,ZodNull:tt,ZodAny:De,ZodUnknown:Ie,ZodNever:_e,ZodVoid:kt,ZodArray:se,ZodObject:D,ZodUnion:rt,ZodDiscriminatedUnion:Mt,ZodIntersection:st,ZodTuple:he,ZodRecord:nt,ZodMap:bt,ZodSet:Oe,ZodFunction:Ze,ZodLazy:it,ZodLiteral:at,ZodEnum:xe,ZodNativeEnum:ot,ZodPromise:qe,ZodEffects:ne,ZodTransformer:ne,ZodOptional:pe,ZodNullable:Pe,ZodDefault:ct,ZodCatch:St,ZodNaN:xt,BRAND:Vn,ZodBranded:Qr,ZodPipeline:lt,ZodReadonly:Tt,custom:Gr,Schema:C,ZodSchema:C,late:Fn,get ZodFirstPartyTypeKind(){return b},coerce:Ci,any:ti,array:ii,bigint:Qn,boolean:es,date:Gn,discriminatedUnion:di,effect:kr,enum:vi,function:pi,instanceof:Jn,intersection:li,lazy:_i,literal:mi,map:fi,nan:Kn,nativeEnum:yi,never:si,null:ei,nullable:bi,number:Xr,object:ai,oboolean:Ii,onumber:Ei,optional:ki,ostring:Ti,pipeline:xi,preprocess:Si,promise:wi,record:hi,set:gi,strictObject:oi,string:Yr,symbol:Yn,transformer:kr,tuple:ui,undefined:Xn,union:ci,unknown:ri,void:ni,NEVER:Ri,ZodIssueCode:f,quotelessJson:Un,ZodError:re});const ts="https://auth.code.gouv.fr/auth",rs="keycloakify",ss="starter",{OidcProvider:Oi,useOidc:ns}=Vr({issuerUri:`${ts}/realms/${rs}`,clientId:ss,extraQueryParams:()=>({ui_locales:"en",my_custom_param:"value of foo transferred to login page"}),publicUrl:window.kcContext===void 0?"/":window.kcContext.url.resourcesPath+"/build/",decodedIdTokenSchema:me.object({sub:me.string(),name:me.string(),preferred_username:me.string(),favorite_pet:me.union([me.literal("cat"),me.literal("dog"),me.literal("bird")])})});function Pi(t){const{locale:e}=t,r=new URL(`${ts}/realms/${rs}/account`),s=new URLSearchParams;return s.append("kc_locale",e),s.append("referrer",ss),s.append("referrer_uri",window.location.href),r.search=s.toString(),r.toString()}function Ni(){return B.jsx(Oi,{children:B.jsx(Ui,{})})}function Ui(){const{isUserLoggedIn:t,login:e,logout:r,oidcTokens:s}=ns();return B.jsx("div",{className:"App",children:B.jsxs("div",{children:[B.jsx("div",{className:"App-payload",children:t?B.jsxs(B.Fragment,{children:[B.jsxs("h1",{children:["Hello ",s.decodedIdToken.name," !"]}),B.jsx("a",{href:Pi({locale:"en"}),children:"Link to your Keycloak account"}),"",B.jsx("button",{onClick:()=>r({redirectTo:"home"}),children:"Logout"}),B.jsx(Ai,{})]}):B.jsx("button",{onClick:()=>e({doesCurrentHrefRequiresAuth:!1}),children:"Login"})}),B.jsxs("div",{className:"App-logo-wrapper",children:[B.jsx("img",{src:as,className:"App-logo rotate",alt:"logo"}),"",B.jsx("img",{src:os,className:"App-logo",alt:"logo"})]})]})})}function Ai(){const{oidcTokens:t}=ns({assertUserLoggedIn:!0});return B.jsx("pre",{style:{textAlign:"left"},children:JSON.stringify(t.decodedIdToken,null,2)})}export{Ni as default};
