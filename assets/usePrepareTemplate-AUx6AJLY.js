import{D as v,r as c,a as g}from"./index-Cs09ugHT.js";import{c as L}from"./useGetClassName-i9-qN2nK.js";HTMLElement.prototype.prepend||(HTMLElement.prototype.prepend=function(e){if(typeof e=="string")throw new Error("Error with HTMLElement.prototype.appendFirst polyfill");this.insertBefore(e,this.firstChild)});function d(e){const t=document.createElement((()=>{switch(e.type){case"css":return"link";case"javascript":return"script"}})()),r=new v;return t.addEventListener("load",()=>r.resolve()),Object.assign(t,(()=>{switch(e.type){case"css":return{href:e.href,type:"text/css",rel:"stylesheet",media:"screen,print"};case"javascript":return{src:e.src,type:"text/javascript"}}})()),document.getElementsByTagName("head")[0][(()=>{switch(e.type){case"javascript":return"appendChild";case"css":return(()=>{switch(e.position){case"append":return"appendChild";case"prepend":return"prepend"}})()}})()](t),{prLoaded:r.pr,remove:()=>t.remove()}}function C(e){const{doFetchDefaultThemeResources:t,styles:r=[],scripts:a=[],htmlClassName:o,bodyClassName:m,htmlLangProperty:i,documentTitle:p}=e,[h,y]=c.useReducer(()=>!0,!t);return c.useEffect(()=>{if(i===void 0)return;const s=document.querySelector("html");g.assert(s!==null),s.lang=i},[i]),c.useEffect(()=>{p!==void 0&&(document.title=p)},[p]),c.useEffect(()=>{if(!t)return;let s=!1;const u=[];return(async()=>{for(const n of[...r].reverse()){const{prLoaded:l,remove:E}=d({type:"css",position:"prepend",href:n});if(u.push(E),await l,s)return}y()})(),a.forEach(n=>{const{remove:l}=d({type:"javascript",src:n});u.push(l)}),()=>{s=!0,u.forEach(n=>n())}},[]),f({target:"html",className:o}),f({target:"body",className:m}),{isReady:h}}function f(e){const{target:t,className:r}=e;c.useEffect(()=>{if(r===void 0)return;const a=document.getElementsByTagName(t)[0].classList,o=L(r).split(" ");return a.add(...o),()=>{a.remove(...o)}},[r])}export{C as u};
//# sourceMappingURL=usePrepareTemplate-AUx6AJLY.js.map
