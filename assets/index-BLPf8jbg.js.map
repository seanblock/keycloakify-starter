{"version":3,"file":"index-BLPf8jbg.js","sources":["../../src/App/assets/react.svg","../../src/App/assets/vite.svg","../../__vite-browser-external","../../node_modules/crypto-js/core.js","../../node_modules/crypto-js/sha256.js","../../node_modules/crypto-js/enc-base64.js","../../node_modules/crypto-js/enc-utf8.js","../../node_modules/jwt-decode/build/jwt-decode.esm.js","../../node_modules/oidc-client-ts/dist/umd/oidc-client-ts.js","../../node_modules/oidc-spa/tools/readExpirationTimeInJwt.js","../../node_modules/oidc-spa/tools/urlQueryParams.js","../../node_modules/oidc-spa/tools/fnv1aHashToHex.js","../../node_modules/oidc-spa/tools/Deferred.js","../../node_modules/oidc-spa/tools/decodeJwt.js","../../node_modules/oidc-spa/tools/getDownlinkAndRtt.js","../../node_modules/oidc-spa/oidc.js","../../node_modules/oidc-spa/tools/powerhooks/useGuaranteedMemo.js","../../node_modules/oidc-spa/react.js","../../node_modules/zod/lib/index.mjs","../../src/App/oidc.ts","../../src/App/App.tsx"],"sourcesContent":["export default \"__VITE_ASSET__BvmkqU_J__\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='31.88'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20257'%3e%3cdefs%3e%3clinearGradient%20id='IconifyId1813088fe1fbc01fb466'%20x1='-.828%25'%20x2='57.636%25'%20y1='7.652%25'%20y2='78.411%25'%3e%3cstop%20offset='0%25'%20stop-color='%2341D1FF'%3e%3c/stop%3e%3cstop%20offset='100%25'%20stop-color='%23BD34FE'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient%20id='IconifyId1813088fe1fbc01fb467'%20x1='43.376%25'%20x2='50.316%25'%20y1='2.242%25'%20y2='89.03%25'%3e%3cstop%20offset='0%25'%20stop-color='%23FFEA83'%3e%3c/stop%3e%3cstop%20offset='8.333%25'%20stop-color='%23FFDD35'%3e%3c/stop%3e%3cstop%20offset='100%25'%20stop-color='%23FFA800'%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3cpath%20fill='url(%23IconifyId1813088fe1fbc01fb466)'%20d='M255.153%2037.938L134.897%20252.976c-2.483%204.44-8.862%204.466-11.382.048L.875%2037.958c-2.746-4.814%201.371-10.646%206.827-9.67l120.385%2021.517a6.537%206.537%200%200%200%202.322-.004l117.867-21.483c5.438-.991%209.574%204.796%206.877%209.62Z'%3e%3c/path%3e%3cpath%20fill='url(%23IconifyId1813088fe1fbc01fb467)'%20d='M185.432.063L96.44%2017.501a3.268%203.268%200%200%200-2.634%203.014l-5.474%2092.456a3.268%203.268%200%200%200%203.997%203.378l24.777-5.718c2.318-.535%204.413%201.507%203.936%203.838l-7.361%2036.047c-.495%202.426%201.782%204.5%204.151%203.78l15.304-4.649c2.372-.72%204.652%201.36%204.15%203.788l-11.698%2056.621c-.732%203.542%203.979%205.473%205.943%202.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505%204.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z'%3e%3c/path%3e%3c/svg%3e\"","export default {}",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              var bitsCombined = bits1 | bits2;\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\treturn CryptoJS.enc.Utf8;\n\n}));","function e(e){this.message=e}e.prototype=new Error,e.prototype.name=\"InvalidCharacterError\";var r=\"undefined\"!=typeof window&&window.atob&&window.atob.bind(window)||function(r){var t=String(r).replace(/=+$/,\"\");if(t.length%4==1)throw new e(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var n,o,a=0,i=0,c=\"\";o=t.charAt(i++);~o&&(n=a%4?64*n+o:o,a++%4)?c+=String.fromCharCode(255&n>>(-2*a&6)):0)o=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(o);return c};function t(e){var t=e.replace(/-/g,\"+\").replace(/_/g,\"/\");switch(t.length%4){case 0:break;case 2:t+=\"==\";break;case 3:t+=\"=\";break;default:throw\"Illegal base64url string!\"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,r){var t=r.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t=\"0\"+t),\"%\"+t})))}(t)}catch(e){return r(t)}}function n(e){this.message=e}function o(e,r){if(\"string\"!=typeof e)throw new n(\"Invalid token specified\");var o=!0===(r=r||{}).header?0:1;try{return JSON.parse(t(e.split(\".\")[o]))}catch(e){throw new n(\"Invalid token specified: \"+e.message)}}n.prototype=new Error,n.prototype.name=\"InvalidTokenError\";export default o;export{n as InvalidTokenError};\n//# sourceMappingURL=jwt-decode.esm.js.map\n","\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  AccessTokenEvents: () => AccessTokenEvents,\n  CheckSessionIFrame: () => CheckSessionIFrame,\n  ErrorResponse: () => ErrorResponse,\n  ErrorTimeout: () => ErrorTimeout,\n  InMemoryWebStorage: () => InMemoryWebStorage,\n  Log: () => Log,\n  Logger: () => Logger,\n  MetadataService: () => MetadataService,\n  OidcClient: () => OidcClient,\n  OidcClientSettingsStore: () => OidcClientSettingsStore,\n  SessionMonitor: () => SessionMonitor,\n  SigninResponse: () => SigninResponse,\n  SigninState: () => SigninState,\n  SignoutResponse: () => SignoutResponse,\n  State: () => State,\n  User: () => User,\n  UserManager: () => UserManager,\n  UserManagerSettingsStore: () => UserManagerSettingsStore,\n  Version: () => Version,\n  WebStorageStateStore: () => WebStorageStateStore\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/utils/CryptoUtils.ts\nvar import_core = __toESM(require(\"crypto-js/core.js\"));\nvar import_sha256 = __toESM(require(\"crypto-js/sha256.js\"));\nvar import_enc_base64 = __toESM(require(\"crypto-js/enc-base64.js\"));\nvar import_enc_utf8 = __toESM(require(\"crypto-js/enc-utf8.js\"));\n\n// src/utils/Logger.ts\nvar nopLogger = {\n  debug: () => void 0,\n  info: () => void 0,\n  warn: () => void 0,\n  error: () => void 0\n};\nvar level;\nvar logger;\nvar Log = /* @__PURE__ */ ((Log2) => {\n  Log2[Log2[\"NONE\"] = 0] = \"NONE\";\n  Log2[Log2[\"ERROR\"] = 1] = \"ERROR\";\n  Log2[Log2[\"WARN\"] = 2] = \"WARN\";\n  Log2[Log2[\"INFO\"] = 3] = \"INFO\";\n  Log2[Log2[\"DEBUG\"] = 4] = \"DEBUG\";\n  return Log2;\n})(Log || {});\n((Log2) => {\n  function reset() {\n    level = 3 /* INFO */;\n    logger = nopLogger;\n  }\n  Log2.reset = reset;\n  function setLevel(value) {\n    if (!(0 /* NONE */ <= value && value <= 4 /* DEBUG */)) {\n      throw new Error(\"Invalid log level\");\n    }\n    level = value;\n  }\n  Log2.setLevel = setLevel;\n  function setLogger(value) {\n    logger = value;\n  }\n  Log2.setLogger = setLogger;\n})(Log || (Log = {}));\nvar Logger = class {\n  constructor(_name) {\n    this._name = _name;\n  }\n  /* eslint-disable @typescript-eslint/no-unsafe-enum-comparison */\n  debug(...args) {\n    if (level >= 4 /* DEBUG */) {\n      logger.debug(Logger._format(this._name, this._method), ...args);\n    }\n  }\n  info(...args) {\n    if (level >= 3 /* INFO */) {\n      logger.info(Logger._format(this._name, this._method), ...args);\n    }\n  }\n  warn(...args) {\n    if (level >= 2 /* WARN */) {\n      logger.warn(Logger._format(this._name, this._method), ...args);\n    }\n  }\n  error(...args) {\n    if (level >= 1 /* ERROR */) {\n      logger.error(Logger._format(this._name, this._method), ...args);\n    }\n  }\n  /* eslint-enable @typescript-eslint/no-unsafe-enum-comparison */\n  throw(err) {\n    this.error(err);\n    throw err;\n  }\n  create(method) {\n    const methodLogger = Object.create(this);\n    methodLogger._method = method;\n    methodLogger.debug(\"begin\");\n    return methodLogger;\n  }\n  static createStatic(name, staticMethod) {\n    const staticLogger = new Logger(`${name}.${staticMethod}`);\n    staticLogger.debug(\"begin\");\n    return staticLogger;\n  }\n  static _format(name, method) {\n    const prefix = `[${name}]`;\n    return method ? `${prefix} ${method}:` : prefix;\n  }\n  /* eslint-disable @typescript-eslint/no-unsafe-enum-comparison */\n  // helpers for static class methods\n  static debug(name, ...args) {\n    if (level >= 4 /* DEBUG */) {\n      logger.debug(Logger._format(name), ...args);\n    }\n  }\n  static info(name, ...args) {\n    if (level >= 3 /* INFO */) {\n      logger.info(Logger._format(name), ...args);\n    }\n  }\n  static warn(name, ...args) {\n    if (level >= 2 /* WARN */) {\n      logger.warn(Logger._format(name), ...args);\n    }\n  }\n  static error(name, ...args) {\n    if (level >= 1 /* ERROR */) {\n      logger.error(Logger._format(name), ...args);\n    }\n  }\n  /* eslint-enable @typescript-eslint/no-unsafe-enum-comparison */\n};\nLog.reset();\n\n// src/utils/CryptoUtils.ts\nvar UUID_V4_TEMPLATE = \"10000000-1000-4000-8000-100000000000\";\nvar CryptoUtils = class {\n  static _randomWord() {\n    return import_core.default.lib.WordArray.random(1).words[0];\n  }\n  /**\n   * Generates RFC4122 version 4 guid\n   */\n  static generateUUIDv4() {\n    const uuid = UUID_V4_TEMPLATE.replace(\n      /[018]/g,\n      (c) => (+c ^ CryptoUtils._randomWord() & 15 >> +c / 4).toString(16)\n    );\n    return uuid.replace(/-/g, \"\");\n  }\n  /**\n   * PKCE: Generate a code verifier\n   */\n  static generateCodeVerifier() {\n    return CryptoUtils.generateUUIDv4() + CryptoUtils.generateUUIDv4() + CryptoUtils.generateUUIDv4();\n  }\n  /**\n   * PKCE: Generate a code challenge\n   */\n  static generateCodeChallenge(code_verifier) {\n    try {\n      const hashed = (0, import_sha256.default)(code_verifier);\n      return import_enc_base64.default.stringify(hashed).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/, \"\");\n    } catch (err) {\n      Logger.error(\"CryptoUtils.generateCodeChallenge\", err);\n      throw err;\n    }\n  }\n  /**\n   * Generates a base64-encoded string for a basic auth header\n   */\n  static generateBasicAuth(client_id, client_secret) {\n    const basicAuth = import_enc_utf8.default.parse([client_id, client_secret].join(\":\"));\n    return import_enc_base64.default.stringify(basicAuth);\n  }\n};\n\n// src/utils/Event.ts\nvar Event = class {\n  constructor(_name) {\n    this._name = _name;\n    this._logger = new Logger(`Event('${this._name}')`);\n    this._callbacks = [];\n  }\n  addHandler(cb) {\n    this._callbacks.push(cb);\n    return () => this.removeHandler(cb);\n  }\n  removeHandler(cb) {\n    const idx = this._callbacks.lastIndexOf(cb);\n    if (idx >= 0) {\n      this._callbacks.splice(idx, 1);\n    }\n  }\n  raise(...ev) {\n    this._logger.debug(\"raise:\", ...ev);\n    for (const cb of this._callbacks) {\n      void cb(...ev);\n    }\n  }\n};\n\n// src/utils/JwtUtils.ts\nvar import_jwt_decode = __toESM(require(\"jwt-decode\"));\nvar JwtUtils = class {\n  // IMPORTANT: doesn't validate the token\n  static decode(token) {\n    try {\n      return (0, import_jwt_decode.default)(token);\n    } catch (err) {\n      Logger.error(\"JwtUtils.decode\", err);\n      throw err;\n    }\n  }\n};\n\n// src/utils/PopupUtils.ts\nvar PopupUtils = class {\n  /**\n   * Populates a map of window features with a placement centered in front of\n   * the current window. If no explicit width is given, a default value is\n   * binned into [800, 720, 600, 480, 360] based on the current window's width.\n   */\n  static center({ ...features }) {\n    var _a, _b, _c;\n    if (features.width == null)\n      features.width = (_a = [800, 720, 600, 480].find((width) => width <= window.outerWidth / 1.618)) != null ? _a : 360;\n    (_b = features.left) != null ? _b : features.left = Math.max(0, Math.round(window.screenX + (window.outerWidth - features.width) / 2));\n    if (features.height != null)\n      (_c = features.top) != null ? _c : features.top = Math.max(0, Math.round(window.screenY + (window.outerHeight - features.height) / 2));\n    return features;\n  }\n  static serialize(features) {\n    return Object.entries(features).filter(([, value]) => value != null).map(([key, value]) => `${key}=${typeof value !== \"boolean\" ? value : value ? \"yes\" : \"no\"}`).join(\",\");\n  }\n};\n\n// src/utils/Timer.ts\nvar Timer = class extends Event {\n  constructor() {\n    super(...arguments);\n    this._logger = new Logger(`Timer('${this._name}')`);\n    this._timerHandle = null;\n    this._expiration = 0;\n    this._callback = () => {\n      const diff = this._expiration - Timer.getEpochTime();\n      this._logger.debug(\"timer completes in\", diff);\n      if (this._expiration <= Timer.getEpochTime()) {\n        this.cancel();\n        super.raise();\n      }\n    };\n  }\n  // get the time\n  static getEpochTime() {\n    return Math.floor(Date.now() / 1e3);\n  }\n  init(durationInSeconds) {\n    const logger2 = this._logger.create(\"init\");\n    durationInSeconds = Math.max(Math.floor(durationInSeconds), 1);\n    const expiration = Timer.getEpochTime() + durationInSeconds;\n    if (this.expiration === expiration && this._timerHandle) {\n      logger2.debug(\"skipping since already initialized for expiration at\", this.expiration);\n      return;\n    }\n    this.cancel();\n    logger2.debug(\"using duration\", durationInSeconds);\n    this._expiration = expiration;\n    const timerDurationInSeconds = Math.min(durationInSeconds, 5);\n    this._timerHandle = setInterval(this._callback, timerDurationInSeconds * 1e3);\n  }\n  get expiration() {\n    return this._expiration;\n  }\n  cancel() {\n    this._logger.create(\"cancel\");\n    if (this._timerHandle) {\n      clearInterval(this._timerHandle);\n      this._timerHandle = null;\n    }\n  }\n};\n\n// src/utils/UrlUtils.ts\nvar UrlUtils = class {\n  static readParams(url, responseMode = \"query\") {\n    if (!url)\n      throw new TypeError(\"Invalid URL\");\n    const parsedUrl = new URL(url, \"http://127.0.0.1\");\n    const params = parsedUrl[responseMode === \"fragment\" ? \"hash\" : \"search\"];\n    return new URLSearchParams(params.slice(1));\n  }\n};\nvar URL_STATE_DELIMITER = \";\";\n\n// src/errors/ErrorResponse.ts\nvar ErrorResponse = class extends Error {\n  constructor(args, form) {\n    var _a, _b, _c;\n    super(args.error_description || args.error || \"\");\n    this.form = form;\n    /** Marker to detect class: \"ErrorResponse\" */\n    this.name = \"ErrorResponse\";\n    if (!args.error) {\n      Logger.error(\"ErrorResponse\", \"No error passed\");\n      throw new Error(\"No error passed\");\n    }\n    this.error = args.error;\n    this.error_description = (_a = args.error_description) != null ? _a : null;\n    this.error_uri = (_b = args.error_uri) != null ? _b : null;\n    this.state = args.userState;\n    this.session_state = (_c = args.session_state) != null ? _c : null;\n    this.url_state = args.url_state;\n  }\n};\n\n// src/errors/ErrorTimeout.ts\nvar ErrorTimeout = class extends Error {\n  constructor(message) {\n    super(message);\n    /** Marker to detect class: \"ErrorTimeout\" */\n    this.name = \"ErrorTimeout\";\n  }\n};\n\n// src/AccessTokenEvents.ts\nvar AccessTokenEvents = class {\n  constructor(args) {\n    this._logger = new Logger(\"AccessTokenEvents\");\n    this._expiringTimer = new Timer(\"Access token expiring\");\n    this._expiredTimer = new Timer(\"Access token expired\");\n    this._expiringNotificationTimeInSeconds = args.expiringNotificationTimeInSeconds;\n  }\n  load(container) {\n    const logger2 = this._logger.create(\"load\");\n    if (container.access_token && container.expires_in !== void 0) {\n      const duration = container.expires_in;\n      logger2.debug(\"access token present, remaining duration:\", duration);\n      if (duration > 0) {\n        let expiring = duration - this._expiringNotificationTimeInSeconds;\n        if (expiring <= 0) {\n          expiring = 1;\n        }\n        logger2.debug(\"registering expiring timer, raising in\", expiring, \"seconds\");\n        this._expiringTimer.init(expiring);\n      } else {\n        logger2.debug(\"canceling existing expiring timer because we're past expiration.\");\n        this._expiringTimer.cancel();\n      }\n      const expired = duration + 1;\n      logger2.debug(\"registering expired timer, raising in\", expired, \"seconds\");\n      this._expiredTimer.init(expired);\n    } else {\n      this._expiringTimer.cancel();\n      this._expiredTimer.cancel();\n    }\n  }\n  unload() {\n    this._logger.debug(\"unload: canceling existing access token timers\");\n    this._expiringTimer.cancel();\n    this._expiredTimer.cancel();\n  }\n  /**\n   * Add callback: Raised prior to the access token expiring.\n   */\n  addAccessTokenExpiring(cb) {\n    return this._expiringTimer.addHandler(cb);\n  }\n  /**\n   * Remove callback: Raised prior to the access token expiring.\n   */\n  removeAccessTokenExpiring(cb) {\n    this._expiringTimer.removeHandler(cb);\n  }\n  /**\n   * Add callback: Raised after the access token has expired.\n   */\n  addAccessTokenExpired(cb) {\n    return this._expiredTimer.addHandler(cb);\n  }\n  /**\n   * Remove callback: Raised after the access token has expired.\n   */\n  removeAccessTokenExpired(cb) {\n    this._expiredTimer.removeHandler(cb);\n  }\n};\n\n// src/CheckSessionIFrame.ts\nvar CheckSessionIFrame = class {\n  constructor(_callback, _client_id, url, _intervalInSeconds, _stopOnError) {\n    this._callback = _callback;\n    this._client_id = _client_id;\n    this._intervalInSeconds = _intervalInSeconds;\n    this._stopOnError = _stopOnError;\n    this._logger = new Logger(\"CheckSessionIFrame\");\n    this._timer = null;\n    this._session_state = null;\n    this._message = (e) => {\n      if (e.origin === this._frame_origin && e.source === this._frame.contentWindow) {\n        if (e.data === \"error\") {\n          this._logger.error(\"error message from check session op iframe\");\n          if (this._stopOnError) {\n            this.stop();\n          }\n        } else if (e.data === \"changed\") {\n          this._logger.debug(\"changed message from check session op iframe\");\n          this.stop();\n          void this._callback();\n        } else {\n          this._logger.debug(e.data + \" message from check session op iframe\");\n        }\n      }\n    };\n    const parsedUrl = new URL(url);\n    this._frame_origin = parsedUrl.origin;\n    this._frame = window.document.createElement(\"iframe\");\n    this._frame.style.visibility = \"hidden\";\n    this._frame.style.position = \"fixed\";\n    this._frame.style.left = \"-1000px\";\n    this._frame.style.top = \"0\";\n    this._frame.width = \"0\";\n    this._frame.height = \"0\";\n    this._frame.src = parsedUrl.href;\n  }\n  load() {\n    return new Promise((resolve) => {\n      this._frame.onload = () => {\n        resolve();\n      };\n      window.document.body.appendChild(this._frame);\n      window.addEventListener(\"message\", this._message, false);\n    });\n  }\n  start(session_state) {\n    if (this._session_state === session_state) {\n      return;\n    }\n    this._logger.create(\"start\");\n    this.stop();\n    this._session_state = session_state;\n    const send = () => {\n      if (!this._frame.contentWindow || !this._session_state) {\n        return;\n      }\n      this._frame.contentWindow.postMessage(this._client_id + \" \" + this._session_state, this._frame_origin);\n    };\n    send();\n    this._timer = setInterval(send, this._intervalInSeconds * 1e3);\n  }\n  stop() {\n    this._logger.create(\"stop\");\n    this._session_state = null;\n    if (this._timer) {\n      clearInterval(this._timer);\n      this._timer = null;\n    }\n  }\n};\n\n// src/InMemoryWebStorage.ts\nvar InMemoryWebStorage = class {\n  constructor() {\n    this._logger = new Logger(\"InMemoryWebStorage\");\n    this._data = {};\n  }\n  clear() {\n    this._logger.create(\"clear\");\n    this._data = {};\n  }\n  getItem(key) {\n    this._logger.create(`getItem('${key}')`);\n    return this._data[key];\n  }\n  setItem(key, value) {\n    this._logger.create(`setItem('${key}')`);\n    this._data[key] = value;\n  }\n  removeItem(key) {\n    this._logger.create(`removeItem('${key}')`);\n    delete this._data[key];\n  }\n  get length() {\n    return Object.getOwnPropertyNames(this._data).length;\n  }\n  key(index) {\n    return Object.getOwnPropertyNames(this._data)[index];\n  }\n};\n\n// src/JsonService.ts\nvar JsonService = class {\n  constructor(additionalContentTypes = [], _jwtHandler = null, _extraHeaders = {}) {\n    this._jwtHandler = _jwtHandler;\n    this._extraHeaders = _extraHeaders;\n    this._logger = new Logger(\"JsonService\");\n    this._contentTypes = [];\n    this._contentTypes.push(...additionalContentTypes, \"application/json\");\n    if (_jwtHandler) {\n      this._contentTypes.push(\"application/jwt\");\n    }\n  }\n  async fetchWithTimeout(input, init = {}) {\n    const { timeoutInSeconds, ...initFetch } = init;\n    if (!timeoutInSeconds) {\n      return await fetch(input, initFetch);\n    }\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), timeoutInSeconds * 1e3);\n    try {\n      const response = await fetch(input, {\n        ...init,\n        signal: controller.signal\n      });\n      return response;\n    } catch (err) {\n      if (err instanceof DOMException && err.name === \"AbortError\") {\n        throw new ErrorTimeout(\"Network timed out\");\n      }\n      throw err;\n    } finally {\n      clearTimeout(timeoutId);\n    }\n  }\n  async getJson(url, {\n    token,\n    credentials\n  } = {}) {\n    const logger2 = this._logger.create(\"getJson\");\n    const headers = {\n      \"Accept\": this._contentTypes.join(\", \")\n    };\n    if (token) {\n      logger2.debug(\"token passed, setting Authorization header\");\n      headers[\"Authorization\"] = \"Bearer \" + token;\n    }\n    this.appendExtraHeaders(headers);\n    let response;\n    try {\n      logger2.debug(\"url:\", url);\n      response = await this.fetchWithTimeout(url, { method: \"GET\", headers, credentials });\n    } catch (err) {\n      logger2.error(\"Network Error\");\n      throw err;\n    }\n    logger2.debug(\"HTTP response received, status\", response.status);\n    const contentType = response.headers.get(\"Content-Type\");\n    if (contentType && !this._contentTypes.find((item) => contentType.startsWith(item))) {\n      logger2.throw(new Error(`Invalid response Content-Type: ${contentType != null ? contentType : \"undefined\"}, from URL: ${url}`));\n    }\n    if (response.ok && this._jwtHandler && (contentType == null ? void 0 : contentType.startsWith(\"application/jwt\"))) {\n      return await this._jwtHandler(await response.text());\n    }\n    let json;\n    try {\n      json = await response.json();\n    } catch (err) {\n      logger2.error(\"Error parsing JSON response\", err);\n      if (response.ok)\n        throw err;\n      throw new Error(`${response.statusText} (${response.status})`);\n    }\n    if (!response.ok) {\n      logger2.error(\"Error from server:\", json);\n      if (json.error) {\n        throw new ErrorResponse(json);\n      }\n      throw new Error(`${response.statusText} (${response.status}): ${JSON.stringify(json)}`);\n    }\n    return json;\n  }\n  async postForm(url, {\n    body,\n    basicAuth,\n    timeoutInSeconds,\n    initCredentials\n  }) {\n    const logger2 = this._logger.create(\"postForm\");\n    const headers = {\n      \"Accept\": this._contentTypes.join(\", \"),\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    };\n    if (basicAuth !== void 0) {\n      headers[\"Authorization\"] = \"Basic \" + basicAuth;\n    }\n    this.appendExtraHeaders(headers);\n    let response;\n    try {\n      logger2.debug(\"url:\", url);\n      response = await this.fetchWithTimeout(url, { method: \"POST\", headers, body, timeoutInSeconds, credentials: initCredentials });\n    } catch (err) {\n      logger2.error(\"Network error\");\n      throw err;\n    }\n    logger2.debug(\"HTTP response received, status\", response.status);\n    const contentType = response.headers.get(\"Content-Type\");\n    if (contentType && !this._contentTypes.find((item) => contentType.startsWith(item))) {\n      throw new Error(`Invalid response Content-Type: ${contentType != null ? contentType : \"undefined\"}, from URL: ${url}`);\n    }\n    const responseText = await response.text();\n    let json = {};\n    if (responseText) {\n      try {\n        json = JSON.parse(responseText);\n      } catch (err) {\n        logger2.error(\"Error parsing JSON response\", err);\n        if (response.ok)\n          throw err;\n        throw new Error(`${response.statusText} (${response.status})`);\n      }\n    }\n    if (!response.ok) {\n      logger2.error(\"Error from server:\", json);\n      if (json.error) {\n        throw new ErrorResponse(json, body);\n      }\n      throw new Error(`${response.statusText} (${response.status}): ${JSON.stringify(json)}`);\n    }\n    return json;\n  }\n  appendExtraHeaders(headers) {\n    const logger2 = this._logger.create(\"appendExtraHeaders\");\n    const customKeys = Object.keys(this._extraHeaders);\n    const protectedHeaders = [\n      \"authorization\",\n      \"accept\",\n      \"content-type\"\n    ];\n    if (customKeys.length === 0) {\n      return;\n    }\n    customKeys.forEach((headerName) => {\n      if (protectedHeaders.includes(headerName.toLocaleLowerCase())) {\n        logger2.warn(\"Protected header could not be overridden\", headerName, protectedHeaders);\n        return;\n      }\n      const content = typeof this._extraHeaders[headerName] === \"function\" ? this._extraHeaders[headerName]() : this._extraHeaders[headerName];\n      if (content && content !== \"\") {\n        headers[headerName] = content;\n      }\n    });\n  }\n};\n\n// src/MetadataService.ts\nvar MetadataService = class {\n  constructor(_settings) {\n    this._settings = _settings;\n    this._logger = new Logger(\"MetadataService\");\n    this._signingKeys = null;\n    this._metadata = null;\n    this._metadataUrl = this._settings.metadataUrl;\n    this._jsonService = new JsonService(\n      [\"application/jwk-set+json\"],\n      null,\n      this._settings.extraHeaders\n    );\n    if (this._settings.signingKeys) {\n      this._logger.debug(\"using signingKeys from settings\");\n      this._signingKeys = this._settings.signingKeys;\n    }\n    if (this._settings.metadata) {\n      this._logger.debug(\"using metadata from settings\");\n      this._metadata = this._settings.metadata;\n    }\n    if (this._settings.fetchRequestCredentials) {\n      this._logger.debug(\"using fetchRequestCredentials from settings\");\n      this._fetchRequestCredentials = this._settings.fetchRequestCredentials;\n    }\n  }\n  resetSigningKeys() {\n    this._signingKeys = null;\n  }\n  async getMetadata() {\n    const logger2 = this._logger.create(\"getMetadata\");\n    if (this._metadata) {\n      logger2.debug(\"using cached values\");\n      return this._metadata;\n    }\n    if (!this._metadataUrl) {\n      logger2.throw(new Error(\"No authority or metadataUrl configured on settings\"));\n      throw null;\n    }\n    logger2.debug(\"getting metadata from\", this._metadataUrl);\n    const metadata = await this._jsonService.getJson(this._metadataUrl, { credentials: this._fetchRequestCredentials });\n    logger2.debug(\"merging remote JSON with seed metadata\");\n    this._metadata = Object.assign({}, this._settings.metadataSeed, metadata);\n    return this._metadata;\n  }\n  getIssuer() {\n    return this._getMetadataProperty(\"issuer\");\n  }\n  getAuthorizationEndpoint() {\n    return this._getMetadataProperty(\"authorization_endpoint\");\n  }\n  getUserInfoEndpoint() {\n    return this._getMetadataProperty(\"userinfo_endpoint\");\n  }\n  getTokenEndpoint(optional = true) {\n    return this._getMetadataProperty(\"token_endpoint\", optional);\n  }\n  getCheckSessionIframe() {\n    return this._getMetadataProperty(\"check_session_iframe\", true);\n  }\n  getEndSessionEndpoint() {\n    return this._getMetadataProperty(\"end_session_endpoint\", true);\n  }\n  getRevocationEndpoint(optional = true) {\n    return this._getMetadataProperty(\"revocation_endpoint\", optional);\n  }\n  getKeysEndpoint(optional = true) {\n    return this._getMetadataProperty(\"jwks_uri\", optional);\n  }\n  async _getMetadataProperty(name, optional = false) {\n    const logger2 = this._logger.create(`_getMetadataProperty('${name}')`);\n    const metadata = await this.getMetadata();\n    logger2.debug(\"resolved\");\n    if (metadata[name] === void 0) {\n      if (optional === true) {\n        logger2.warn(\"Metadata does not contain optional property\");\n        return void 0;\n      }\n      logger2.throw(new Error(\"Metadata does not contain property \" + name));\n    }\n    return metadata[name];\n  }\n  async getSigningKeys() {\n    const logger2 = this._logger.create(\"getSigningKeys\");\n    if (this._signingKeys) {\n      logger2.debug(\"returning signingKeys from cache\");\n      return this._signingKeys;\n    }\n    const jwks_uri = await this.getKeysEndpoint(false);\n    logger2.debug(\"got jwks_uri\", jwks_uri);\n    const keySet = await this._jsonService.getJson(jwks_uri);\n    logger2.debug(\"got key set\", keySet);\n    if (!Array.isArray(keySet.keys)) {\n      logger2.throw(new Error(\"Missing keys on keyset\"));\n      throw null;\n    }\n    this._signingKeys = keySet.keys;\n    return this._signingKeys;\n  }\n};\n\n// src/WebStorageStateStore.ts\nvar WebStorageStateStore = class {\n  constructor({\n    prefix = \"oidc.\",\n    store = localStorage\n  } = {}) {\n    this._logger = new Logger(\"WebStorageStateStore\");\n    this._store = store;\n    this._prefix = prefix;\n  }\n  async set(key, value) {\n    this._logger.create(`set('${key}')`);\n    key = this._prefix + key;\n    await this._store.setItem(key, value);\n  }\n  async get(key) {\n    this._logger.create(`get('${key}')`);\n    key = this._prefix + key;\n    const item = await this._store.getItem(key);\n    return item;\n  }\n  async remove(key) {\n    this._logger.create(`remove('${key}')`);\n    key = this._prefix + key;\n    const item = await this._store.getItem(key);\n    await this._store.removeItem(key);\n    return item;\n  }\n  async getAllKeys() {\n    this._logger.create(\"getAllKeys\");\n    const len = await this._store.length;\n    const keys = [];\n    for (let index = 0; index < len; index++) {\n      const key = await this._store.key(index);\n      if (key && key.indexOf(this._prefix) === 0) {\n        keys.push(key.substr(this._prefix.length));\n      }\n    }\n    return keys;\n  }\n};\n\n// src/OidcClientSettings.ts\nvar DefaultResponseType = \"code\";\nvar DefaultScope = \"openid\";\nvar DefaultClientAuthentication = \"client_secret_post\";\nvar DefaultResponseMode = \"query\";\nvar DefaultStaleStateAgeInSeconds = 60 * 15;\nvar DefaultClockSkewInSeconds = 60 * 5;\nvar OidcClientSettingsStore = class {\n  constructor({\n    // metadata related\n    authority,\n    metadataUrl,\n    metadata,\n    signingKeys,\n    metadataSeed,\n    // client related\n    client_id,\n    client_secret,\n    response_type = DefaultResponseType,\n    scope = DefaultScope,\n    redirect_uri,\n    post_logout_redirect_uri,\n    client_authentication = DefaultClientAuthentication,\n    // optional protocol\n    prompt,\n    display,\n    max_age,\n    ui_locales,\n    acr_values,\n    resource,\n    response_mode = DefaultResponseMode,\n    // behavior flags\n    filterProtocolClaims = true,\n    loadUserInfo = false,\n    staleStateAgeInSeconds = DefaultStaleStateAgeInSeconds,\n    clockSkewInSeconds = DefaultClockSkewInSeconds,\n    userInfoJwtIssuer = \"OP\",\n    mergeClaims = false,\n    disablePKCE = false,\n    // other behavior\n    stateStore,\n    refreshTokenCredentials,\n    revokeTokenAdditionalContentTypes,\n    fetchRequestCredentials,\n    refreshTokenAllowedScope,\n    // extra\n    extraQueryParams = {},\n    extraTokenParams = {},\n    extraHeaders = {}\n  }) {\n    this.authority = authority;\n    if (metadataUrl) {\n      this.metadataUrl = metadataUrl;\n    } else {\n      this.metadataUrl = authority;\n      if (authority) {\n        if (!this.metadataUrl.endsWith(\"/\")) {\n          this.metadataUrl += \"/\";\n        }\n        this.metadataUrl += \".well-known/openid-configuration\";\n      }\n    }\n    this.metadata = metadata;\n    this.metadataSeed = metadataSeed;\n    this.signingKeys = signingKeys;\n    this.client_id = client_id;\n    this.client_secret = client_secret;\n    this.response_type = response_type;\n    this.scope = scope;\n    this.redirect_uri = redirect_uri;\n    this.post_logout_redirect_uri = post_logout_redirect_uri;\n    this.client_authentication = client_authentication;\n    this.prompt = prompt;\n    this.display = display;\n    this.max_age = max_age;\n    this.ui_locales = ui_locales;\n    this.acr_values = acr_values;\n    this.resource = resource;\n    this.response_mode = response_mode;\n    this.filterProtocolClaims = filterProtocolClaims != null ? filterProtocolClaims : true;\n    this.loadUserInfo = !!loadUserInfo;\n    this.staleStateAgeInSeconds = staleStateAgeInSeconds;\n    this.clockSkewInSeconds = clockSkewInSeconds;\n    this.userInfoJwtIssuer = userInfoJwtIssuer;\n    this.mergeClaims = !!mergeClaims;\n    this.disablePKCE = !!disablePKCE;\n    this.revokeTokenAdditionalContentTypes = revokeTokenAdditionalContentTypes;\n    if (fetchRequestCredentials && refreshTokenCredentials) {\n      console.warn(\"Both fetchRequestCredentials and refreshTokenCredentials is set. Only fetchRequestCredentials will be used.\");\n    }\n    this.fetchRequestCredentials = fetchRequestCredentials ? fetchRequestCredentials : refreshTokenCredentials ? refreshTokenCredentials : \"same-origin\";\n    if (stateStore) {\n      this.stateStore = stateStore;\n    } else {\n      const store = typeof window !== \"undefined\" ? window.localStorage : new InMemoryWebStorage();\n      this.stateStore = new WebStorageStateStore({ store });\n    }\n    this.refreshTokenAllowedScope = refreshTokenAllowedScope;\n    this.extraQueryParams = extraQueryParams;\n    this.extraTokenParams = extraTokenParams;\n    this.extraHeaders = extraHeaders;\n  }\n};\n\n// src/UserInfoService.ts\nvar UserInfoService = class {\n  constructor(_settings, _metadataService) {\n    this._settings = _settings;\n    this._metadataService = _metadataService;\n    this._logger = new Logger(\"UserInfoService\");\n    this._getClaimsFromJwt = async (responseText) => {\n      const logger2 = this._logger.create(\"_getClaimsFromJwt\");\n      try {\n        const payload = JwtUtils.decode(responseText);\n        logger2.debug(\"JWT decoding successful\");\n        return payload;\n      } catch (err) {\n        logger2.error(\"Error parsing JWT response\");\n        throw err;\n      }\n    };\n    this._jsonService = new JsonService(\n      void 0,\n      this._getClaimsFromJwt,\n      this._settings.extraHeaders\n    );\n  }\n  async getClaims(token) {\n    const logger2 = this._logger.create(\"getClaims\");\n    if (!token) {\n      this._logger.throw(new Error(\"No token passed\"));\n    }\n    const url = await this._metadataService.getUserInfoEndpoint();\n    logger2.debug(\"got userinfo url\", url);\n    const claims = await this._jsonService.getJson(url, {\n      token,\n      credentials: this._settings.fetchRequestCredentials\n    });\n    logger2.debug(\"got claims\", claims);\n    return claims;\n  }\n};\n\n// src/TokenClient.ts\nvar TokenClient = class {\n  constructor(_settings, _metadataService) {\n    this._settings = _settings;\n    this._metadataService = _metadataService;\n    this._logger = new Logger(\"TokenClient\");\n    this._jsonService = new JsonService(\n      this._settings.revokeTokenAdditionalContentTypes,\n      null,\n      this._settings.extraHeaders\n    );\n  }\n  /**\n   * Exchange code.\n   *\n   * @see https://www.rfc-editor.org/rfc/rfc6749#section-4.1.3\n   */\n  async exchangeCode({\n    grant_type = \"authorization_code\",\n    redirect_uri = this._settings.redirect_uri,\n    client_id = this._settings.client_id,\n    client_secret = this._settings.client_secret,\n    ...args\n  }) {\n    const logger2 = this._logger.create(\"exchangeCode\");\n    if (!client_id) {\n      logger2.throw(new Error(\"A client_id is required\"));\n    }\n    if (!redirect_uri) {\n      logger2.throw(new Error(\"A redirect_uri is required\"));\n    }\n    if (!args.code) {\n      logger2.throw(new Error(\"A code is required\"));\n    }\n    const params = new URLSearchParams({ grant_type, redirect_uri });\n    for (const [key, value] of Object.entries(args)) {\n      if (value != null) {\n        params.set(key, value);\n      }\n    }\n    let basicAuth;\n    switch (this._settings.client_authentication) {\n      case \"client_secret_basic\":\n        if (!client_secret) {\n          logger2.throw(new Error(\"A client_secret is required\"));\n          throw null;\n        }\n        basicAuth = CryptoUtils.generateBasicAuth(client_id, client_secret);\n        break;\n      case \"client_secret_post\":\n        params.append(\"client_id\", client_id);\n        if (client_secret) {\n          params.append(\"client_secret\", client_secret);\n        }\n        break;\n    }\n    const url = await this._metadataService.getTokenEndpoint(false);\n    logger2.debug(\"got token endpoint\");\n    const response = await this._jsonService.postForm(url, { body: params, basicAuth, initCredentials: this._settings.fetchRequestCredentials });\n    logger2.debug(\"got response\");\n    return response;\n  }\n  /**\n   * Exchange credentials.\n   *\n   * @see https://www.rfc-editor.org/rfc/rfc6749#section-4.3.2\n   */\n  async exchangeCredentials({\n    grant_type = \"password\",\n    client_id = this._settings.client_id,\n    client_secret = this._settings.client_secret,\n    scope = this._settings.scope,\n    ...args\n  }) {\n    const logger2 = this._logger.create(\"exchangeCredentials\");\n    if (!client_id) {\n      logger2.throw(new Error(\"A client_id is required\"));\n    }\n    const params = new URLSearchParams({ grant_type, scope });\n    for (const [key, value] of Object.entries(args)) {\n      if (value != null) {\n        params.set(key, value);\n      }\n    }\n    let basicAuth;\n    switch (this._settings.client_authentication) {\n      case \"client_secret_basic\":\n        if (!client_secret) {\n          logger2.throw(new Error(\"A client_secret is required\"));\n          throw null;\n        }\n        basicAuth = CryptoUtils.generateBasicAuth(client_id, client_secret);\n        break;\n      case \"client_secret_post\":\n        params.append(\"client_id\", client_id);\n        if (client_secret) {\n          params.append(\"client_secret\", client_secret);\n        }\n        break;\n    }\n    const url = await this._metadataService.getTokenEndpoint(false);\n    logger2.debug(\"got token endpoint\");\n    const response = await this._jsonService.postForm(url, { body: params, basicAuth, initCredentials: this._settings.fetchRequestCredentials });\n    logger2.debug(\"got response\");\n    return response;\n  }\n  /**\n   * Exchange a refresh token.\n   *\n   * @see https://www.rfc-editor.org/rfc/rfc6749#section-6\n   */\n  async exchangeRefreshToken({\n    grant_type = \"refresh_token\",\n    client_id = this._settings.client_id,\n    client_secret = this._settings.client_secret,\n    timeoutInSeconds,\n    ...args\n  }) {\n    const logger2 = this._logger.create(\"exchangeRefreshToken\");\n    if (!client_id) {\n      logger2.throw(new Error(\"A client_id is required\"));\n    }\n    if (!args.refresh_token) {\n      logger2.throw(new Error(\"A refresh_token is required\"));\n    }\n    const params = new URLSearchParams({ grant_type });\n    for (const [key, value] of Object.entries(args)) {\n      if (Array.isArray(value)) {\n        value.forEach((param) => params.append(key, param));\n      } else if (value != null) {\n        params.set(key, value);\n      }\n    }\n    let basicAuth;\n    switch (this._settings.client_authentication) {\n      case \"client_secret_basic\":\n        if (!client_secret) {\n          logger2.throw(new Error(\"A client_secret is required\"));\n          throw null;\n        }\n        basicAuth = CryptoUtils.generateBasicAuth(client_id, client_secret);\n        break;\n      case \"client_secret_post\":\n        params.append(\"client_id\", client_id);\n        if (client_secret) {\n          params.append(\"client_secret\", client_secret);\n        }\n        break;\n    }\n    const url = await this._metadataService.getTokenEndpoint(false);\n    logger2.debug(\"got token endpoint\");\n    const response = await this._jsonService.postForm(url, { body: params, basicAuth, timeoutInSeconds, initCredentials: this._settings.fetchRequestCredentials });\n    logger2.debug(\"got response\");\n    return response;\n  }\n  /**\n   * Revoke an access or refresh token.\n   *\n   * @see https://datatracker.ietf.org/doc/html/rfc7009#section-2.1\n   */\n  async revoke(args) {\n    var _a;\n    const logger2 = this._logger.create(\"revoke\");\n    if (!args.token) {\n      logger2.throw(new Error(\"A token is required\"));\n    }\n    const url = await this._metadataService.getRevocationEndpoint(false);\n    logger2.debug(`got revocation endpoint, revoking ${(_a = args.token_type_hint) != null ? _a : \"default token type\"}`);\n    const params = new URLSearchParams();\n    for (const [key, value] of Object.entries(args)) {\n      if (value != null) {\n        params.set(key, value);\n      }\n    }\n    params.set(\"client_id\", this._settings.client_id);\n    if (this._settings.client_secret) {\n      params.set(\"client_secret\", this._settings.client_secret);\n    }\n    await this._jsonService.postForm(url, { body: params });\n    logger2.debug(\"got response\");\n  }\n};\n\n// src/ResponseValidator.ts\nvar ResponseValidator = class {\n  constructor(_settings, _metadataService, _claimsService) {\n    this._settings = _settings;\n    this._metadataService = _metadataService;\n    this._claimsService = _claimsService;\n    this._logger = new Logger(\"ResponseValidator\");\n    this._userInfoService = new UserInfoService(this._settings, this._metadataService);\n    this._tokenClient = new TokenClient(this._settings, this._metadataService);\n  }\n  async validateSigninResponse(response, state) {\n    const logger2 = this._logger.create(\"validateSigninResponse\");\n    this._processSigninState(response, state);\n    logger2.debug(\"state processed\");\n    await this._processCode(response, state);\n    logger2.debug(\"code processed\");\n    if (response.isOpenId) {\n      this._validateIdTokenAttributes(response);\n    }\n    logger2.debug(\"tokens validated\");\n    await this._processClaims(response, state == null ? void 0 : state.skipUserInfo, response.isOpenId);\n    logger2.debug(\"claims processed\");\n  }\n  async validateCredentialsResponse(response, skipUserInfo) {\n    const logger2 = this._logger.create(\"validateCredentialsResponse\");\n    if (response.isOpenId && !!response.id_token) {\n      this._validateIdTokenAttributes(response);\n    }\n    logger2.debug(\"tokens validated\");\n    await this._processClaims(response, skipUserInfo, response.isOpenId);\n    logger2.debug(\"claims processed\");\n  }\n  async validateRefreshResponse(response, state) {\n    var _a, _b;\n    const logger2 = this._logger.create(\"validateRefreshResponse\");\n    response.userState = state.data;\n    (_a = response.session_state) != null ? _a : response.session_state = state.session_state;\n    (_b = response.scope) != null ? _b : response.scope = state.scope;\n    if (response.isOpenId && !!response.id_token) {\n      this._validateIdTokenAttributes(response, state.id_token);\n      logger2.debug(\"ID Token validated\");\n    }\n    if (!response.id_token) {\n      response.id_token = state.id_token;\n      response.profile = state.profile;\n    }\n    const hasIdToken = response.isOpenId && !!response.id_token;\n    await this._processClaims(response, false, hasIdToken);\n    logger2.debug(\"claims processed\");\n  }\n  validateSignoutResponse(response, state) {\n    const logger2 = this._logger.create(\"validateSignoutResponse\");\n    if (state.id !== response.state) {\n      logger2.throw(new Error(\"State does not match\"));\n    }\n    logger2.debug(\"state validated\");\n    response.userState = state.data;\n    if (response.error) {\n      logger2.warn(\"Response was error\", response.error);\n      throw new ErrorResponse(response);\n    }\n  }\n  _processSigninState(response, state) {\n    var _a;\n    const logger2 = this._logger.create(\"_processSigninState\");\n    if (state.id !== response.state) {\n      logger2.throw(new Error(\"State does not match\"));\n    }\n    if (!state.client_id) {\n      logger2.throw(new Error(\"No client_id on state\"));\n    }\n    if (!state.authority) {\n      logger2.throw(new Error(\"No authority on state\"));\n    }\n    if (this._settings.authority !== state.authority) {\n      logger2.throw(new Error(\"authority mismatch on settings vs. signin state\"));\n    }\n    if (this._settings.client_id && this._settings.client_id !== state.client_id) {\n      logger2.throw(new Error(\"client_id mismatch on settings vs. signin state\"));\n    }\n    logger2.debug(\"state validated\");\n    response.userState = state.data;\n    response.url_state = state.url_state;\n    (_a = response.scope) != null ? _a : response.scope = state.scope;\n    if (response.error) {\n      logger2.warn(\"Response was error\", response.error);\n      throw new ErrorResponse(response);\n    }\n    if (state.code_verifier && !response.code) {\n      logger2.throw(new Error(\"Expected code in response\"));\n    }\n  }\n  async _processClaims(response, skipUserInfo = false, validateSub = true) {\n    const logger2 = this._logger.create(\"_processClaims\");\n    response.profile = this._claimsService.filterProtocolClaims(response.profile);\n    if (skipUserInfo || !this._settings.loadUserInfo || !response.access_token) {\n      logger2.debug(\"not loading user info\");\n      return;\n    }\n    logger2.debug(\"loading user info\");\n    const claims = await this._userInfoService.getClaims(response.access_token);\n    logger2.debug(\"user info claims received from user info endpoint\");\n    if (validateSub && claims.sub !== response.profile.sub) {\n      logger2.throw(new Error(\"subject from UserInfo response does not match subject in ID Token\"));\n    }\n    response.profile = this._claimsService.mergeClaims(response.profile, this._claimsService.filterProtocolClaims(claims));\n    logger2.debug(\"user info claims received, updated profile:\", response.profile);\n  }\n  async _processCode(response, state) {\n    const logger2 = this._logger.create(\"_processCode\");\n    if (response.code) {\n      logger2.debug(\"Validating code\");\n      const tokenResponse = await this._tokenClient.exchangeCode({\n        client_id: state.client_id,\n        client_secret: state.client_secret,\n        code: response.code,\n        redirect_uri: state.redirect_uri,\n        code_verifier: state.code_verifier,\n        ...state.extraTokenParams\n      });\n      Object.assign(response, tokenResponse);\n    } else {\n      logger2.debug(\"No code to process\");\n    }\n  }\n  _validateIdTokenAttributes(response, existingToken) {\n    var _a;\n    const logger2 = this._logger.create(\"_validateIdTokenAttributes\");\n    logger2.debug(\"decoding ID Token JWT\");\n    const incoming = JwtUtils.decode((_a = response.id_token) != null ? _a : \"\");\n    if (!incoming.sub) {\n      logger2.throw(new Error(\"ID Token is missing a subject claim\"));\n    }\n    if (existingToken) {\n      const existing = JwtUtils.decode(existingToken);\n      if (incoming.sub !== existing.sub) {\n        logger2.throw(new Error(\"sub in id_token does not match current sub\"));\n      }\n      if (incoming.auth_time && incoming.auth_time !== existing.auth_time) {\n        logger2.throw(new Error(\"auth_time in id_token does not match original auth_time\"));\n      }\n      if (incoming.azp && incoming.azp !== existing.azp) {\n        logger2.throw(new Error(\"azp in id_token does not match original azp\"));\n      }\n      if (!incoming.azp && existing.azp) {\n        logger2.throw(new Error(\"azp not in id_token, but present in original id_token\"));\n      }\n    }\n    response.profile = incoming;\n  }\n};\n\n// src/State.ts\nvar State = class {\n  constructor(args) {\n    this.id = args.id || CryptoUtils.generateUUIDv4();\n    this.data = args.data;\n    if (args.created && args.created > 0) {\n      this.created = args.created;\n    } else {\n      this.created = Timer.getEpochTime();\n    }\n    this.request_type = args.request_type;\n    this.url_state = args.url_state;\n  }\n  toStorageString() {\n    new Logger(\"State\").create(\"toStorageString\");\n    return JSON.stringify({\n      id: this.id,\n      data: this.data,\n      created: this.created,\n      request_type: this.request_type,\n      url_state: this.url_state\n    });\n  }\n  static fromStorageString(storageString) {\n    Logger.createStatic(\"State\", \"fromStorageString\");\n    return new State(JSON.parse(storageString));\n  }\n  static async clearStaleState(storage, age) {\n    const logger2 = Logger.createStatic(\"State\", \"clearStaleState\");\n    const cutoff = Timer.getEpochTime() - age;\n    const keys = await storage.getAllKeys();\n    logger2.debug(\"got keys\", keys);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      const item = await storage.get(key);\n      let remove = false;\n      if (item) {\n        try {\n          const state = State.fromStorageString(item);\n          logger2.debug(\"got item from key:\", key, state.created);\n          if (state.created <= cutoff) {\n            remove = true;\n          }\n        } catch (err) {\n          logger2.error(\"Error parsing state for key:\", key, err);\n          remove = true;\n        }\n      } else {\n        logger2.debug(\"no item in storage for key:\", key);\n        remove = true;\n      }\n      if (remove) {\n        logger2.debug(\"removed item for key:\", key);\n        void storage.remove(key);\n      }\n    }\n  }\n};\n\n// src/SigninState.ts\nvar SigninState = class extends State {\n  constructor(args) {\n    super(args);\n    if (args.code_verifier === true) {\n      this.code_verifier = CryptoUtils.generateCodeVerifier();\n    } else if (args.code_verifier) {\n      this.code_verifier = args.code_verifier;\n    }\n    if (this.code_verifier) {\n      this.code_challenge = CryptoUtils.generateCodeChallenge(this.code_verifier);\n    }\n    this.authority = args.authority;\n    this.client_id = args.client_id;\n    this.redirect_uri = args.redirect_uri;\n    this.scope = args.scope;\n    this.client_secret = args.client_secret;\n    this.extraTokenParams = args.extraTokenParams;\n    this.response_mode = args.response_mode;\n    this.skipUserInfo = args.skipUserInfo;\n  }\n  toStorageString() {\n    new Logger(\"SigninState\").create(\"toStorageString\");\n    return JSON.stringify({\n      id: this.id,\n      data: this.data,\n      created: this.created,\n      request_type: this.request_type,\n      url_state: this.url_state,\n      code_verifier: this.code_verifier,\n      authority: this.authority,\n      client_id: this.client_id,\n      redirect_uri: this.redirect_uri,\n      scope: this.scope,\n      client_secret: this.client_secret,\n      extraTokenParams: this.extraTokenParams,\n      response_mode: this.response_mode,\n      skipUserInfo: this.skipUserInfo\n    });\n  }\n  static fromStorageString(storageString) {\n    Logger.createStatic(\"SigninState\", \"fromStorageString\");\n    const data = JSON.parse(storageString);\n    return new SigninState(data);\n  }\n};\n\n// src/SigninRequest.ts\nvar SigninRequest = class {\n  constructor({\n    // mandatory\n    url,\n    authority,\n    client_id,\n    redirect_uri,\n    response_type,\n    scope,\n    // optional\n    state_data,\n    response_mode,\n    request_type,\n    client_secret,\n    nonce,\n    url_state,\n    resource,\n    skipUserInfo,\n    extraQueryParams,\n    extraTokenParams,\n    disablePKCE,\n    ...optionalParams\n  }) {\n    this._logger = new Logger(\"SigninRequest\");\n    if (!url) {\n      this._logger.error(\"ctor: No url passed\");\n      throw new Error(\"url\");\n    }\n    if (!client_id) {\n      this._logger.error(\"ctor: No client_id passed\");\n      throw new Error(\"client_id\");\n    }\n    if (!redirect_uri) {\n      this._logger.error(\"ctor: No redirect_uri passed\");\n      throw new Error(\"redirect_uri\");\n    }\n    if (!response_type) {\n      this._logger.error(\"ctor: No response_type passed\");\n      throw new Error(\"response_type\");\n    }\n    if (!scope) {\n      this._logger.error(\"ctor: No scope passed\");\n      throw new Error(\"scope\");\n    }\n    if (!authority) {\n      this._logger.error(\"ctor: No authority passed\");\n      throw new Error(\"authority\");\n    }\n    this.state = new SigninState({\n      data: state_data,\n      request_type,\n      url_state,\n      code_verifier: !disablePKCE,\n      client_id,\n      authority,\n      redirect_uri,\n      response_mode,\n      client_secret,\n      scope,\n      extraTokenParams,\n      skipUserInfo\n    });\n    const parsedUrl = new URL(url);\n    parsedUrl.searchParams.append(\"client_id\", client_id);\n    parsedUrl.searchParams.append(\"redirect_uri\", redirect_uri);\n    parsedUrl.searchParams.append(\"response_type\", response_type);\n    parsedUrl.searchParams.append(\"scope\", scope);\n    if (nonce) {\n      parsedUrl.searchParams.append(\"nonce\", nonce);\n    }\n    let state = this.state.id;\n    if (url_state) {\n      state = `${state}${URL_STATE_DELIMITER}${url_state}`;\n    }\n    parsedUrl.searchParams.append(\"state\", state);\n    if (this.state.code_challenge) {\n      parsedUrl.searchParams.append(\"code_challenge\", this.state.code_challenge);\n      parsedUrl.searchParams.append(\"code_challenge_method\", \"S256\");\n    }\n    if (resource) {\n      const resources = Array.isArray(resource) ? resource : [resource];\n      resources.forEach((r) => parsedUrl.searchParams.append(\"resource\", r));\n    }\n    for (const [key, value] of Object.entries({ response_mode, ...optionalParams, ...extraQueryParams })) {\n      if (value != null) {\n        parsedUrl.searchParams.append(key, value.toString());\n      }\n    }\n    this.url = parsedUrl.href;\n  }\n};\n\n// src/SigninResponse.ts\nvar OidcScope = \"openid\";\nvar SigninResponse = class {\n  constructor(params) {\n    /** @see {@link User.access_token} */\n    this.access_token = \"\";\n    /** @see {@link User.token_type} */\n    this.token_type = \"\";\n    /** @see {@link User.profile} */\n    this.profile = {};\n    this.state = params.get(\"state\");\n    this.session_state = params.get(\"session_state\");\n    if (this.state) {\n      const splitState = decodeURIComponent(this.state).split(URL_STATE_DELIMITER);\n      this.state = splitState[0];\n      if (splitState.length > 1) {\n        this.url_state = splitState.slice(1).join(URL_STATE_DELIMITER);\n      }\n    }\n    this.error = params.get(\"error\");\n    this.error_description = params.get(\"error_description\");\n    this.error_uri = params.get(\"error_uri\");\n    this.code = params.get(\"code\");\n  }\n  get expires_in() {\n    if (this.expires_at === void 0) {\n      return void 0;\n    }\n    return this.expires_at - Timer.getEpochTime();\n  }\n  set expires_in(value) {\n    if (typeof value === \"string\")\n      value = Number(value);\n    if (value !== void 0 && value >= 0) {\n      this.expires_at = Math.floor(value) + Timer.getEpochTime();\n    }\n  }\n  get isOpenId() {\n    var _a;\n    return ((_a = this.scope) == null ? void 0 : _a.split(\" \").includes(OidcScope)) || !!this.id_token;\n  }\n};\n\n// src/SignoutRequest.ts\nvar SignoutRequest = class {\n  constructor({\n    url,\n    state_data,\n    id_token_hint,\n    post_logout_redirect_uri,\n    extraQueryParams,\n    request_type,\n    client_id\n  }) {\n    this._logger = new Logger(\"SignoutRequest\");\n    if (!url) {\n      this._logger.error(\"ctor: No url passed\");\n      throw new Error(\"url\");\n    }\n    const parsedUrl = new URL(url);\n    if (id_token_hint) {\n      parsedUrl.searchParams.append(\"id_token_hint\", id_token_hint);\n    }\n    if (client_id) {\n      parsedUrl.searchParams.append(\"client_id\", client_id);\n    }\n    if (post_logout_redirect_uri) {\n      parsedUrl.searchParams.append(\"post_logout_redirect_uri\", post_logout_redirect_uri);\n      if (state_data) {\n        this.state = new State({ data: state_data, request_type });\n        parsedUrl.searchParams.append(\"state\", this.state.id);\n      }\n    }\n    for (const [key, value] of Object.entries({ ...extraQueryParams })) {\n      if (value != null) {\n        parsedUrl.searchParams.append(key, value.toString());\n      }\n    }\n    this.url = parsedUrl.href;\n  }\n};\n\n// src/SignoutResponse.ts\nvar SignoutResponse = class {\n  constructor(params) {\n    this.state = params.get(\"state\");\n    this.error = params.get(\"error\");\n    this.error_description = params.get(\"error_description\");\n    this.error_uri = params.get(\"error_uri\");\n  }\n};\n\n// src/ClaimsService.ts\nvar DefaultProtocolClaims = [\n  \"nbf\",\n  \"jti\",\n  \"auth_time\",\n  \"nonce\",\n  \"acr\",\n  \"amr\",\n  \"azp\",\n  \"at_hash\"\n  // https://openid.net/specs/openid-connect-core-1_0.html#CodeIDToken\n];\nvar InternalRequiredProtocolClaims = [\"sub\", \"iss\", \"aud\", \"exp\", \"iat\"];\nvar ClaimsService = class {\n  constructor(_settings) {\n    this._settings = _settings;\n    this._logger = new Logger(\"ClaimsService\");\n  }\n  filterProtocolClaims(claims) {\n    const result = { ...claims };\n    if (this._settings.filterProtocolClaims) {\n      let protocolClaims;\n      if (Array.isArray(this._settings.filterProtocolClaims)) {\n        protocolClaims = this._settings.filterProtocolClaims;\n      } else {\n        protocolClaims = DefaultProtocolClaims;\n      }\n      for (const claim of protocolClaims) {\n        if (!InternalRequiredProtocolClaims.includes(claim)) {\n          delete result[claim];\n        }\n      }\n    }\n    return result;\n  }\n  mergeClaims(claims1, claims2) {\n    const result = { ...claims1 };\n    for (const [claim, values] of Object.entries(claims2)) {\n      for (const value of Array.isArray(values) ? values : [values]) {\n        const previousValue = result[claim];\n        if (previousValue === void 0) {\n          result[claim] = value;\n        } else if (Array.isArray(previousValue)) {\n          if (!previousValue.includes(value)) {\n            previousValue.push(value);\n          }\n        } else if (result[claim] !== value) {\n          if (typeof value === \"object\" && this._settings.mergeClaims) {\n            result[claim] = this.mergeClaims(previousValue, value);\n          } else {\n            result[claim] = [previousValue, value];\n          }\n        }\n      }\n    }\n    return result;\n  }\n};\n\n// src/OidcClient.ts\nvar OidcClient = class {\n  constructor(settings, metadataService) {\n    this._logger = new Logger(\"OidcClient\");\n    this.settings = settings instanceof OidcClientSettingsStore ? settings : new OidcClientSettingsStore(settings);\n    this.metadataService = metadataService != null ? metadataService : new MetadataService(this.settings);\n    this._claimsService = new ClaimsService(this.settings);\n    this._validator = new ResponseValidator(this.settings, this.metadataService, this._claimsService);\n    this._tokenClient = new TokenClient(this.settings, this.metadataService);\n  }\n  async createSigninRequest({\n    state,\n    request,\n    request_uri,\n    request_type,\n    id_token_hint,\n    login_hint,\n    skipUserInfo,\n    nonce,\n    url_state,\n    response_type = this.settings.response_type,\n    scope = this.settings.scope,\n    redirect_uri = this.settings.redirect_uri,\n    prompt = this.settings.prompt,\n    display = this.settings.display,\n    max_age = this.settings.max_age,\n    ui_locales = this.settings.ui_locales,\n    acr_values = this.settings.acr_values,\n    resource = this.settings.resource,\n    response_mode = this.settings.response_mode,\n    extraQueryParams = this.settings.extraQueryParams,\n    extraTokenParams = this.settings.extraTokenParams\n  }) {\n    const logger2 = this._logger.create(\"createSigninRequest\");\n    if (response_type !== \"code\") {\n      throw new Error(\"Only the Authorization Code flow (with PKCE) is supported\");\n    }\n    const url = await this.metadataService.getAuthorizationEndpoint();\n    logger2.debug(\"Received authorization endpoint\", url);\n    const signinRequest = new SigninRequest({\n      url,\n      authority: this.settings.authority,\n      client_id: this.settings.client_id,\n      redirect_uri,\n      response_type,\n      scope,\n      state_data: state,\n      url_state,\n      prompt,\n      display,\n      max_age,\n      ui_locales,\n      id_token_hint,\n      login_hint,\n      acr_values,\n      resource,\n      request,\n      request_uri,\n      extraQueryParams,\n      extraTokenParams,\n      request_type,\n      response_mode,\n      client_secret: this.settings.client_secret,\n      skipUserInfo,\n      nonce,\n      disablePKCE: this.settings.disablePKCE\n    });\n    await this.clearStaleState();\n    const signinState = signinRequest.state;\n    await this.settings.stateStore.set(signinState.id, signinState.toStorageString());\n    return signinRequest;\n  }\n  async readSigninResponseState(url, removeState = false) {\n    const logger2 = this._logger.create(\"readSigninResponseState\");\n    const response = new SigninResponse(UrlUtils.readParams(url, this.settings.response_mode));\n    if (!response.state) {\n      logger2.throw(new Error(\"No state in response\"));\n      throw null;\n    }\n    const storedStateString = await this.settings.stateStore[removeState ? \"remove\" : \"get\"](response.state);\n    if (!storedStateString) {\n      logger2.throw(new Error(\"No matching state found in storage\"));\n      throw null;\n    }\n    const state = SigninState.fromStorageString(storedStateString);\n    return { state, response };\n  }\n  async processSigninResponse(url) {\n    const logger2 = this._logger.create(\"processSigninResponse\");\n    const { state, response } = await this.readSigninResponseState(url, true);\n    logger2.debug(\"received state from storage; validating response\");\n    await this._validator.validateSigninResponse(response, state);\n    return response;\n  }\n  async processResourceOwnerPasswordCredentials({\n    username,\n    password,\n    skipUserInfo = false,\n    extraTokenParams = {}\n  }) {\n    const tokenResponse = await this._tokenClient.exchangeCredentials({ username, password, ...extraTokenParams });\n    const signinResponse = new SigninResponse(new URLSearchParams());\n    Object.assign(signinResponse, tokenResponse);\n    await this._validator.validateCredentialsResponse(signinResponse, skipUserInfo);\n    return signinResponse;\n  }\n  async useRefreshToken({\n    state,\n    timeoutInSeconds\n  }) {\n    var _a;\n    const logger2 = this._logger.create(\"useRefreshToken\");\n    let scope;\n    if (this.settings.refreshTokenAllowedScope === void 0) {\n      scope = state.scope;\n    } else {\n      const allowableScopes = this.settings.refreshTokenAllowedScope.split(\" \");\n      const providedScopes = ((_a = state.scope) == null ? void 0 : _a.split(\" \")) || [];\n      scope = providedScopes.filter((s) => allowableScopes.includes(s)).join(\" \");\n    }\n    const result = await this._tokenClient.exchangeRefreshToken({\n      refresh_token: state.refresh_token,\n      resource: state.resource,\n      // provide the (possible filtered) scope list\n      scope,\n      timeoutInSeconds\n    });\n    const response = new SigninResponse(new URLSearchParams());\n    Object.assign(response, result);\n    logger2.debug(\"validating response\", response);\n    await this._validator.validateRefreshResponse(response, {\n      ...state,\n      // overide the scope in the state handed over to the validator\n      // so it can set the granted scope to the requested scope in case none is included in the response\n      scope\n    });\n    return response;\n  }\n  async createSignoutRequest({\n    state,\n    id_token_hint,\n    client_id,\n    request_type,\n    post_logout_redirect_uri = this.settings.post_logout_redirect_uri,\n    extraQueryParams = this.settings.extraQueryParams\n  } = {}) {\n    const logger2 = this._logger.create(\"createSignoutRequest\");\n    const url = await this.metadataService.getEndSessionEndpoint();\n    if (!url) {\n      logger2.throw(new Error(\"No end session endpoint\"));\n      throw null;\n    }\n    logger2.debug(\"Received end session endpoint\", url);\n    if (!client_id && post_logout_redirect_uri && !id_token_hint) {\n      client_id = this.settings.client_id;\n    }\n    const request = new SignoutRequest({\n      url,\n      id_token_hint,\n      client_id,\n      post_logout_redirect_uri,\n      state_data: state,\n      extraQueryParams,\n      request_type\n    });\n    await this.clearStaleState();\n    const signoutState = request.state;\n    if (signoutState) {\n      logger2.debug(\"Signout request has state to persist\");\n      await this.settings.stateStore.set(signoutState.id, signoutState.toStorageString());\n    }\n    return request;\n  }\n  async readSignoutResponseState(url, removeState = false) {\n    const logger2 = this._logger.create(\"readSignoutResponseState\");\n    const response = new SignoutResponse(UrlUtils.readParams(url, this.settings.response_mode));\n    if (!response.state) {\n      logger2.debug(\"No state in response\");\n      if (response.error) {\n        logger2.warn(\"Response was error:\", response.error);\n        throw new ErrorResponse(response);\n      }\n      return { state: void 0, response };\n    }\n    const storedStateString = await this.settings.stateStore[removeState ? \"remove\" : \"get\"](response.state);\n    if (!storedStateString) {\n      logger2.throw(new Error(\"No matching state found in storage\"));\n      throw null;\n    }\n    const state = State.fromStorageString(storedStateString);\n    return { state, response };\n  }\n  async processSignoutResponse(url) {\n    const logger2 = this._logger.create(\"processSignoutResponse\");\n    const { state, response } = await this.readSignoutResponseState(url, true);\n    if (state) {\n      logger2.debug(\"Received state from storage; validating response\");\n      this._validator.validateSignoutResponse(response, state);\n    } else {\n      logger2.debug(\"No state from storage; skipping response validation\");\n    }\n    return response;\n  }\n  clearStaleState() {\n    this._logger.create(\"clearStaleState\");\n    return State.clearStaleState(this.settings.stateStore, this.settings.staleStateAgeInSeconds);\n  }\n  async revokeToken(token, type) {\n    this._logger.create(\"revokeToken\");\n    return await this._tokenClient.revoke({\n      token,\n      token_type_hint: type\n    });\n  }\n};\n\n// src/SessionMonitor.ts\nvar SessionMonitor = class {\n  constructor(_userManager) {\n    this._userManager = _userManager;\n    this._logger = new Logger(\"SessionMonitor\");\n    this._start = async (user) => {\n      const session_state = user.session_state;\n      if (!session_state) {\n        return;\n      }\n      const logger2 = this._logger.create(\"_start\");\n      if (user.profile) {\n        this._sub = user.profile.sub;\n        this._sid = user.profile.sid;\n        logger2.debug(\"session_state\", session_state, \", sub\", this._sub);\n      } else {\n        this._sub = void 0;\n        this._sid = void 0;\n        logger2.debug(\"session_state\", session_state, \", anonymous user\");\n      }\n      if (this._checkSessionIFrame) {\n        this._checkSessionIFrame.start(session_state);\n        return;\n      }\n      try {\n        const url = await this._userManager.metadataService.getCheckSessionIframe();\n        if (url) {\n          logger2.debug(\"initializing check session iframe\");\n          const client_id = this._userManager.settings.client_id;\n          const intervalInSeconds = this._userManager.settings.checkSessionIntervalInSeconds;\n          const stopOnError = this._userManager.settings.stopCheckSessionOnError;\n          const checkSessionIFrame = new CheckSessionIFrame(this._callback, client_id, url, intervalInSeconds, stopOnError);\n          await checkSessionIFrame.load();\n          this._checkSessionIFrame = checkSessionIFrame;\n          checkSessionIFrame.start(session_state);\n        } else {\n          logger2.warn(\"no check session iframe found in the metadata\");\n        }\n      } catch (err) {\n        logger2.error(\"Error from getCheckSessionIframe:\", err instanceof Error ? err.message : err);\n      }\n    };\n    this._stop = () => {\n      const logger2 = this._logger.create(\"_stop\");\n      this._sub = void 0;\n      this._sid = void 0;\n      if (this._checkSessionIFrame) {\n        this._checkSessionIFrame.stop();\n      }\n      if (this._userManager.settings.monitorAnonymousSession) {\n        const timerHandle = setInterval(async () => {\n          clearInterval(timerHandle);\n          try {\n            const session = await this._userManager.querySessionStatus();\n            if (session) {\n              const tmpUser = {\n                session_state: session.session_state,\n                profile: session.sub && session.sid ? {\n                  sub: session.sub,\n                  sid: session.sid\n                } : null\n              };\n              void this._start(tmpUser);\n            }\n          } catch (err) {\n            logger2.error(\"error from querySessionStatus\", err instanceof Error ? err.message : err);\n          }\n        }, 1e3);\n      }\n    };\n    this._callback = async () => {\n      const logger2 = this._logger.create(\"_callback\");\n      try {\n        const session = await this._userManager.querySessionStatus();\n        let raiseEvent = true;\n        if (session && this._checkSessionIFrame) {\n          if (session.sub === this._sub) {\n            raiseEvent = false;\n            this._checkSessionIFrame.start(session.session_state);\n            if (session.sid === this._sid) {\n              logger2.debug(\"same sub still logged in at OP, restarting check session iframe; session_state\", session.session_state);\n            } else {\n              logger2.debug(\"same sub still logged in at OP, session state has changed, restarting check session iframe; session_state\", session.session_state);\n              this._userManager.events._raiseUserSessionChanged();\n            }\n          } else {\n            logger2.debug(\"different subject signed into OP\", session.sub);\n          }\n        } else {\n          logger2.debug(\"subject no longer signed into OP\");\n        }\n        if (raiseEvent) {\n          if (this._sub) {\n            this._userManager.events._raiseUserSignedOut();\n          } else {\n            this._userManager.events._raiseUserSignedIn();\n          }\n        } else {\n          logger2.debug(\"no change in session detected, no event to raise\");\n        }\n      } catch (err) {\n        if (this._sub) {\n          logger2.debug(\"Error calling queryCurrentSigninSession; raising signed out event\", err);\n          this._userManager.events._raiseUserSignedOut();\n        }\n      }\n    };\n    if (!_userManager) {\n      this._logger.throw(new Error(\"No user manager passed\"));\n    }\n    this._userManager.events.addUserLoaded(this._start);\n    this._userManager.events.addUserUnloaded(this._stop);\n    this._init().catch((err) => {\n      this._logger.error(err);\n    });\n  }\n  async _init() {\n    this._logger.create(\"_init\");\n    const user = await this._userManager.getUser();\n    if (user) {\n      void this._start(user);\n    } else if (this._userManager.settings.monitorAnonymousSession) {\n      const session = await this._userManager.querySessionStatus();\n      if (session) {\n        const tmpUser = {\n          session_state: session.session_state,\n          profile: session.sub && session.sid ? {\n            sub: session.sub,\n            sid: session.sid\n          } : null\n        };\n        void this._start(tmpUser);\n      }\n    }\n  }\n};\n\n// src/User.ts\nvar User = class {\n  constructor(args) {\n    var _a;\n    this.id_token = args.id_token;\n    this.session_state = (_a = args.session_state) != null ? _a : null;\n    this.access_token = args.access_token;\n    this.refresh_token = args.refresh_token;\n    this.token_type = args.token_type;\n    this.scope = args.scope;\n    this.profile = args.profile;\n    this.expires_at = args.expires_at;\n    this.state = args.userState;\n    this.url_state = args.url_state;\n  }\n  /** Computed number of seconds the access token has remaining. */\n  get expires_in() {\n    if (this.expires_at === void 0) {\n      return void 0;\n    }\n    return this.expires_at - Timer.getEpochTime();\n  }\n  set expires_in(value) {\n    if (value !== void 0) {\n      this.expires_at = Math.floor(value) + Timer.getEpochTime();\n    }\n  }\n  /** Computed value indicating if the access token is expired. */\n  get expired() {\n    const expires_in = this.expires_in;\n    if (expires_in === void 0) {\n      return void 0;\n    }\n    return expires_in <= 0;\n  }\n  /** Array representing the parsed values from the `scope`. */\n  get scopes() {\n    var _a, _b;\n    return (_b = (_a = this.scope) == null ? void 0 : _a.split(\" \")) != null ? _b : [];\n  }\n  toStorageString() {\n    new Logger(\"User\").create(\"toStorageString\");\n    return JSON.stringify({\n      id_token: this.id_token,\n      session_state: this.session_state,\n      access_token: this.access_token,\n      refresh_token: this.refresh_token,\n      token_type: this.token_type,\n      scope: this.scope,\n      profile: this.profile,\n      expires_at: this.expires_at\n    });\n  }\n  static fromStorageString(storageString) {\n    Logger.createStatic(\"User\", \"fromStorageString\");\n    return new User(JSON.parse(storageString));\n  }\n};\n\n// src/navigators/AbstractChildWindow.ts\nvar messageSource = \"oidc-client\";\nvar AbstractChildWindow = class {\n  constructor() {\n    this._abort = new Event(\"Window navigation aborted\");\n    this._disposeHandlers = /* @__PURE__ */ new Set();\n    this._window = null;\n  }\n  async navigate(params) {\n    const logger2 = this._logger.create(\"navigate\");\n    if (!this._window) {\n      throw new Error(\"Attempted to navigate on a disposed window\");\n    }\n    logger2.debug(\"setting URL in window\");\n    this._window.location.replace(params.url);\n    const { url, keepOpen } = await new Promise((resolve, reject) => {\n      const listener = (e) => {\n        var _a;\n        const data = e.data;\n        const origin = (_a = params.scriptOrigin) != null ? _a : window.location.origin;\n        if (e.origin !== origin || (data == null ? void 0 : data.source) !== messageSource) {\n          return;\n        }\n        try {\n          const state = UrlUtils.readParams(data.url, params.response_mode).get(\"state\");\n          if (!state) {\n            logger2.warn(\"no state found in response url\");\n          }\n          if (e.source !== this._window && state !== params.state) {\n            return;\n          }\n        } catch (err) {\n          this._dispose();\n          reject(new Error(\"Invalid response from window\"));\n        }\n        resolve(data);\n      };\n      window.addEventListener(\"message\", listener, false);\n      this._disposeHandlers.add(() => window.removeEventListener(\"message\", listener, false));\n      this._disposeHandlers.add(this._abort.addHandler((reason) => {\n        this._dispose();\n        reject(reason);\n      }));\n    });\n    logger2.debug(\"got response from window\");\n    this._dispose();\n    if (!keepOpen) {\n      this.close();\n    }\n    return { url };\n  }\n  _dispose() {\n    this._logger.create(\"_dispose\");\n    for (const dispose of this._disposeHandlers) {\n      dispose();\n    }\n    this._disposeHandlers.clear();\n  }\n  static _notifyParent(parent, url, keepOpen = false, targetOrigin = window.location.origin) {\n    parent.postMessage({\n      source: messageSource,\n      url,\n      keepOpen\n    }, targetOrigin);\n  }\n};\n\n// src/UserManagerSettings.ts\nvar DefaultPopupWindowFeatures = {\n  location: false,\n  toolbar: false,\n  height: 640,\n  closePopupWindowAfterInSeconds: -1\n};\nvar DefaultPopupTarget = \"_blank\";\nvar DefaultAccessTokenExpiringNotificationTimeInSeconds = 60;\nvar DefaultCheckSessionIntervalInSeconds = 2;\nvar DefaultSilentRequestTimeoutInSeconds = 10;\nvar UserManagerSettingsStore = class extends OidcClientSettingsStore {\n  constructor(args) {\n    const {\n      popup_redirect_uri = args.redirect_uri,\n      popup_post_logout_redirect_uri = args.post_logout_redirect_uri,\n      popupWindowFeatures = DefaultPopupWindowFeatures,\n      popupWindowTarget = DefaultPopupTarget,\n      redirectMethod = \"assign\",\n      redirectTarget = \"self\",\n      iframeNotifyParentOrigin = args.iframeNotifyParentOrigin,\n      iframeScriptOrigin = args.iframeScriptOrigin,\n      silent_redirect_uri = args.redirect_uri,\n      silentRequestTimeoutInSeconds = DefaultSilentRequestTimeoutInSeconds,\n      automaticSilentRenew = true,\n      validateSubOnSilentRenew = true,\n      includeIdTokenInSilentRenew = false,\n      monitorSession = false,\n      monitorAnonymousSession = false,\n      checkSessionIntervalInSeconds = DefaultCheckSessionIntervalInSeconds,\n      query_status_response_type = \"code\",\n      stopCheckSessionOnError = true,\n      revokeTokenTypes = [\"access_token\", \"refresh_token\"],\n      revokeTokensOnSignout = false,\n      includeIdTokenInSilentSignout = false,\n      accessTokenExpiringNotificationTimeInSeconds = DefaultAccessTokenExpiringNotificationTimeInSeconds,\n      userStore\n    } = args;\n    super(args);\n    this.popup_redirect_uri = popup_redirect_uri;\n    this.popup_post_logout_redirect_uri = popup_post_logout_redirect_uri;\n    this.popupWindowFeatures = popupWindowFeatures;\n    this.popupWindowTarget = popupWindowTarget;\n    this.redirectMethod = redirectMethod;\n    this.redirectTarget = redirectTarget;\n    this.iframeNotifyParentOrigin = iframeNotifyParentOrigin;\n    this.iframeScriptOrigin = iframeScriptOrigin;\n    this.silent_redirect_uri = silent_redirect_uri;\n    this.silentRequestTimeoutInSeconds = silentRequestTimeoutInSeconds;\n    this.automaticSilentRenew = automaticSilentRenew;\n    this.validateSubOnSilentRenew = validateSubOnSilentRenew;\n    this.includeIdTokenInSilentRenew = includeIdTokenInSilentRenew;\n    this.monitorSession = monitorSession;\n    this.monitorAnonymousSession = monitorAnonymousSession;\n    this.checkSessionIntervalInSeconds = checkSessionIntervalInSeconds;\n    this.stopCheckSessionOnError = stopCheckSessionOnError;\n    this.query_status_response_type = query_status_response_type;\n    this.revokeTokenTypes = revokeTokenTypes;\n    this.revokeTokensOnSignout = revokeTokensOnSignout;\n    this.includeIdTokenInSilentSignout = includeIdTokenInSilentSignout;\n    this.accessTokenExpiringNotificationTimeInSeconds = accessTokenExpiringNotificationTimeInSeconds;\n    if (userStore) {\n      this.userStore = userStore;\n    } else {\n      const store = typeof window !== \"undefined\" ? window.sessionStorage : new InMemoryWebStorage();\n      this.userStore = new WebStorageStateStore({ store });\n    }\n  }\n};\n\n// src/navigators/IFrameWindow.ts\nvar IFrameWindow = class extends AbstractChildWindow {\n  constructor({\n    silentRequestTimeoutInSeconds = DefaultSilentRequestTimeoutInSeconds\n  }) {\n    super();\n    this._logger = new Logger(\"IFrameWindow\");\n    this._timeoutInSeconds = silentRequestTimeoutInSeconds;\n    this._frame = IFrameWindow.createHiddenIframe();\n    this._window = this._frame.contentWindow;\n  }\n  static createHiddenIframe() {\n    const iframe = window.document.createElement(\"iframe\");\n    iframe.style.visibility = \"hidden\";\n    iframe.style.position = \"fixed\";\n    iframe.style.left = \"-1000px\";\n    iframe.style.top = \"0\";\n    iframe.width = \"0\";\n    iframe.height = \"0\";\n    window.document.body.appendChild(iframe);\n    return iframe;\n  }\n  async navigate(params) {\n    this._logger.debug(\"navigate: Using timeout of:\", this._timeoutInSeconds);\n    const timer = setTimeout(() => this._abort.raise(new ErrorTimeout(\"IFrame timed out without a response\")), this._timeoutInSeconds * 1e3);\n    this._disposeHandlers.add(() => clearTimeout(timer));\n    return await super.navigate(params);\n  }\n  close() {\n    var _a;\n    if (this._frame) {\n      if (this._frame.parentNode) {\n        this._frame.addEventListener(\"load\", (ev) => {\n          var _a2;\n          const frame = ev.target;\n          (_a2 = frame.parentNode) == null ? void 0 : _a2.removeChild(frame);\n          this._abort.raise(new Error(\"IFrame removed from DOM\"));\n        }, true);\n        (_a = this._frame.contentWindow) == null ? void 0 : _a.location.replace(\"about:blank\");\n      }\n      this._frame = null;\n    }\n    this._window = null;\n  }\n  static notifyParent(url, targetOrigin) {\n    return super._notifyParent(window.parent, url, false, targetOrigin);\n  }\n};\n\n// src/navigators/IFrameNavigator.ts\nvar IFrameNavigator = class {\n  constructor(_settings) {\n    this._settings = _settings;\n    this._logger = new Logger(\"IFrameNavigator\");\n  }\n  async prepare({\n    silentRequestTimeoutInSeconds = this._settings.silentRequestTimeoutInSeconds\n  }) {\n    return new IFrameWindow({ silentRequestTimeoutInSeconds });\n  }\n  async callback(url) {\n    this._logger.create(\"callback\");\n    IFrameWindow.notifyParent(url, this._settings.iframeNotifyParentOrigin);\n  }\n};\n\n// src/navigators/PopupWindow.ts\nvar checkForPopupClosedInterval = 500;\nvar second = 1e3;\nvar PopupWindow = class extends AbstractChildWindow {\n  constructor({\n    popupWindowTarget = DefaultPopupTarget,\n    popupWindowFeatures = {}\n  }) {\n    super();\n    this._logger = new Logger(\"PopupWindow\");\n    const centeredPopup = PopupUtils.center({ ...DefaultPopupWindowFeatures, ...popupWindowFeatures });\n    this._window = window.open(void 0, popupWindowTarget, PopupUtils.serialize(centeredPopup));\n    if (popupWindowFeatures.closePopupWindowAfterInSeconds && popupWindowFeatures.closePopupWindowAfterInSeconds > 0) {\n      setTimeout(() => {\n        if (!this._window || typeof this._window.closed !== \"boolean\" || this._window.closed) {\n          this._abort.raise(new Error(\"Popup blocked by user\"));\n          return;\n        }\n        this.close();\n      }, popupWindowFeatures.closePopupWindowAfterInSeconds * second);\n    }\n  }\n  async navigate(params) {\n    var _a;\n    (_a = this._window) == null ? void 0 : _a.focus();\n    const popupClosedInterval = setInterval(() => {\n      if (!this._window || this._window.closed) {\n        this._abort.raise(new Error(\"Popup closed by user\"));\n      }\n    }, checkForPopupClosedInterval);\n    this._disposeHandlers.add(() => clearInterval(popupClosedInterval));\n    return await super.navigate(params);\n  }\n  close() {\n    if (this._window) {\n      if (!this._window.closed) {\n        this._window.close();\n        this._abort.raise(new Error(\"Popup closed\"));\n      }\n    }\n    this._window = null;\n  }\n  static notifyOpener(url, keepOpen) {\n    if (!window.opener) {\n      throw new Error(\"No window.opener. Can't complete notification.\");\n    }\n    return super._notifyParent(window.opener, url, keepOpen);\n  }\n};\n\n// src/navigators/PopupNavigator.ts\nvar PopupNavigator = class {\n  constructor(_settings) {\n    this._settings = _settings;\n    this._logger = new Logger(\"PopupNavigator\");\n  }\n  async prepare({\n    popupWindowFeatures = this._settings.popupWindowFeatures,\n    popupWindowTarget = this._settings.popupWindowTarget\n  }) {\n    return new PopupWindow({ popupWindowFeatures, popupWindowTarget });\n  }\n  async callback(url, { keepOpen = false }) {\n    this._logger.create(\"callback\");\n    PopupWindow.notifyOpener(url, keepOpen);\n  }\n};\n\n// src/navigators/RedirectNavigator.ts\nvar RedirectNavigator = class {\n  constructor(_settings) {\n    this._settings = _settings;\n    this._logger = new Logger(\"RedirectNavigator\");\n  }\n  async prepare({\n    redirectMethod = this._settings.redirectMethod,\n    redirectTarget = this._settings.redirectTarget\n  }) {\n    var _a;\n    this._logger.create(\"prepare\");\n    let targetWindow = window.self;\n    if (redirectTarget === \"top\") {\n      targetWindow = (_a = window.top) != null ? _a : window.self;\n    }\n    const redirect = targetWindow.location[redirectMethod].bind(targetWindow.location);\n    let abort;\n    return {\n      navigate: async (params) => {\n        this._logger.create(\"navigate\");\n        const promise = new Promise((resolve, reject) => {\n          abort = reject;\n        });\n        redirect(params.url);\n        return await promise;\n      },\n      close: () => {\n        this._logger.create(\"close\");\n        abort == null ? void 0 : abort(new Error(\"Redirect aborted\"));\n        targetWindow.stop();\n      }\n    };\n  }\n  async callback() {\n    return;\n  }\n};\n\n// src/UserManagerEvents.ts\nvar UserManagerEvents = class extends AccessTokenEvents {\n  constructor(settings) {\n    super({ expiringNotificationTimeInSeconds: settings.accessTokenExpiringNotificationTimeInSeconds });\n    this._logger = new Logger(\"UserManagerEvents\");\n    this._userLoaded = new Event(\"User loaded\");\n    this._userUnloaded = new Event(\"User unloaded\");\n    this._silentRenewError = new Event(\"Silent renew error\");\n    this._userSignedIn = new Event(\"User signed in\");\n    this._userSignedOut = new Event(\"User signed out\");\n    this._userSessionChanged = new Event(\"User session changed\");\n  }\n  load(user, raiseEvent = true) {\n    super.load(user);\n    if (raiseEvent) {\n      this._userLoaded.raise(user);\n    }\n  }\n  unload() {\n    super.unload();\n    this._userUnloaded.raise();\n  }\n  /**\n   * Add callback: Raised when a user session has been established (or re-established).\n   */\n  addUserLoaded(cb) {\n    return this._userLoaded.addHandler(cb);\n  }\n  /**\n   * Remove callback: Raised when a user session has been established (or re-established).\n   */\n  removeUserLoaded(cb) {\n    return this._userLoaded.removeHandler(cb);\n  }\n  /**\n   * Add callback: Raised when a user session has been terminated.\n   */\n  addUserUnloaded(cb) {\n    return this._userUnloaded.addHandler(cb);\n  }\n  /**\n   * Remove callback: Raised when a user session has been terminated.\n   */\n  removeUserUnloaded(cb) {\n    return this._userUnloaded.removeHandler(cb);\n  }\n  /**\n   * Add callback: Raised when the automatic silent renew has failed.\n   */\n  addSilentRenewError(cb) {\n    return this._silentRenewError.addHandler(cb);\n  }\n  /**\n   * Remove callback: Raised when the automatic silent renew has failed.\n   */\n  removeSilentRenewError(cb) {\n    return this._silentRenewError.removeHandler(cb);\n  }\n  /**\n   * @internal\n   */\n  _raiseSilentRenewError(e) {\n    this._silentRenewError.raise(e);\n  }\n  /**\n   * Add callback: Raised when the user is signed in (when `monitorSession` is set).\n   * @see {@link UserManagerSettings.monitorSession}\n   */\n  addUserSignedIn(cb) {\n    return this._userSignedIn.addHandler(cb);\n  }\n  /**\n   * Remove callback: Raised when the user is signed in (when `monitorSession` is set).\n   */\n  removeUserSignedIn(cb) {\n    this._userSignedIn.removeHandler(cb);\n  }\n  /**\n   * @internal\n   */\n  _raiseUserSignedIn() {\n    this._userSignedIn.raise();\n  }\n  /**\n   * Add callback: Raised when the user's sign-in status at the OP has changed (when `monitorSession` is set).\n   * @see {@link UserManagerSettings.monitorSession}\n   */\n  addUserSignedOut(cb) {\n    return this._userSignedOut.addHandler(cb);\n  }\n  /**\n   * Remove callback: Raised when the user's sign-in status at the OP has changed (when `monitorSession` is set).\n   */\n  removeUserSignedOut(cb) {\n    this._userSignedOut.removeHandler(cb);\n  }\n  /**\n   * @internal\n   */\n  _raiseUserSignedOut() {\n    this._userSignedOut.raise();\n  }\n  /**\n   * Add callback: Raised when the user session changed (when `monitorSession` is set).\n   * @see {@link UserManagerSettings.monitorSession}\n   */\n  addUserSessionChanged(cb) {\n    return this._userSessionChanged.addHandler(cb);\n  }\n  /**\n   * Remove callback: Raised when the user session changed (when `monitorSession` is set).\n   */\n  removeUserSessionChanged(cb) {\n    this._userSessionChanged.removeHandler(cb);\n  }\n  /**\n   * @internal\n   */\n  _raiseUserSessionChanged() {\n    this._userSessionChanged.raise();\n  }\n};\n\n// src/SilentRenewService.ts\nvar SilentRenewService = class {\n  constructor(_userManager) {\n    this._userManager = _userManager;\n    this._logger = new Logger(\"SilentRenewService\");\n    this._isStarted = false;\n    this._retryTimer = new Timer(\"Retry Silent Renew\");\n    this._tokenExpiring = async () => {\n      const logger2 = this._logger.create(\"_tokenExpiring\");\n      try {\n        await this._userManager.signinSilent();\n        logger2.debug(\"silent token renewal successful\");\n      } catch (err) {\n        if (err instanceof ErrorTimeout) {\n          logger2.warn(\"ErrorTimeout from signinSilent:\", err, \"retry in 5s\");\n          this._retryTimer.init(5);\n          return;\n        }\n        logger2.error(\"Error from signinSilent:\", err);\n        this._userManager.events._raiseSilentRenewError(err);\n      }\n    };\n  }\n  async start() {\n    const logger2 = this._logger.create(\"start\");\n    if (!this._isStarted) {\n      this._isStarted = true;\n      this._userManager.events.addAccessTokenExpiring(this._tokenExpiring);\n      this._retryTimer.addHandler(this._tokenExpiring);\n      try {\n        await this._userManager.getUser();\n      } catch (err) {\n        logger2.error(\"getUser error\", err);\n      }\n    }\n  }\n  stop() {\n    if (this._isStarted) {\n      this._retryTimer.cancel();\n      this._retryTimer.removeHandler(this._tokenExpiring);\n      this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring);\n      this._isStarted = false;\n    }\n  }\n};\n\n// src/RefreshState.ts\nvar RefreshState = class {\n  constructor(args, resource) {\n    this.refresh_token = args.refresh_token;\n    this.id_token = args.id_token;\n    this.session_state = args.session_state;\n    this.scope = args.scope;\n    this.profile = args.profile;\n    this.resource = resource;\n    this.data = args.state;\n  }\n};\n\n// src/UserManager.ts\nvar UserManager = class {\n  constructor(settings, redirectNavigator, popupNavigator, iframeNavigator) {\n    this._logger = new Logger(\"UserManager\");\n    this.settings = new UserManagerSettingsStore(settings);\n    this._client = new OidcClient(settings);\n    this._redirectNavigator = redirectNavigator != null ? redirectNavigator : new RedirectNavigator(this.settings);\n    this._popupNavigator = popupNavigator != null ? popupNavigator : new PopupNavigator(this.settings);\n    this._iframeNavigator = iframeNavigator != null ? iframeNavigator : new IFrameNavigator(this.settings);\n    this._events = new UserManagerEvents(this.settings);\n    this._silentRenewService = new SilentRenewService(this);\n    if (this.settings.automaticSilentRenew) {\n      this.startSilentRenew();\n    }\n    this._sessionMonitor = null;\n    if (this.settings.monitorSession) {\n      this._sessionMonitor = new SessionMonitor(this);\n    }\n  }\n  /** Returns an object used to register for events raised by the `UserManager`. */\n  get events() {\n    return this._events;\n  }\n  /** Returns an object used to access the metadata configuration of the OIDC provider. */\n  get metadataService() {\n    return this._client.metadataService;\n  }\n  /**\n   * Returns promise to load the `User` object for the currently authenticated user.\n   */\n  async getUser() {\n    const logger2 = this._logger.create(\"getUser\");\n    const user = await this._loadUser();\n    if (user) {\n      logger2.info(\"user loaded\");\n      this._events.load(user, false);\n      return user;\n    }\n    logger2.info(\"user not found in storage\");\n    return null;\n  }\n  /**\n   * Returns promise to remove from any storage the currently authenticated user.\n   */\n  async removeUser() {\n    const logger2 = this._logger.create(\"removeUser\");\n    await this.storeUser(null);\n    logger2.info(\"user removed from storage\");\n    this._events.unload();\n  }\n  /**\n   * Returns promise to trigger a redirect of the current window to the authorization endpoint.\n   */\n  async signinRedirect(args = {}) {\n    this._logger.create(\"signinRedirect\");\n    const {\n      redirectMethod,\n      ...requestArgs\n    } = args;\n    const handle = await this._redirectNavigator.prepare({ redirectMethod });\n    await this._signinStart({\n      request_type: \"si:r\",\n      ...requestArgs\n    }, handle);\n  }\n  /**\n   * Returns promise to process response from the authorization endpoint. The result of the promise is the authenticated `User`.\n   */\n  async signinRedirectCallback(url = window.location.href) {\n    const logger2 = this._logger.create(\"signinRedirectCallback\");\n    const user = await this._signinEnd(url);\n    if (user.profile && user.profile.sub) {\n      logger2.info(\"success, signed in subject\", user.profile.sub);\n    } else {\n      logger2.info(\"no subject\");\n    }\n    return user;\n  }\n  /**\n   * Returns promise to process the signin with user/password. The result of the promise is the authenticated `User`.\n   *\n   * Throws an ErrorResponse in case of wrong authentication.\n   */\n  async signinResourceOwnerCredentials({\n    username,\n    password,\n    skipUserInfo = false\n  }) {\n    const logger2 = this._logger.create(\"signinResourceOwnerCredential\");\n    const signinResponse = await this._client.processResourceOwnerPasswordCredentials({ username, password, skipUserInfo, extraTokenParams: this.settings.extraTokenParams });\n    logger2.debug(\"got signin response\");\n    const user = await this._buildUser(signinResponse);\n    if (user.profile && user.profile.sub) {\n      logger2.info(\"success, signed in subject\", user.profile.sub);\n    } else {\n      logger2.info(\"no subject\");\n    }\n    return user;\n  }\n  /**\n   * Returns promise to trigger a request (via a popup window) to the authorization endpoint. The result of the promise is the authenticated `User`.\n   */\n  async signinPopup(args = {}) {\n    const logger2 = this._logger.create(\"signinPopup\");\n    const {\n      popupWindowFeatures,\n      popupWindowTarget,\n      ...requestArgs\n    } = args;\n    const url = this.settings.popup_redirect_uri;\n    if (!url) {\n      logger2.throw(new Error(\"No popup_redirect_uri configured\"));\n    }\n    const handle = await this._popupNavigator.prepare({ popupWindowFeatures, popupWindowTarget });\n    const user = await this._signin({\n      request_type: \"si:p\",\n      redirect_uri: url,\n      display: \"popup\",\n      ...requestArgs\n    }, handle);\n    if (user) {\n      if (user.profile && user.profile.sub) {\n        logger2.info(\"success, signed in subject\", user.profile.sub);\n      } else {\n        logger2.info(\"no subject\");\n      }\n    }\n    return user;\n  }\n  /**\n   * Returns promise to notify the opening window of response from the authorization endpoint.\n   */\n  async signinPopupCallback(url = window.location.href, keepOpen = false) {\n    const logger2 = this._logger.create(\"signinPopupCallback\");\n    await this._popupNavigator.callback(url, { keepOpen });\n    logger2.info(\"success\");\n  }\n  /**\n   * Returns promise to trigger a silent request (via an iframe) to the authorization endpoint.\n   * The result of the promise is the authenticated `User`.\n   */\n  async signinSilent(args = {}) {\n    var _a;\n    const logger2 = this._logger.create(\"signinSilent\");\n    const {\n      silentRequestTimeoutInSeconds,\n      resource,\n      ...requestArgs\n    } = args;\n    let user = await this._loadUser();\n    if (user == null ? void 0 : user.refresh_token) {\n      logger2.debug(\"using refresh token\");\n      const state = new RefreshState(user, resource);\n      return await this._useRefreshToken(state);\n    }\n    const url = this.settings.silent_redirect_uri;\n    if (!url) {\n      logger2.throw(new Error(\"No silent_redirect_uri configured\"));\n    }\n    let verifySub;\n    if (user && this.settings.validateSubOnSilentRenew) {\n      logger2.debug(\"subject prior to silent renew:\", user.profile.sub);\n      verifySub = user.profile.sub;\n    }\n    const handle = await this._iframeNavigator.prepare({ silentRequestTimeoutInSeconds });\n    user = await this._signin({\n      request_type: \"si:s\",\n      redirect_uri: url,\n      prompt: \"none\",\n      id_token_hint: this.settings.includeIdTokenInSilentRenew ? user == null ? void 0 : user.id_token : void 0,\n      ...requestArgs\n    }, handle, verifySub);\n    if (user) {\n      if ((_a = user.profile) == null ? void 0 : _a.sub) {\n        logger2.info(\"success, signed in subject\", user.profile.sub);\n      } else {\n        logger2.info(\"no subject\");\n      }\n    }\n    return user;\n  }\n  async _useRefreshToken(state) {\n    const response = await this._client.useRefreshToken({\n      state,\n      timeoutInSeconds: this.settings.silentRequestTimeoutInSeconds\n    });\n    const user = new User({ ...state, ...response });\n    await this.storeUser(user);\n    this._events.load(user);\n    return user;\n  }\n  /**\n   * Returns promise to notify the parent window of response from the authorization endpoint.\n   */\n  async signinSilentCallback(url = window.location.href) {\n    const logger2 = this._logger.create(\"signinSilentCallback\");\n    await this._iframeNavigator.callback(url);\n    logger2.info(\"success\");\n  }\n  async signinCallback(url = window.location.href) {\n    const { state } = await this._client.readSigninResponseState(url);\n    switch (state.request_type) {\n      case \"si:r\":\n        return await this.signinRedirectCallback(url);\n      case \"si:p\":\n        return await this.signinPopupCallback(url);\n      case \"si:s\":\n        return await this.signinSilentCallback(url);\n      default:\n        throw new Error(\"invalid response_type in state\");\n    }\n  }\n  async signoutCallback(url = window.location.href, keepOpen = false) {\n    const { state } = await this._client.readSignoutResponseState(url);\n    if (!state) {\n      return;\n    }\n    switch (state.request_type) {\n      case \"so:r\":\n        await this.signoutRedirectCallback(url);\n        break;\n      case \"so:p\":\n        await this.signoutPopupCallback(url, keepOpen);\n        break;\n      case \"so:s\":\n        await this.signoutSilentCallback(url);\n        break;\n      default:\n        throw new Error(\"invalid response_type in state\");\n    }\n  }\n  /**\n   * Returns promise to query OP for user's current signin status. Returns object with session_state and subject identifier.\n   */\n  async querySessionStatus(args = {}) {\n    const logger2 = this._logger.create(\"querySessionStatus\");\n    const {\n      silentRequestTimeoutInSeconds,\n      ...requestArgs\n    } = args;\n    const url = this.settings.silent_redirect_uri;\n    if (!url) {\n      logger2.throw(new Error(\"No silent_redirect_uri configured\"));\n    }\n    const user = await this._loadUser();\n    const handle = await this._iframeNavigator.prepare({ silentRequestTimeoutInSeconds });\n    const navResponse = await this._signinStart({\n      request_type: \"si:s\",\n      // this acts like a signin silent\n      redirect_uri: url,\n      prompt: \"none\",\n      id_token_hint: this.settings.includeIdTokenInSilentRenew ? user == null ? void 0 : user.id_token : void 0,\n      response_type: this.settings.query_status_response_type,\n      scope: \"openid\",\n      skipUserInfo: true,\n      ...requestArgs\n    }, handle);\n    try {\n      const signinResponse = await this._client.processSigninResponse(navResponse.url);\n      logger2.debug(\"got signin response\");\n      if (signinResponse.session_state && signinResponse.profile.sub) {\n        logger2.info(\"success for subject\", signinResponse.profile.sub);\n        return {\n          session_state: signinResponse.session_state,\n          sub: signinResponse.profile.sub,\n          sid: signinResponse.profile.sid\n        };\n      }\n      logger2.info(\"success, user not authenticated\");\n      return null;\n    } catch (err) {\n      if (this.settings.monitorAnonymousSession && err instanceof ErrorResponse) {\n        switch (err.error) {\n          case \"login_required\":\n          case \"consent_required\":\n          case \"interaction_required\":\n          case \"account_selection_required\":\n            logger2.info(\"success for anonymous user\");\n            return {\n              // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n              session_state: err.session_state\n            };\n        }\n      }\n      throw err;\n    }\n  }\n  async _signin(args, handle, verifySub) {\n    const navResponse = await this._signinStart(args, handle);\n    return await this._signinEnd(navResponse.url, verifySub);\n  }\n  async _signinStart(args, handle) {\n    const logger2 = this._logger.create(\"_signinStart\");\n    try {\n      const signinRequest = await this._client.createSigninRequest(args);\n      logger2.debug(\"got signin request\");\n      return await handle.navigate({\n        url: signinRequest.url,\n        state: signinRequest.state.id,\n        response_mode: signinRequest.state.response_mode,\n        scriptOrigin: this.settings.iframeScriptOrigin\n      });\n    } catch (err) {\n      logger2.debug(\"error after preparing navigator, closing navigator window\");\n      handle.close();\n      throw err;\n    }\n  }\n  async _signinEnd(url, verifySub) {\n    const logger2 = this._logger.create(\"_signinEnd\");\n    const signinResponse = await this._client.processSigninResponse(url);\n    logger2.debug(\"got signin response\");\n    const user = await this._buildUser(signinResponse, verifySub);\n    return user;\n  }\n  async _buildUser(signinResponse, verifySub) {\n    const logger2 = this._logger.create(\"_buildUser\");\n    const user = new User(signinResponse);\n    if (verifySub) {\n      if (verifySub !== user.profile.sub) {\n        logger2.debug(\"current user does not match user returned from signin. sub from signin:\", user.profile.sub);\n        throw new ErrorResponse({ ...signinResponse, error: \"login_required\" });\n      }\n      logger2.debug(\"current user matches user returned from signin\");\n    }\n    await this.storeUser(user);\n    logger2.debug(\"user stored\");\n    this._events.load(user);\n    return user;\n  }\n  /**\n   * Returns promise to trigger a redirect of the current window to the end session endpoint.\n   */\n  async signoutRedirect(args = {}) {\n    const logger2 = this._logger.create(\"signoutRedirect\");\n    const {\n      redirectMethod,\n      ...requestArgs\n    } = args;\n    const handle = await this._redirectNavigator.prepare({ redirectMethod });\n    await this._signoutStart({\n      request_type: \"so:r\",\n      post_logout_redirect_uri: this.settings.post_logout_redirect_uri,\n      ...requestArgs\n    }, handle);\n    logger2.info(\"success\");\n  }\n  /**\n   * Returns promise to process response from the end session endpoint.\n   */\n  async signoutRedirectCallback(url = window.location.href) {\n    const logger2 = this._logger.create(\"signoutRedirectCallback\");\n    const response = await this._signoutEnd(url);\n    logger2.info(\"success\");\n    return response;\n  }\n  /**\n   * Returns promise to trigger a redirect of a popup window window to the end session endpoint.\n   */\n  async signoutPopup(args = {}) {\n    const logger2 = this._logger.create(\"signoutPopup\");\n    const {\n      popupWindowFeatures,\n      popupWindowTarget,\n      ...requestArgs\n    } = args;\n    const url = this.settings.popup_post_logout_redirect_uri;\n    const handle = await this._popupNavigator.prepare({ popupWindowFeatures, popupWindowTarget });\n    await this._signout({\n      request_type: \"so:p\",\n      post_logout_redirect_uri: url,\n      // we're putting a dummy entry in here because we\n      // need a unique id from the state for notification\n      // to the parent window, which is necessary if we\n      // plan to return back to the client after signout\n      // and so we can close the popup after signout\n      state: url == null ? void 0 : {},\n      ...requestArgs\n    }, handle);\n    logger2.info(\"success\");\n  }\n  /**\n   * Returns promise to process response from the end session endpoint from a popup window.\n   */\n  async signoutPopupCallback(url = window.location.href, keepOpen = false) {\n    const logger2 = this._logger.create(\"signoutPopupCallback\");\n    await this._popupNavigator.callback(url, { keepOpen });\n    logger2.info(\"success\");\n  }\n  async _signout(args, handle) {\n    const navResponse = await this._signoutStart(args, handle);\n    return await this._signoutEnd(navResponse.url);\n  }\n  async _signoutStart(args = {}, handle) {\n    var _a;\n    const logger2 = this._logger.create(\"_signoutStart\");\n    try {\n      const user = await this._loadUser();\n      logger2.debug(\"loaded current user from storage\");\n      if (this.settings.revokeTokensOnSignout) {\n        await this._revokeInternal(user);\n      }\n      const id_token = args.id_token_hint || user && user.id_token;\n      if (id_token) {\n        logger2.debug(\"setting id_token_hint in signout request\");\n        args.id_token_hint = id_token;\n      }\n      await this.removeUser();\n      logger2.debug(\"user removed, creating signout request\");\n      const signoutRequest = await this._client.createSignoutRequest(args);\n      logger2.debug(\"got signout request\");\n      return await handle.navigate({\n        url: signoutRequest.url,\n        state: (_a = signoutRequest.state) == null ? void 0 : _a.id,\n        scriptOrigin: this.settings.iframeScriptOrigin\n      });\n    } catch (err) {\n      logger2.debug(\"error after preparing navigator, closing navigator window\");\n      handle.close();\n      throw err;\n    }\n  }\n  async _signoutEnd(url) {\n    const logger2 = this._logger.create(\"_signoutEnd\");\n    const signoutResponse = await this._client.processSignoutResponse(url);\n    logger2.debug(\"got signout response\");\n    return signoutResponse;\n  }\n  /**\n   * Returns promise to trigger a silent request (via an iframe) to the end session endpoint.\n   */\n  async signoutSilent(args = {}) {\n    var _a;\n    const logger2 = this._logger.create(\"signoutSilent\");\n    const {\n      silentRequestTimeoutInSeconds,\n      ...requestArgs\n    } = args;\n    const id_token_hint = this.settings.includeIdTokenInSilentSignout ? (_a = await this._loadUser()) == null ? void 0 : _a.id_token : void 0;\n    const url = this.settings.popup_post_logout_redirect_uri;\n    const handle = await this._iframeNavigator.prepare({ silentRequestTimeoutInSeconds });\n    await this._signout({\n      request_type: \"so:s\",\n      post_logout_redirect_uri: url,\n      id_token_hint,\n      ...requestArgs\n    }, handle);\n    logger2.info(\"success\");\n  }\n  /**\n   * Returns promise to notify the parent window of response from the end session endpoint.\n   */\n  async signoutSilentCallback(url = window.location.href) {\n    const logger2 = this._logger.create(\"signoutSilentCallback\");\n    await this._iframeNavigator.callback(url);\n    logger2.info(\"success\");\n  }\n  async revokeTokens(types) {\n    const user = await this._loadUser();\n    await this._revokeInternal(user, types);\n  }\n  async _revokeInternal(user, types = this.settings.revokeTokenTypes) {\n    const logger2 = this._logger.create(\"_revokeInternal\");\n    if (!user)\n      return;\n    const typesPresent = types.filter((type) => typeof user[type] === \"string\");\n    if (!typesPresent.length) {\n      logger2.debug(\"no need to revoke due to no token(s)\");\n      return;\n    }\n    for (const type of typesPresent) {\n      await this._client.revokeToken(\n        user[type],\n        // eslint-disable-line @typescript-eslint/no-non-null-assertion\n        type\n      );\n      logger2.info(`${type} revoked successfully`);\n      if (type !== \"access_token\") {\n        user[type] = null;\n      }\n    }\n    await this.storeUser(user);\n    logger2.debug(\"user stored\");\n    this._events.load(user);\n  }\n  /**\n   * Enables silent renew for the `UserManager`.\n   */\n  startSilentRenew() {\n    this._logger.create(\"startSilentRenew\");\n    void this._silentRenewService.start();\n  }\n  /**\n   * Disables silent renew for the `UserManager`.\n   */\n  stopSilentRenew() {\n    this._silentRenewService.stop();\n  }\n  get _userStoreKey() {\n    return `user:${this.settings.authority}:${this.settings.client_id}`;\n  }\n  async _loadUser() {\n    const logger2 = this._logger.create(\"_loadUser\");\n    const storageString = await this.settings.userStore.get(this._userStoreKey);\n    if (storageString) {\n      logger2.debug(\"user storageString loaded\");\n      return User.fromStorageString(storageString);\n    }\n    logger2.debug(\"no user storageString\");\n    return null;\n  }\n  async storeUser(user) {\n    const logger2 = this._logger.create(\"storeUser\");\n    if (user) {\n      logger2.debug(\"storing user\");\n      const storageString = user.toStorageString();\n      await this.settings.userStore.set(this._userStoreKey, storageString);\n    } else {\n      this._logger.debug(\"removing user\");\n      await this.settings.userStore.remove(this._userStoreKey);\n    }\n  }\n  /**\n   * Removes stale state entries in storage for incomplete authorize requests.\n   */\n  async clearStaleState() {\n    await this._client.clearStaleState();\n  }\n};\n\n// package.json\nvar version = \"2.4.0\";\n\n// src/Version.ts\nvar Version = version;\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  AccessTokenEvents,\n  CheckSessionIFrame,\n  ErrorResponse,\n  ErrorTimeout,\n  InMemoryWebStorage,\n  Log,\n  Logger,\n  MetadataService,\n  OidcClient,\n  OidcClientSettingsStore,\n  SessionMonitor,\n  SigninResponse,\n  SigninState,\n  SignoutResponse,\n  State,\n  User,\n  UserManager,\n  UserManagerSettingsStore,\n  Version,\n  WebStorageStateStore\n});\n//# sourceMappingURL=oidc-client-ts.js.map\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.readExpirationTimeInJwt = void 0;\nvar jwt_decode_1 = __importDefault(require(\"jwt-decode\"));\nvar assert_1 = require(\"tsafe/assert\");\n// Return undefined if token provided wasn't a JWT or if it hasn't an exp claim number\nfunction readExpirationTimeInJwt(token) {\n    var expirationTime;\n    try {\n        expirationTime = (0, jwt_decode_1.default)(token).exp * 1000;\n        (0, assert_1.assert)(typeof expirationTime === \"number\" && !isNaN(expirationTime));\n    }\n    catch (_a) {\n        return undefined;\n    }\n    return expirationTime;\n}\nexports.readExpirationTimeInJwt = readExpirationTimeInJwt;\n//# sourceMappingURL=readExpirationTimeInJwt.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.retrieveQueryParamFromUrl = exports.retrieveAllQueryParamStartingWithPrefixFromUrl = exports.addQueryParamToUrl = void 0;\nfunction addQueryParamToUrl(params) {\n    var url = params.url, name = params.name, value = params.value;\n    var newUrl = url;\n    var result = retrieveQueryParamFromUrl({\n        url: url,\n        name: name\n    });\n    if (result.wasPresent) {\n        newUrl = result.newUrl;\n    }\n    newUrl += \"\".concat(newUrl.includes(\"?\") ? \"&\" : newUrl.endsWith(\"?\") ? \"\" : \"?\").concat(name, \"=\").concat(encodeURIComponent(value));\n    return { newUrl: newUrl };\n}\nexports.addQueryParamToUrl = addQueryParamToUrl;\nfunction retrieveAllQueryParamStartingWithPrefixFromUrl(params) {\n    var url = params.url, prefix = params.prefix, doLeavePrefixInResults = params.doLeavePrefixInResults;\n    var _a = __read(url.split(\"?\"), 2), baseUrl = _a[0], _b = _a[1], locationSearch = _b === void 0 ? \"\" : _b;\n    var values = {};\n    var newLocationSearch = (function () {\n        var newLocationSearch = locationSearch\n            .replace(/^\\?/, \"\")\n            .split(\"&\")\n            .map(function (part) { return part.split(\"=\"); })\n            .filter(function (_a) {\n            var _b = __read(_a, 2), key = _b[0], value_i = _b[1];\n            return !key.startsWith(prefix)\n                ? true\n                : ((values[doLeavePrefixInResults ? key : key.substring(prefix.length)] =\n                    decodeURIComponent(value_i)),\n                    false);\n        })\n            .map(function (entry) { return entry.join(\"=\"); })\n            .join(\"&\");\n        newLocationSearch = newLocationSearch === \"\" ? \"\" : \"?\".concat(newLocationSearch);\n        return { newLocationSearch: newLocationSearch };\n    })().newLocationSearch;\n    return {\n        \"newUrl\": \"\".concat(baseUrl).concat(newLocationSearch),\n        values: values\n    };\n}\nexports.retrieveAllQueryParamStartingWithPrefixFromUrl = retrieveAllQueryParamStartingWithPrefixFromUrl;\nfunction retrieveQueryParamFromUrl(params) {\n    var url = params.url, name = params.name;\n    var _a = retrieveAllQueryParamStartingWithPrefixFromUrl({\n        url: url,\n        \"prefix\": name,\n        \"doLeavePrefixInResults\": true\n    }), newUrl = _a.newUrl, values = _a.values;\n    return name in values\n        ? {\n            \"wasPresent\": true,\n            newUrl: newUrl,\n            \"value\": values[name]\n        }\n        : {\n            \"wasPresent\": false\n        };\n}\nexports.retrieveQueryParamFromUrl = retrieveQueryParamFromUrl;\n//# sourceMappingURL=urlQueryParams.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fnv1aHashToHex = void 0;\nfunction fnv1aHashToHex(str) {\n    var hash = 2166136261;\n    for (var i = 0; i < str.length; i++) {\n        hash ^= str.charCodeAt(i);\n        hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n    }\n    return (hash >>> 0).toString(16); // Convert to unsigned 32-bit integer and then to hexadecimal\n}\nexports.fnv1aHashToHex = fnv1aHashToHex;\n//# sourceMappingURL=fnv1aHashToHex.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VoidDeferred = exports.Deferred = void 0;\nvar overwriteReadonlyProp_1 = require(\"tsafe/lab/overwriteReadonlyProp\");\nvar Deferred = /** @class */ (function () {\n    function Deferred() {\n        var _this = this;\n        this.isPending = true;\n        var resolve;\n        var reject;\n        this.pr = new Promise(function (resolve_, reject_) {\n            resolve = function (value) {\n                (0, overwriteReadonlyProp_1.overwriteReadonlyProp)(_this, \"isPending\", false);\n                resolve_(value);\n            };\n            reject = function (error) {\n                (0, overwriteReadonlyProp_1.overwriteReadonlyProp)(_this, \"isPending\", false);\n                reject_(error);\n            };\n        });\n        this.resolve = resolve;\n        this.reject = reject;\n    }\n    return Deferred;\n}());\nexports.Deferred = Deferred;\nvar VoidDeferred = /** @class */ (function (_super) {\n    __extends(VoidDeferred, _super);\n    function VoidDeferred() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return VoidDeferred;\n}(Deferred));\nexports.VoidDeferred = VoidDeferred;\n//# sourceMappingURL=Deferred.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeJwt = void 0;\nvar jwt_decode_1 = __importDefault(require(\"jwt-decode\"));\nexports.decodeJwt = jwt_decode_1.default;\n//# sourceMappingURL=decodeJwt.js.map","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getDownlinkAndRtt = void 0;\nvar assert_1 = require(\"tsafe/assert\");\nfunction getDownlinkAndRtt() {\n    var e_1, _a;\n    if (!(window.navigator instanceof Object)) {\n        return undefined;\n    }\n    var navigator = window.navigator;\n    try {\n        for (var _b = __values([\"connection\", \"mozConnection\", \"webkitConnection\"]), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var key = _c.value;\n            try {\n                var _d = navigator[key], downlink = _d.downlink, rtt = _d.rtt;\n                (0, assert_1.assert)(typeof downlink === \"number\");\n                (0, assert_1.assert)(typeof rtt === \"number\");\n                return { downlink: downlink, rtt: rtt };\n            }\n            catch (_e) { }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return undefined;\n}\nexports.getDownlinkAndRtt = getDownlinkAndRtt;\n//# sourceMappingURL=getDownlinkAndRtt.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createOidc = exports.OidcInitializationError = void 0;\nvar oidc_client_ts_1 = require(\"oidc-client-ts\");\nvar id_1 = require(\"tsafe/id\");\nvar readExpirationTimeInJwt_1 = require(\"./tools/readExpirationTimeInJwt\");\nvar assert_1 = require(\"tsafe/assert\");\nvar urlQueryParams_1 = require(\"./tools/urlQueryParams\");\nvar fnv1aHashToHex_1 = require(\"./tools/fnv1aHashToHex\");\nvar Deferred_1 = require(\"./tools/Deferred\");\nvar decodeJwt_1 = require(\"./tools/decodeJwt\");\nvar getDownlinkAndRtt_1 = require(\"./tools/getDownlinkAndRtt\");\nvar OidcInitializationError = /** @class */ (function (_super) {\n    __extends(OidcInitializationError, _super);\n    function OidcInitializationError(params) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, (function () {\n            switch (params.type) {\n                case \"server down\":\n                    return \"The OIDC server is down\";\n                case \"bad configuration\":\n                    return \"Bad configuration. Timed out after \".concat(params.timeoutDelayMs, \"ms\");\n                case \"unknown\":\n                    return params.cause.message;\n            }\n        })(), \n        // @ts-expect-error\n        { \"cause\": params.type === \"unknown\" ? params.cause : undefined }) || this;\n        _this.type = params.type;\n        Object.setPrototypeOf(_this, _newTarget.prototype);\n        return _this;\n    }\n    return OidcInitializationError;\n}(Error));\nexports.OidcInitializationError = OidcInitializationError;\nvar paramsToRetrieveFromSuccessfulLogin = [\"code\", \"state\", \"session_state\", \"iss\"];\n/** @see: https://github.com/garronej/oidc-spa#option-1-usage-without-involving-the-ui-framework */\nfunction createOidc(params) {\n    return __awaiter(this, void 0, void 0, function () {\n        var issuerUri, clientId, clientSecret, _a, transformUrlBeforeRedirect, extraQueryParamsOrGetter, publicUrl_params, decodedIdTokenSchema, getExtraQueryParams, publicUrl, configHash, configHashKey, oidcClientTsUserManager, lastPublicRoute, realPushState_1, hasLoginBeenCalled, login, initialTokens, common, error, initializationError, currentTokens, onTokenChanges, oidc;\n        var _this = this;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    issuerUri = params.issuerUri, clientId = params.clientId, clientSecret = params.clientSecret, _a = params.transformUrlBeforeRedirect, transformUrlBeforeRedirect = _a === void 0 ? function (url) { return url; } : _a, extraQueryParamsOrGetter = params.extraQueryParams, publicUrl_params = params.publicUrl, decodedIdTokenSchema = params.decodedIdTokenSchema;\n                    getExtraQueryParams = (function () {\n                        if (typeof extraQueryParamsOrGetter === \"function\") {\n                            return extraQueryParamsOrGetter;\n                        }\n                        if (extraQueryParamsOrGetter !== undefined) {\n                            return function () { return extraQueryParamsOrGetter; };\n                        }\n                        return undefined;\n                    })();\n                    publicUrl = (function () {\n                        if (publicUrl_params === undefined) {\n                            return window.location.origin;\n                        }\n                        return (publicUrl_params.startsWith(\"http\")\n                            ? publicUrl_params\n                            : \"\".concat(window.location.origin).concat(publicUrl_params)).replace(/\\/$/, \"\");\n                    })();\n                    configHash = (0, fnv1aHashToHex_1.fnv1aHashToHex)(\"\".concat(issuerUri, \" \").concat(clientId));\n                    configHashKey = \"configHash\";\n                    oidcClientTsUserManager = new oidc_client_ts_1.UserManager({\n                        \"authority\": issuerUri,\n                        \"client_id\": clientId,\n                        \"client_secret\": clientSecret,\n                        \"redirect_uri\": \"\" /* provided when calling login */,\n                        \"response_type\": \"code\",\n                        \"scope\": \"openid profile\",\n                        \"automaticSilentRenew\": false,\n                        \"silent_redirect_uri\": \"\".concat(publicUrl, \"/silent-sso.html?\").concat(configHashKey, \"=\").concat(configHash)\n                    });\n                    lastPublicRoute = undefined;\n                    {\n                        realPushState_1 = history.pushState.bind(history);\n                        history.pushState = function pushState() {\n                            var args = [];\n                            for (var _i = 0; _i < arguments.length; _i++) {\n                                args[_i] = arguments[_i];\n                            }\n                            lastPublicRoute = window.location.href;\n                            return realPushState_1.apply(void 0, __spreadArray([], __read(args), false));\n                        };\n                    }\n                    hasLoginBeenCalled = false;\n                    login = function (_a) {\n                        var doesCurrentHrefRequiresAuth = _a.doesCurrentHrefRequiresAuth, extraQueryParams = _a.extraQueryParams;\n                        return __awaiter(_this, void 0, void 0, function () {\n                            function URL() {\n                                var args = [];\n                                for (var _i = 0; _i < arguments.length; _i++) {\n                                    args[_i] = arguments[_i];\n                                }\n                                var urlInstance = new (URL_real.bind.apply(URL_real, __spreadArray([void 0], __read(args), false)))();\n                                return new Proxy(urlInstance, {\n                                    \"get\": function (target, prop) {\n                                        if (prop === \"href\") {\n                                            var url_1 = urlInstance.href;\n                                            Object.entries(__assign(__assign({}, getExtraQueryParams === null || getExtraQueryParams === void 0 ? void 0 : getExtraQueryParams()), extraQueryParams)).forEach(function (_a) {\n                                                var _b = __read(_a, 2), name = _b[0], value = _b[1];\n                                                return (url_1 = (0, urlQueryParams_1.addQueryParamToUrl)({\n                                                    url: url_1,\n                                                    name: name,\n                                                    value: value\n                                                }).newUrl);\n                                            });\n                                            url_1 = transformUrlBeforeRedirect(url_1);\n                                            return url_1;\n                                        }\n                                        //@ts-expect-error\n                                        return target[prop];\n                                    }\n                                });\n                            }\n                            var URL_real, redirect_uri, callback_1;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        //NOTE: We know there is a extraQueryParameter option but it doesn't allow\n                                        // to control the encoding so we have to highjack global URL Class that is\n                                        // used internally by oidc-client-ts. It's save to do so since this is the\n                                        // last thing that will be done before the redirect.\n                                        if (hasLoginBeenCalled) {\n                                            return [2 /*return*/, new Promise(function () { })];\n                                        }\n                                        hasLoginBeenCalled = true;\n                                        URL_real = window.URL;\n                                        Object.defineProperty(window, \"URL\", { \"value\": URL });\n                                        redirect_uri = (0, urlQueryParams_1.addQueryParamToUrl)({\n                                            \"url\": window.location.href,\n                                            \"name\": configHashKey,\n                                            \"value\": configHash\n                                        }).newUrl;\n                                        if (doesCurrentHrefRequiresAuth) {\n                                            callback_1 = function () {\n                                                if (document.visibilityState === \"visible\") {\n                                                    document.removeEventListener(\"visibilitychange\", callback_1);\n                                                    if (lastPublicRoute !== undefined) {\n                                                        window.location.href = lastPublicRoute;\n                                                    }\n                                                    else {\n                                                        window.history.back();\n                                                    }\n                                                }\n                                            };\n                                            document.addEventListener(\"visibilitychange\", callback_1);\n                                        }\n                                        return [4 /*yield*/, oidcClientTsUserManager.signinRedirect({\n                                                redirect_uri: redirect_uri,\n                                                \"redirectMethod\": doesCurrentHrefRequiresAuth ? \"replace\" : \"assign\"\n                                            })];\n                                    case 1:\n                                        _b.sent();\n                                        return [2 /*return*/, new Promise(function () { })];\n                                }\n                            });\n                        });\n                    };\n                    return [4 /*yield*/, (function getUser() {\n                            return __awaiter(this, void 0, void 0, function () {\n                                var url, result, result, loginSuccessUrl, paramsToRetrieveFromSuccessfulLogin_1, paramsToRetrieveFromSuccessfulLogin_1_1, name_1, result, oidcClientTsUser, _a, oidcClientTsUser, error_1, dLoginSuccessUrl_1, timeoutDelayMs_1, timeout_1, listener_1, loginSuccessUrl, oidcClientTsUser;\n                                var e_1, _b;\n                                return __generator(this, function (_c) {\n                                    switch (_c.label) {\n                                        case 0:\n                                            url = window.location.href;\n                                            {\n                                                result = (0, urlQueryParams_1.retrieveQueryParamFromUrl)({ \"name\": configHashKey, url: url });\n                                                if (!result.wasPresent || result.value !== configHash) {\n                                                    return [3 /*break*/, 5];\n                                                }\n                                                url = result.newUrl;\n                                            }\n                                            {\n                                                result = (0, urlQueryParams_1.retrieveQueryParamFromUrl)({ \"name\": \"error\", url: url });\n                                                if (result.wasPresent) {\n                                                    throw new Error(\"OIDC error: \".concat(result.value));\n                                                }\n                                            }\n                                            loginSuccessUrl = \"https://dummy.com\";\n                                            try {\n                                                for (paramsToRetrieveFromSuccessfulLogin_1 = __values(paramsToRetrieveFromSuccessfulLogin), paramsToRetrieveFromSuccessfulLogin_1_1 = paramsToRetrieveFromSuccessfulLogin_1.next(); !paramsToRetrieveFromSuccessfulLogin_1_1.done; paramsToRetrieveFromSuccessfulLogin_1_1 = paramsToRetrieveFromSuccessfulLogin_1.next()) {\n                                                    name_1 = paramsToRetrieveFromSuccessfulLogin_1_1.value;\n                                                    result = (0, urlQueryParams_1.retrieveQueryParamFromUrl)({ name: name_1, url: url });\n                                                    if (!result.wasPresent) {\n                                                        if (name_1 === \"iss\") {\n                                                            continue;\n                                                        }\n                                                        throw new Error(\"Missing query param: \".concat(name_1));\n                                                    }\n                                                    loginSuccessUrl = (0, urlQueryParams_1.addQueryParamToUrl)({\n                                                        \"url\": loginSuccessUrl,\n                                                        \"name\": name_1,\n                                                        \"value\": result.value\n                                                    }).newUrl;\n                                                    url = result.newUrl;\n                                                }\n                                            }\n                                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                                            finally {\n                                                try {\n                                                    if (paramsToRetrieveFromSuccessfulLogin_1_1 && !paramsToRetrieveFromSuccessfulLogin_1_1.done && (_b = paramsToRetrieveFromSuccessfulLogin_1.return)) _b.call(paramsToRetrieveFromSuccessfulLogin_1);\n                                                }\n                                                finally { if (e_1) throw e_1.error; }\n                                            }\n                                            window.history.pushState(null, \"\", url);\n                                            oidcClientTsUser = undefined;\n                                            _c.label = 1;\n                                        case 1:\n                                            _c.trys.push([1, 3, , 4]);\n                                            return [4 /*yield*/, oidcClientTsUserManager.signinRedirectCallback(loginSuccessUrl)];\n                                        case 2:\n                                            oidcClientTsUser = _c.sent();\n                                            return [3 /*break*/, 4];\n                                        case 3:\n                                            _a = _c.sent();\n                                            //NOTE: The user has likely pressed the back button just after logging in.\n                                            return [2 /*return*/, undefined];\n                                        case 4: return [2 /*return*/, oidcClientTsUser];\n                                        case 5: return [4 /*yield*/, oidcClientTsUserManager.getUser()];\n                                        case 6:\n                                            oidcClientTsUser = _c.sent();\n                                            if (oidcClientTsUser === null) {\n                                                return [3 /*break*/, 11];\n                                            }\n                                            _c.label = 7;\n                                        case 7:\n                                            _c.trys.push([7, 9, , 10]);\n                                            return [4 /*yield*/, oidcClientTsUserManager.signinSilent()];\n                                        case 8:\n                                            _c.sent();\n                                            return [3 /*break*/, 10];\n                                        case 9:\n                                            error_1 = _c.sent();\n                                            (0, assert_1.assert)(error_1 instanceof Error);\n                                            if (error_1.message === \"Failed to fetch\") {\n                                                throw new OidcInitializationError({ \"type\": \"server down\" });\n                                            }\n                                            return [2 /*return*/, undefined];\n                                        case 10: return [2 /*return*/, oidcClientTsUser];\n                                        case 11:\n                                            dLoginSuccessUrl_1 = new Deferred_1.Deferred();\n                                            timeoutDelayMs_1 = (function () {\n                                                var downlinkAndRtt = (0, getDownlinkAndRtt_1.getDownlinkAndRtt)();\n                                                if (downlinkAndRtt === undefined) {\n                                                    return 5000;\n                                                }\n                                                var downlink = downlinkAndRtt.downlink, rtt = downlinkAndRtt.rtt;\n                                                // Base delay is the minimum delay we're willing to tolerate\n                                                var baseDelay = 3000;\n                                                // Calculate dynamic delay based on RTT and downlink\n                                                // Add 1 to downlink to avoid division by zero\n                                                var dynamicDelay = rtt * 2.5 + 3000 / (downlink + 1);\n                                                return Math.max(baseDelay, dynamicDelay);\n                                            })();\n                                            timeout_1 = setTimeout(function () {\n                                                return dLoginSuccessUrl_1.reject(new OidcInitializationError({\n                                                    \"type\": \"bad configuration\",\n                                                    timeoutDelayMs: timeoutDelayMs_1\n                                                }));\n                                            }, timeoutDelayMs_1);\n                                            listener_1 = function (event) {\n                                                var e_2, _a;\n                                                if (typeof event.data !== \"string\") {\n                                                    return;\n                                                }\n                                                var url = event.data;\n                                                {\n                                                    var result = void 0;\n                                                    try {\n                                                        result = (0, urlQueryParams_1.retrieveQueryParamFromUrl)({ \"name\": configHashKey, url: url });\n                                                    }\n                                                    catch (_b) {\n                                                        // This could possibly happen if url is not a valid url.\n                                                        return;\n                                                    }\n                                                    if (!result.wasPresent || result.value !== configHash) {\n                                                        return;\n                                                    }\n                                                }\n                                                clearTimeout(timeout_1);\n                                                window.removeEventListener(\"message\", listener_1);\n                                                {\n                                                    var result = (0, urlQueryParams_1.retrieveQueryParamFromUrl)({ \"name\": \"error\", url: url });\n                                                    if (result.wasPresent) {\n                                                        dLoginSuccessUrl_1.resolve(undefined);\n                                                        return;\n                                                    }\n                                                }\n                                                var loginSuccessUrl = \"https://dummy.com\";\n                                                try {\n                                                    for (var paramsToRetrieveFromSuccessfulLogin_2 = __values(paramsToRetrieveFromSuccessfulLogin), paramsToRetrieveFromSuccessfulLogin_2_1 = paramsToRetrieveFromSuccessfulLogin_2.next(); !paramsToRetrieveFromSuccessfulLogin_2_1.done; paramsToRetrieveFromSuccessfulLogin_2_1 = paramsToRetrieveFromSuccessfulLogin_2.next()) {\n                                                        var name_2 = paramsToRetrieveFromSuccessfulLogin_2_1.value;\n                                                        var result = (0, urlQueryParams_1.retrieveQueryParamFromUrl)({ name: name_2, url: url });\n                                                        if (!result.wasPresent) {\n                                                            if (name_2 === \"iss\") {\n                                                                continue;\n                                                            }\n                                                            throw new Error(\"Missing query param: \".concat(name_2));\n                                                        }\n                                                        loginSuccessUrl = (0, urlQueryParams_1.addQueryParamToUrl)({\n                                                            \"url\": loginSuccessUrl,\n                                                            \"name\": name_2,\n                                                            \"value\": result.value\n                                                        }).newUrl;\n                                                    }\n                                                }\n                                                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                                                finally {\n                                                    try {\n                                                        if (paramsToRetrieveFromSuccessfulLogin_2_1 && !paramsToRetrieveFromSuccessfulLogin_2_1.done && (_a = paramsToRetrieveFromSuccessfulLogin_2.return)) _a.call(paramsToRetrieveFromSuccessfulLogin_2);\n                                                    }\n                                                    finally { if (e_2) throw e_2.error; }\n                                                }\n                                                dLoginSuccessUrl_1.resolve(loginSuccessUrl);\n                                            };\n                                            window.addEventListener(\"message\", listener_1, false);\n                                            oidcClientTsUserManager\n                                                .signinSilent({ \"silentRequestTimeoutInSeconds\": timeoutDelayMs_1 / 1000 })\n                                                .catch(function (error) {\n                                                if (error.message === \"Failed to fetch\") {\n                                                    clearTimeout(timeout_1);\n                                                    dLoginSuccessUrl_1.reject(new OidcInitializationError({ \"type\": \"server down\" }));\n                                                }\n                                            });\n                                            return [4 /*yield*/, dLoginSuccessUrl_1.pr];\n                                        case 12:\n                                            loginSuccessUrl = _c.sent();\n                                            if (loginSuccessUrl === undefined) {\n                                                return [3 /*break*/, 14];\n                                            }\n                                            return [4 /*yield*/, oidcClientTsUserManager.signinRedirectCallback(loginSuccessUrl)];\n                                        case 13:\n                                            oidcClientTsUser = _c.sent();\n                                            return [2 /*return*/, oidcClientTsUser];\n                                        case 14: return [2 /*return*/, undefined];\n                                    }\n                                });\n                            });\n                        })().then(function (oidcClientTsUser) {\n                            if (oidcClientTsUser === undefined) {\n                                return undefined;\n                            }\n                            var tokens = oidcClientTsUserToTokens({\n                                oidcClientTsUser: oidcClientTsUser,\n                                decodedIdTokenSchema: decodedIdTokenSchema\n                            });\n                            if (tokens.refreshTokenExpirationTime < tokens.accessTokenExpirationTime) {\n                                console.warn([\n                                    \"The OIDC refresh token shorter than the one of the access token.\",\n                                    \"This is very unusual and probably a misconfiguration.\",\n                                    \"Check your oidc server configuration for \".concat(clientId, \" \").concat(issuerUri)\n                                ].join(\" \"));\n                            }\n                            return tokens;\n                        }, function (error) {\n                            (0, assert_1.assert)(error instanceof Error);\n                            return error;\n                        })];\n                case 1:\n                    initialTokens = _b.sent();\n                    common = {\n                        \"params\": {\n                            issuerUri: issuerUri,\n                            clientId: clientId\n                        }\n                    };\n                    if (initialTokens instanceof Error) {\n                        error = initialTokens;\n                        initializationError = error instanceof OidcInitializationError\n                            ? error\n                            : new OidcInitializationError({\n                                \"type\": \"unknown\",\n                                \"cause\": error\n                            });\n                        console.error(\"OIDC initilization error: \".concat(initializationError.message));\n                        return [2 /*return*/, (0, id_1.id)(__assign(__assign({}, common), { \"isUserLoggedIn\": false, \"login\": function () { return __awaiter(_this, void 0, void 0, function () {\n                                    return __generator(this, function (_a) {\n                                        alert(\"Authentication is currently unavailable. Please try again later.\");\n                                        return [2 /*return*/, new Promise(function () { })];\n                                    });\n                                }); }, initializationError: initializationError }))];\n                    }\n                    if (initialTokens === undefined) {\n                        return [2 /*return*/, (0, id_1.id)(__assign(__assign({}, common), { \"isUserLoggedIn\": false, login: login, \"initializationError\": undefined }))];\n                    }\n                    currentTokens = initialTokens;\n                    onTokenChanges = new Set();\n                    oidc = (0, id_1.id)(__assign(__assign({}, common), { \"isUserLoggedIn\": true, \"getTokens\": function () { return currentTokens; }, \"logout\": function (params) { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, oidcClientTsUserManager.signoutRedirect({\n                                            \"post_logout_redirect_uri\": (function () {\n                                                switch (params.redirectTo) {\n                                                    case \"current page\":\n                                                        return window.location.href;\n                                                    case \"home\":\n                                                        return publicUrl;\n                                                    case \"specific url\":\n                                                        return params.url;\n                                                }\n                                                (0, assert_1.assert)(false);\n                                            })()\n                                        })];\n                                    case 1:\n                                        _a.sent();\n                                        return [2 /*return*/, new Promise(function () { })];\n                                }\n                            });\n                        }); }, \"renewTokens\": function () { return __awaiter(_this, void 0, void 0, function () {\n                            var oidcClientTsUser, decodedIdTokenPropertyDescriptor;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4 /*yield*/, oidcClientTsUserManager.signinSilent()];\n                                    case 1:\n                                        oidcClientTsUser = _a.sent();\n                                        (0, assert_1.assert)(oidcClientTsUser !== null);\n                                        decodedIdTokenPropertyDescriptor = Object.getOwnPropertyDescriptor(currentTokens, \"decodedIdToken\");\n                                        (0, assert_1.assert)(decodedIdTokenPropertyDescriptor !== undefined);\n                                        currentTokens = oidcClientTsUserToTokens({\n                                            oidcClientTsUser: oidcClientTsUser,\n                                            decodedIdTokenSchema: decodedIdTokenSchema\n                                        });\n                                        // NOTE: We do that to preserve the cache and the object reference.\n                                        Object.defineProperty(currentTokens, \"decodedIdToken\", decodedIdTokenPropertyDescriptor);\n                                        onTokenChanges.forEach(function (onTokenChange) { return onTokenChange(); });\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); }, \"subscribeToTokensChange\": function (onTokenChange) {\n                            onTokenChanges.add(onTokenChange);\n                            return {\n                                \"unsubscribe\": function () {\n                                    onTokenChanges.delete(onTokenChange);\n                                }\n                            };\n                        } }));\n                    (function scheduleAutomaticRenew() {\n                        var _this = this;\n                        var msBeforeExpiration = Math.min(currentTokens.accessTokenExpirationTime, currentTokens.refreshTokenExpirationTime) -\n                            Date.now();\n                        setTimeout(function () { return __awaiter(_this, void 0, void 0, function () {\n                            var _a;\n                            return __generator(this, function (_b) {\n                                switch (_b.label) {\n                                    case 0:\n                                        _b.trys.push([0, 2, , 4]);\n                                        return [4 /*yield*/, oidc.renewTokens()];\n                                    case 1:\n                                        _b.sent();\n                                        return [3 /*break*/, 4];\n                                    case 2:\n                                        _a = _b.sent();\n                                        return [4 /*yield*/, login({ \"doesCurrentHrefRequiresAuth\": true })];\n                                    case 3:\n                                        _b.sent();\n                                        return [3 /*break*/, 4];\n                                    case 4:\n                                        scheduleAutomaticRenew();\n                                        return [2 /*return*/];\n                                }\n                            });\n                        }); }, msBeforeExpiration - /* min validity in seconds */ 25 * 1000);\n                    })();\n                    return [2 /*return*/, oidc];\n            }\n        });\n    });\n}\nexports.createOidc = createOidc;\nfunction oidcClientTsUserToTokens(params) {\n    var oidcClientTsUser = params.oidcClientTsUser, decodedIdTokenSchema = params.decodedIdTokenSchema;\n    var accessToken = oidcClientTsUser.access_token;\n    var accessTokenExpirationTime = (function () {\n        read_from_metadata: {\n            var expires_at = oidcClientTsUser.expires_at;\n            if (expires_at === undefined) {\n                break read_from_metadata;\n            }\n            return expires_at * 1000;\n        }\n        read_from_jwt: {\n            var expirationTime = (0, readExpirationTimeInJwt_1.readExpirationTimeInJwt)(accessToken);\n            if (expirationTime === undefined) {\n                break read_from_jwt;\n            }\n            return expirationTime;\n        }\n        (0, assert_1.assert)(false, \"Failed to get access token expiration time\");\n    })();\n    var refreshToken = oidcClientTsUser.refresh_token;\n    (0, assert_1.assert)(refreshToken !== undefined, \"No refresh token provided by the oidc server\");\n    var refreshTokenExpirationTime = (function () {\n        read_from_jwt: {\n            var expirationTime = (0, readExpirationTimeInJwt_1.readExpirationTimeInJwt)(refreshToken);\n            if (expirationTime === undefined) {\n                break read_from_jwt;\n            }\n            return expirationTime;\n        }\n        (0, assert_1.assert)(false, \"Failed to get refresh token expiration time\");\n    })();\n    var idToken = oidcClientTsUser.id_token;\n    (0, assert_1.assert)(idToken !== undefined, \"No id token provided by the oidc server\");\n    var tokens = {\n        accessToken: accessToken,\n        accessTokenExpirationTime: accessTokenExpirationTime,\n        refreshToken: refreshToken,\n        refreshTokenExpirationTime: refreshTokenExpirationTime,\n        idToken: idToken,\n        \"decodedIdToken\": null\n    };\n    var cache = undefined;\n    Object.defineProperty(tokens, \"decodedIdToken\", {\n        \"get\": function () {\n            if (cache !== undefined && cache.idToken === this.idToken) {\n                return cache.decodedIdToken;\n            }\n            var decodedIdToken = (0, decodeJwt_1.decodeJwt)(this.idToken);\n            if (decodedIdTokenSchema !== undefined) {\n                decodedIdToken = decodedIdTokenSchema.parse(decodedIdToken);\n            }\n            cache = {\n                \"idToken\": this.idToken,\n                decodedIdToken: decodedIdToken\n            };\n            return decodedIdToken;\n        },\n        \"configurable\": true,\n        \"enumerable\": true\n    });\n    return tokens;\n}\n//# sourceMappingURL=oidc.js.map","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useGuaranteedMemo = void 0;\nvar react_1 = require(\"react\");\nfunction useGuaranteedMemo(fn, deps) {\n    var ref = (0, react_1.useRef)();\n    if (!ref.current ||\n        deps.length !== ref.current.prevDeps.length ||\n        ref.current.prevDeps.map(function (v, i) { return v === deps[i]; }).indexOf(false) >= 0) {\n        ref.current = {\n            \"v\": fn(),\n            \"prevDeps\": __spreadArray([], __read(deps), false)\n        };\n    }\n    return ref.current.v;\n}\nexports.useGuaranteedMemo = useGuaranteedMemo;\n//# sourceMappingURL=useGuaranteedMemo.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createReactOidc = void 0;\nvar jsx_runtime_1 = require(\"react/jsx-runtime\");\nvar react_1 = require(\"react\");\nvar oidc_1 = require(\"./oidc\");\nvar assert_1 = require(\"tsafe/assert\");\nvar id_1 = require(\"tsafe/id\");\nvar useGuaranteedMemo_1 = require(\"./tools/powerhooks/useGuaranteedMemo\");\nvar oidcContext = (0, react_1.createContext)(undefined);\n/** @see: https://github.com/garronej/oidc-spa#option-2-usage-directly-within-react */\nfunction createReactOidc(params) {\n    var prOidc = (0, oidc_1.createOidc)(params);\n    var decodedIdTokenSchema = params.decodedIdTokenSchema;\n    function OidcProvider(props) {\n        var children = props.children, fallback = props.fallback;\n        var _a = __read((0, react_1.useState)(undefined), 2), oidc = _a[0], setOidc = _a[1];\n        (0, react_1.useEffect)(function () {\n            prOidc.then(setOidc);\n        }, []);\n        if (oidc === undefined) {\n            return (0, jsx_runtime_1.jsx)(jsx_runtime_1.Fragment, { children: fallback === undefined ? null : fallback });\n        }\n        return ((0, jsx_runtime_1.jsx)(oidcContext.Provider, { value: { oidc: oidc, decodedIdTokenSchema: decodedIdTokenSchema }, children: children }));\n    }\n    function useOidc(params) {\n        var _a = (params !== null && params !== void 0 ? params : {}).assertUserLoggedIn, assertUserLoggedIn = _a === void 0 ? false : _a;\n        var _b = (function useClosure() {\n            var context = (0, react_1.useContext)(oidcContext);\n            (0, assert_1.assert)(context !== undefined, \"You must use useOidc inside a OidcProvider\");\n            return context;\n        })(), oidc = _b.oidc, decodedIdTokenSchema_context = _b.decodedIdTokenSchema;\n        var _c = __read((0, react_1.useReducer)(function () { return []; }, []), 2), forceUpdate = _c[1];\n        (0, react_1.useEffect)(function () {\n            if (!oidc.isUserLoggedIn) {\n                return;\n            }\n            var unsubscribe = oidc.subscribeToTokensChange(forceUpdate).unsubscribe;\n            return unsubscribe;\n        }, [oidc]);\n        if (assertUserLoggedIn && !oidc.isUserLoggedIn) {\n            throw new Error(\"The user must be logged in to use this hook (assertUserLoggedIn was set to true)\");\n        }\n        var oidcTokens = (function useClosure() {\n            var tokens = oidc.isUserLoggedIn ? oidc.getTokens() : undefined;\n            var oidcTokens = (0, useGuaranteedMemo_1.useGuaranteedMemo)(function () {\n                if (tokens === undefined) {\n                    return undefined;\n                }\n                var oidcTokens = {\n                    \"accessToken\": tokens.accessToken,\n                    \"accessTokenExpirationTime\": tokens.accessTokenExpirationTime,\n                    \"idToken\": tokens.idToken,\n                    \"refreshToken\": tokens.refreshToken,\n                    \"refreshTokenExpirationTime\": tokens.refreshTokenExpirationTime,\n                    \"decodedIdToken\": null\n                };\n                var cache = undefined;\n                Object.defineProperty(oidcTokens, \"decodedIdToken\", {\n                    \"get\": function () {\n                        if (cache !== undefined) {\n                            return cache.decodedIdToken;\n                        }\n                        var decodedIdToken = tokens.decodedIdToken;\n                        if (decodedIdTokenSchema !== undefined &&\n                            decodedIdTokenSchema !== decodedIdTokenSchema_context) {\n                            decodedIdToken = decodedIdTokenSchema.parse(decodedIdToken);\n                        }\n                        cache = { decodedIdToken: decodedIdToken };\n                        return decodedIdToken;\n                    }\n                });\n                return oidcTokens;\n            }, [\n                tokens === null || tokens === void 0 ? void 0 : tokens.accessToken,\n                tokens === null || tokens === void 0 ? void 0 : tokens.accessTokenExpirationTime,\n                tokens === null || tokens === void 0 ? void 0 : tokens.idToken,\n                tokens === null || tokens === void 0 ? void 0 : tokens.refreshToken,\n                tokens === null || tokens === void 0 ? void 0 : tokens.refreshTokenExpirationTime\n            ]);\n            return { oidcTokens: oidcTokens };\n        })().oidcTokens;\n        var common = {\n            \"params\": oidc.params\n        };\n        return oidc.isUserLoggedIn\n            ? (0, id_1.id)(((0, assert_1.assert)(oidcTokens !== undefined), __assign(__assign({}, common), { \"isUserLoggedIn\": true, oidcTokens: oidcTokens, \"logout\": oidc.logout, \"renewTokens\": oidc.renewTokens })))\n            : (0, id_1.id)(__assign(__assign({}, common), { \"isUserLoggedIn\": false, \"login\": oidc.login, \"initializationError\": oidc.initializationError }));\n    }\n    return { OidcProvider: OidcProvider, useOidc: useOidc, prOidc: prOidc };\n}\nexports.createReactOidc = createReactOidc;\n//# sourceMappingURL=react.js.map","var util;\n(function (util) {\n    util.assertEqual = (val) => val;\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array\n            .map((val) => (typeof val === \"string\" ? `'${val}'` : val))\n            .join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nvar objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nconst ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then &&\n                typeof data.then === \"function\" &&\n                data.catch &&\n                typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n\nconst ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nconst quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nclass ZodError extends Error {\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    get errors() {\n        return this.issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n                fieldErrors[sub.path[0]].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `smaller than or equal to`\n                        : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\n\nlet overrideErrorMap = errorMap;\nfunction setErrorMap(map) {\n    overrideErrorMap = map;\n}\nfunction getErrorMap() {\n    return overrideErrorMap;\n}\n\nconst makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: issueData.message || errorMessage,\n    };\n};\nconst EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap,\n            ctx.schemaErrorMap,\n            getErrorMap(),\n            errorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nclass ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            syncPairs.push({\n                key: await pair.key,\n                value: await pair.value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" &&\n                (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nconst INVALID = Object.freeze({\n    status: \"aborted\",\n});\nconst DIRTY = (value) => ({ status: \"dirty\", value });\nconst OK = (value) => ({ status: \"valid\", value });\nconst isAborted = (x) => x.status === \"aborted\";\nconst isDirty = (x) => x.status === \"dirty\";\nconst isValid = (x) => x.status === \"valid\";\nconst isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n\nvar errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message === null || message === void 0 ? void 0 : message.message;\n})(errorUtil || (errorUtil = {}));\n\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (this._key instanceof Array) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        if (typeof ctx.data === \"undefined\") {\n            return { message: required_error !== null && required_error !== void 0 ? required_error : ctx.defaultError };\n        }\n        return { message: invalid_type_error !== null && invalid_type_error !== void 0 ? invalid_type_error : ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nclass ZodType {\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n    }\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        var _a;\n        const ctx = {\n            common: {\n                issues: [],\n                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n                async: true,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult)\n            ? maybeAsyncResult\n            : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\"\n                    ? refinementData(val, ctx)\n                    : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this, this._def);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[a-z][a-z0-9]*$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_+-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\nconst ipv4Regex = /^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/;\nconst ipv6Regex = /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\n// Adapted from https://stackoverflow.com/a/3143231\nconst datetimeRegex = (args) => {\n    if (args.precision) {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${args.precision}}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${args.precision}}Z$`);\n        }\n    }\n    else if (args.precision === 0) {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}Z$`);\n        }\n    }\n    else {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?Z$`);\n        }\n    }\n};\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nclass ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            }\n            //\n            );\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch (_a) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        var _a;\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options === null || options === void 0 ? void 0 : options.position,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * @deprecated Use z.string().min(1) instead.\n     * @see {@link ZodString.min}\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    var _a;\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / Math.pow(10, decCount);\n}\nclass ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" ||\n            (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null, min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" ||\n                ch.kind === \"int\" ||\n                ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = BigInt(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.bigint,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    var _a;\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nclass ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nclass ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nclass ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nclass ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        return (this._cached = { shape, keys });\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever &&\n            this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") ;\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    syncPairs.push({\n                        key,\n                        value: await pair.value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        var _a, _b, _c, _d;\n                        const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        util.objectKeys(mask).forEach((key) => {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return Object.keys(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else {\n        return null;\n    }\n};\nclass ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util\n            .objectKeys(a)\n            .filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date &&\n        bType === ZodParsedType.date &&\n        +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nclass ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\nclass ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nclass ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nclass ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nclass ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args\n                    .parseAsync(args, params)\n                    .catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args\n                ? args\n                : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nclass ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nclass ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nclass ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (this._def.values.indexOf(input.data) === -1) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values) {\n        return ZodEnum.create(values);\n    }\n    exclude(values) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)));\n    }\n}\nZodEnum.create = createZodEnum;\nclass ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string &&\n            ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (nativeEnumValues.indexOf(input.data) === -1) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nclass ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise &&\n            ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise\n            ? ctx.data\n            : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nclass ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.issues.length) {\n                return {\n                    status: \"dirty\",\n                    value: ctx.data,\n                };\n            }\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then((processed) => {\n                    return this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                });\n            }\n            else {\n                return this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc\n            // effect: RefinementEffect<any>\n            ) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return base;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((base) => {\n                    if (!isValid(base))\n                        return base;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nclass ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\"\n            ? params.default\n            : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nclass ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nconst BRAND = Symbol(\"zod_brand\");\nclass ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nclass ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nclass ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        if (isValid(result)) {\n            result.value = Object.freeze(result.value);\n        }\n        return result;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\nconst custom = (check, params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) => {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            var _a, _b;\n            if (!check(data)) {\n                const p = typeof params === \"function\"\n                    ? params(data)\n                    : typeof params === \"string\"\n                        ? { message: params }\n                        : params;\n                const _fatal = (_b = (_a = p.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                const p2 = typeof p === \"string\" ? { message: p } : p;\n                ctx.addIssue({ code: \"custom\", ...p2, fatal: _fatal });\n            }\n        });\n    return ZodAny.create();\n};\nconst late = {\n    object: ZodObject.lazycreate,\n};\nvar ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nconst coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nconst NEVER = INVALID;\n\nvar z = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    defaultErrorMap: errorMap,\n    setErrorMap: setErrorMap,\n    getErrorMap: getErrorMap,\n    makeIssue: makeIssue,\n    EMPTY_PATH: EMPTY_PATH,\n    addIssueToContext: addIssueToContext,\n    ParseStatus: ParseStatus,\n    INVALID: INVALID,\n    DIRTY: DIRTY,\n    OK: OK,\n    isAborted: isAborted,\n    isDirty: isDirty,\n    isValid: isValid,\n    isAsync: isAsync,\n    get util () { return util; },\n    get objectUtil () { return objectUtil; },\n    ZodParsedType: ZodParsedType,\n    getParsedType: getParsedType,\n    ZodType: ZodType,\n    ZodString: ZodString,\n    ZodNumber: ZodNumber,\n    ZodBigInt: ZodBigInt,\n    ZodBoolean: ZodBoolean,\n    ZodDate: ZodDate,\n    ZodSymbol: ZodSymbol,\n    ZodUndefined: ZodUndefined,\n    ZodNull: ZodNull,\n    ZodAny: ZodAny,\n    ZodUnknown: ZodUnknown,\n    ZodNever: ZodNever,\n    ZodVoid: ZodVoid,\n    ZodArray: ZodArray,\n    ZodObject: ZodObject,\n    ZodUnion: ZodUnion,\n    ZodDiscriminatedUnion: ZodDiscriminatedUnion,\n    ZodIntersection: ZodIntersection,\n    ZodTuple: ZodTuple,\n    ZodRecord: ZodRecord,\n    ZodMap: ZodMap,\n    ZodSet: ZodSet,\n    ZodFunction: ZodFunction,\n    ZodLazy: ZodLazy,\n    ZodLiteral: ZodLiteral,\n    ZodEnum: ZodEnum,\n    ZodNativeEnum: ZodNativeEnum,\n    ZodPromise: ZodPromise,\n    ZodEffects: ZodEffects,\n    ZodTransformer: ZodEffects,\n    ZodOptional: ZodOptional,\n    ZodNullable: ZodNullable,\n    ZodDefault: ZodDefault,\n    ZodCatch: ZodCatch,\n    ZodNaN: ZodNaN,\n    BRAND: BRAND,\n    ZodBranded: ZodBranded,\n    ZodPipeline: ZodPipeline,\n    ZodReadonly: ZodReadonly,\n    custom: custom,\n    Schema: ZodType,\n    ZodSchema: ZodType,\n    late: late,\n    get ZodFirstPartyTypeKind () { return ZodFirstPartyTypeKind; },\n    coerce: coerce,\n    any: anyType,\n    array: arrayType,\n    bigint: bigIntType,\n    boolean: booleanType,\n    date: dateType,\n    discriminatedUnion: discriminatedUnionType,\n    effect: effectsType,\n    'enum': enumType,\n    'function': functionType,\n    'instanceof': instanceOfType,\n    intersection: intersectionType,\n    lazy: lazyType,\n    literal: literalType,\n    map: mapType,\n    nan: nanType,\n    nativeEnum: nativeEnumType,\n    never: neverType,\n    'null': nullType,\n    nullable: nullableType,\n    number: numberType,\n    object: objectType,\n    oboolean: oboolean,\n    onumber: onumber,\n    optional: optionalType,\n    ostring: ostring,\n    pipeline: pipelineType,\n    preprocess: preprocessType,\n    promise: promiseType,\n    record: recordType,\n    set: setType,\n    strictObject: strictObjectType,\n    string: stringType,\n    symbol: symbolType,\n    transformer: effectsType,\n    tuple: tupleType,\n    'undefined': undefinedType,\n    union: unionType,\n    unknown: unknownType,\n    'void': voidType,\n    NEVER: NEVER,\n    ZodIssueCode: ZodIssueCode,\n    quotelessJson: quotelessJson,\n    ZodError: ZodError\n});\n\nexport { BRAND, DIRTY, EMPTY_PATH, INVALID, NEVER, OK, ParseStatus, ZodType as Schema, ZodAny, ZodArray, ZodBigInt, ZodBoolean, ZodBranded, ZodCatch, ZodDate, ZodDefault, ZodDiscriminatedUnion, ZodEffects, ZodEnum, ZodError, ZodFirstPartyTypeKind, ZodFunction, ZodIntersection, ZodIssueCode, ZodLazy, ZodLiteral, ZodMap, ZodNaN, ZodNativeEnum, ZodNever, ZodNull, ZodNullable, ZodNumber, ZodObject, ZodOptional, ZodParsedType, ZodPipeline, ZodPromise, ZodReadonly, ZodRecord, ZodType as ZodSchema, ZodSet, ZodString, ZodSymbol, ZodEffects as ZodTransformer, ZodTuple, ZodType, ZodUndefined, ZodUnion, ZodUnknown, ZodVoid, addIssueToContext, anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, coerce, custom, dateType as date, z as default, errorMap as defaultErrorMap, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, getErrorMap, getParsedType, instanceOfType as instanceof, intersectionType as intersection, isAborted, isAsync, isDirty, isValid, late, lazyType as lazy, literalType as literal, makeIssue, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, objectUtil, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, quotelessJson, recordType as record, setType as set, setErrorMap, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, util, voidType as void, z };\n","// See documentation of oidc-spa for more details:\n// https://docs.oidc-spa.dev\n\nimport { createReactOidc } from \"oidc-spa/react\";\nimport { z } from \"zod\";\n\n//On older Keycloak version you need the /auth (e.g: http://localhost:8080/auth)\n//On newer version you must remove it (e.g: http://localhost:8080 )\nconst keycloakUrl = \"https://cloud-iam.keycloakify.dev/\";\nconst keycloakRealm = \"keycloakify\";\nconst keycloakClientId= \"starter\";\n\nexport const { OidcProvider, useOidc } = createReactOidc({\n    issuerUri: `${keycloakUrl}/realms/${keycloakRealm}`,\n    clientId: keycloakClientId,\n    // NOTE: You can also pass queries params when calling login()\n    extraQueryParams: () => ({\n        // This adding ui_locales to the url will ensure the consistency of the language between the app and the login pages\n        // If your app implements a i18n system (like i18nifty.dev for example) you should use this and replace \"en\" by the \n        // current language of the app.\n        // On the other side you will find kcContext.locale.currentLanguageTag to be whatever you set here.  \n        \"ui_locales\": \"en\",\n        \"my_custom_param\": \"value of foo transferred to login page\"\n    }),\n    publicUrl: import.meta.env.BASE_URL,\n    decodedIdTokenSchema: z.object({\n        // Use https://jwt.io/ to tell what's in your idToken\n        // It will depend of your Keycloak configuration.\n        // Here I declare only two field on the type but actually there are\n        // Many more things available. \n        sub: z.string(),\n        name: z.string(),\n        preferred_username: z.string(),\n        // This is a custom attribute set up in our Keycloak configuration\n        // it's not present by default. \n        // See https://docs.keycloakify.dev/realtime-input-validation#getting-your-custom-user-attribute-to-be-included-in-the-jwt\n        favorite_pet: z.union([z.literal(\"cat\"), z.literal(\"dog\"), z.literal(\"bird\")])\n    })\n});\n\n\nexport function getKeycloakAccountUrl(\n    params: {\n        locale: string;\n    }\n){\n    const { locale } = params;\n\n    const accountUrl = new URL(`${keycloakUrl}/realms/${keycloakRealm}/account`);\n\n    const searchParams = new URLSearchParams();\n\n    searchParams.append(\"kc_locale\", locale);\n    searchParams.append(\"referrer\", keycloakClientId);\n    searchParams.append(\"referrer_uri\", window.location.href);\n\n    accountUrl.search = searchParams.toString();\n\n    return accountUrl.toString();\n}","import \"./App.css\";\nimport reactSvgUrl from \"./assets/react.svg\";\nimport viteSvgUrl from \"./assets/vite.svg\";\nimport { OidcProvider, useOidc, getKeycloakAccountUrl } from \"./oidc\";\n\nexport default function App() {\n    return (\n        // To integrate Keycloak to your React App you have many options such as:  \n        // - https://www.npmjs.com/package/keycloak-js  \n        // - https://github.com/authts/oidc-client-ts\n        // - https://github.com/authts/react-oidc-context  \n        // In this starter we use oidc-spa instead\n        // It's a new library made by us, the Keycloakify team.  \n        // Check it out: https://github.com/keycloakify/oidc-spa\n        <OidcProvider>\n            <ContextualizedApp />\n        </OidcProvider>\n    );\n}\n\nfunction ContextualizedApp() {\n\n    const { isUserLoggedIn, login, logout, oidcTokens } = useOidc();\n\n    return (\n        <div className=\"App\">\n            <div>\n            <div className=\"App-payload\">\n            {isUserLoggedIn ?\n                (\n                    <>\n\n                        <h1>Hello {oidcTokens.decodedIdToken.name} !</h1>\n                        <a\n                            href={getKeycloakAccountUrl({ locale: \"en\" })}\n                        >\n                            Link to your Keycloak account\n                        </a>\n                        &nbsp;&nbsp;&nbsp;\n                        <button\n                            onClick={() => logout({ redirectTo: \"home\" })}\n                        >\n                            Logout\n                        </button>\n                        <Jwt />\n                    </>\n                )\n                :\n                (\n                    <button\n                        onClick={() => login({\n                            doesCurrentHrefRequiresAuth: false,\n                            //extraQueryParams: { kc_idp_hint: \"google\" }\n                        })}\n                    >\n                        Login\n                    </button>\n                )\n            }\n            </div>\n            <div className=\"App-logo-wrapper\">\n            <img src={reactSvgUrl} className=\"App-logo rotate\" alt=\"logo\" />\n            &nbsp;&nbsp;&nbsp;\n            <img src={viteSvgUrl} className=\"App-logo\" alt=\"logo\" />\n            </div>\n            </div>\n        </div>\n    );\n\n}\n\nfunction Jwt() {\n\n    const { oidcTokens } = useOidc({\n        assertUserLoggedIn: true\n    });\n\n    // NOTE: Use `Bearer ${oidcTokens.accessToken}` as the Authorization header to call your backend\n    // Here we just display the decoded id token\n\n    return (\n        <pre style={{ textAlign: \"left\" }}>\n            {JSON.stringify(oidcTokens.decodedIdToken, null, 2)}\n        </pre>\n    );\n\n}\n\n"],"names":["reactSvgUrl","viteSvgUrl","__viteBrowserExternal","root","factory","module","this","CryptoJS","Math","undefined","crypto","global","require","require$$0","cryptoSecureRandomInt","create","F","obj","subtype","C","C_lib","Base","overrides","instance","properties","propertyName","WordArray","words","sigBytes","encoder","Hex","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","i","thatByte","j","clone","nBytes","C_enc","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","utf8Str","BufferedBlockAlgorithm","data","doFlush","processedWords","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","nWordsReady","nBytesReady","offset","cfg","messageUpdate","hash","hasher","message","key","C_algo","Hasher","H","K","isPrime","n","sqrtN","factor","getFractionalBits","nPrime","W","SHA256","M","a","b","c","d","e","f","g","h","gamma0x","gamma0","gamma1x","gamma1","ch","maj","sigma0","sigma1","t1","t2","nBitsTotal","nBitsLeft","map","base64Chars","byte1","byte2","byte3","triplet","paddingChar","base64Str","base64StrLength","reverseMap","paddingIndex","parseLoop","bits1","bits2","bitsCombined","r","t","o","__create","__defProp","__getOwnPropDesc","__getOwnPropNames","__getProtoOf","__hasOwnProp","__export","target","all","name","__copyProps","to","from","except","desc","__toESM","mod","isNodeMode","__toCommonJS","src_exports","AccessTokenEvents","CheckSessionIFrame","ErrorResponse","ErrorTimeout","InMemoryWebStorage","Log","Logger","MetadataService","OidcClient","OidcClientSettingsStore","SessionMonitor","SigninResponse","SigninState","SignoutResponse","State","User","UserManager","UserManagerSettingsStore","Version","WebStorageStateStore","oidcClientTs","import_core","import_sha256","require$$1","import_enc_base64","require$$2","import_enc_utf8","require$$3","nopLogger","level","logger","Log2","reset","setLevel","value","setLogger","_name","args","err","method","methodLogger","staticMethod","staticLogger","prefix","UUID_V4_TEMPLATE","CryptoUtils","code_verifier","hashed","client_id","client_secret","basicAuth","Event","cb","idx","ev","import_jwt_decode","require$$4","JwtUtils","token","PopupUtils","features","_a","_b","_c","width","Timer","diff","durationInSeconds","logger2","expiration","timerDurationInSeconds","UrlUtils","url","responseMode","params","URL_STATE_DELIMITER","form","container","duration","expiring","expired","_callback","_client_id","_intervalInSeconds","_stopOnError","parsedUrl","resolve","session_state","send","index","JsonService","additionalContentTypes","_jwtHandler","_extraHeaders","input","init","timeoutInSeconds","initFetch","controller","timeoutId","credentials","headers","response","contentType","item","json","body","initCredentials","responseText","customKeys","protectedHeaders","headerName","content","_settings","metadata","optional","jwks_uri","keySet","store","len","keys","DefaultResponseType","DefaultScope","DefaultClientAuthentication","DefaultResponseMode","DefaultStaleStateAgeInSeconds","DefaultClockSkewInSeconds","authority","metadataUrl","signingKeys","metadataSeed","response_type","scope","redirect_uri","post_logout_redirect_uri","client_authentication","prompt","display","max_age","ui_locales","acr_values","resource","response_mode","filterProtocolClaims","loadUserInfo","staleStateAgeInSeconds","clockSkewInSeconds","userInfoJwtIssuer","mergeClaims","disablePKCE","stateStore","refreshTokenCredentials","revokeTokenAdditionalContentTypes","fetchRequestCredentials","refreshTokenAllowedScope","extraQueryParams","extraTokenParams","extraHeaders","UserInfoService","_metadataService","payload","claims","TokenClient","grant_type","param","ResponseValidator","_claimsService","state","skipUserInfo","hasIdToken","validateSub","tokenResponse","existingToken","incoming","existing","storageString","storage","age","cutoff","remove","SigninRequest","state_data","request_type","nonce","url_state","optionalParams","OidcScope","splitState","SignoutRequest","id_token_hint","DefaultProtocolClaims","InternalRequiredProtocolClaims","ClaimsService","result","protocolClaims","claim","claims1","claims2","values","previousValue","settings","metadataService","request","request_uri","login_hint","signinRequest","signinState","removeState","storedStateString","username","password","signinResponse","allowableScopes","s","signoutState","type","_userManager","user","intervalInSeconds","stopOnError","checkSessionIFrame","timerHandle","session","tmpUser","raiseEvent","expires_in","messageSource","AbstractChildWindow","keepOpen","reject","listener","origin","reason","dispose","parent","targetOrigin","DefaultPopupWindowFeatures","DefaultPopupTarget","DefaultAccessTokenExpiringNotificationTimeInSeconds","DefaultCheckSessionIntervalInSeconds","DefaultSilentRequestTimeoutInSeconds","popup_redirect_uri","popup_post_logout_redirect_uri","popupWindowFeatures","popupWindowTarget","redirectMethod","redirectTarget","iframeNotifyParentOrigin","iframeScriptOrigin","silent_redirect_uri","silentRequestTimeoutInSeconds","automaticSilentRenew","validateSubOnSilentRenew","includeIdTokenInSilentRenew","monitorSession","monitorAnonymousSession","checkSessionIntervalInSeconds","query_status_response_type","stopCheckSessionOnError","revokeTokenTypes","revokeTokensOnSignout","includeIdTokenInSilentSignout","accessTokenExpiringNotificationTimeInSeconds","userStore","IFrameWindow","iframe","timer","_a2","frame","IFrameNavigator","checkForPopupClosedInterval","second","PopupWindow","centeredPopup","popupClosedInterval","PopupNavigator","RedirectNavigator","targetWindow","redirect","abort","promise","UserManagerEvents","SilentRenewService","RefreshState","redirectNavigator","popupNavigator","iframeNavigator","requestArgs","handle","verifySub","navResponse","id_token","signoutRequest","signoutResponse","types","typesPresent","version","__importDefault","readExpirationTimeInJwt_1","jwt_decode_1","assert_1","readExpirationTimeInJwt","expirationTime","__read","m","ar","error","urlQueryParams","addQueryParamToUrl","newUrl","retrieveQueryParamFromUrl","retrieveAllQueryParamStartingWithPrefixFromUrl","doLeavePrefixInResults","baseUrl","locationSearch","newLocationSearch","part","value_i","entry","fnv1aHashToHex_1","fnv1aHashToHex","str","__extends","extendStatics","p","__","Deferred_1","overwriteReadonlyProp_1","Deferred","_this","resolve_","reject_","VoidDeferred","_super","decodeJwt","__values","getDownlinkAndRtt_1","getDownlinkAndRtt","e_1","navigator","_d","downlink","rtt","e_1_1","__assign","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","rejected","__generator","_","y","verb","v","op","__spreadArray","pack","l","oidc","oidc_client_ts_1","id_1","urlQueryParams_1","require$$5","require$$6","decodeJwt_1","require$$7","require$$8","OidcInitializationError","_newTarget","paramsToRetrieveFromSuccessfulLogin","createOidc","issuerUri","clientId","clientSecret","transformUrlBeforeRedirect","extraQueryParamsOrGetter","publicUrl_params","decodedIdTokenSchema","getExtraQueryParams","publicUrl","configHash","configHashKey","oidcClientTsUserManager","lastPublicRoute","realPushState_1","hasLoginBeenCalled","login","initialTokens","common","initializationError","currentTokens","onTokenChanges","_i","doesCurrentHrefRequiresAuth","URL","urlInstance","URL_real","prop","url_1","callback_1","loginSuccessUrl","paramsToRetrieveFromSuccessfulLogin_1","paramsToRetrieveFromSuccessfulLogin_1_1","name_1","oidcClientTsUser","error_1","dLoginSuccessUrl_1","timeoutDelayMs_1","timeout_1","listener_1","downlinkAndRtt","baseDelay","dynamicDelay","event","e_2","paramsToRetrieveFromSuccessfulLogin_2","paramsToRetrieveFromSuccessfulLogin_2_1","name_2","e_2_1","tokens","oidcClientTsUserToTokens","decodedIdTokenPropertyDescriptor","onTokenChange","scheduleAutomaticRenew","msBeforeExpiration","accessToken","accessTokenExpirationTime","read_from_metadata","expires_at","read_from_jwt","refreshToken","refreshTokenExpirationTime","idToken","cache","decodedIdToken","useGuaranteedMemo_1","react_1","useGuaranteedMemo","fn","deps","ref","react","createReactOidc_1","jsx_runtime_1","oidc_1","oidcContext","createReactOidc","prOidc","OidcProvider","props","children","fallback","setOidc","useOidc","assertUserLoggedIn","context","decodedIdTokenSchema_context","forceUpdate","unsubscribe","oidcTokens","util","val","assertIs","_arg","assertNever","_x","items","validKeys","k","filtered","object","arr","checker","joinValues","array","separator","objectUtil","first","ZodParsedType","getParsedType","ZodIssueCode","quotelessJson","ZodError","issues","sub","subs","actualProto","_mapper","mapper","issue","fieldErrors","processError","curr","el","formErrors","errorMap","_ctx","overrideErrorMap","setErrorMap","getErrorMap","makeIssue","path","errorMaps","issueData","fullPath","fullIssue","errorMessage","maps","EMPTY_PATH","addIssueToContext","ctx","x","ParseStatus","status","results","arrayValue","INVALID","pairs","syncPairs","pair","finalObject","DIRTY","OK","isAborted","isDirty","isValid","isAsync","errorUtil","ParseInputLazyPath","handleResult","processCreateParams","invalid_type_error","required_error","description","iss","ZodType","def","maybeAsyncResult","check","getIssueProperties","setError","refinementData","refinement","ZodEffects","ZodFirstPartyTypeKind","ZodOptional","ZodNullable","ZodArray","ZodPromise","option","ZodUnion","ZodIntersection","transform","defaultValueFunc","ZodDefault","ZodBranded","catchValueFunc","ZodCatch","This","ZodPipeline","ZodReadonly","cuidRegex","cuid2Regex","ulidRegex","uuidRegex","emailRegex","_emojiRegex","emojiRegex","ipv4Regex","ipv6Regex","datetimeRegex","isValidIP","ip","ZodString","tooBig","tooSmall","regex","validation","options","minLength","maxLength","min","max","floatSafeRemainder","valDecCount","stepDecCount","decCount","valInt","stepInt","ZodNumber","kind","inclusive","ZodBigInt","ZodBoolean","ZodDate","minDate","maxDate","ZodSymbol","ZodUndefined","ZodNull","ZodAny","ZodUnknown","ZodNever","ZodVoid","schema","deepPartialify","ZodObject","newShape","fieldSchema","ZodTuple","shape","shapeKeys","extraKeys","keyValidator","unknownKeys","catchall","defaultError","augmentation","merging","mask","newField","createZodEnum","handleResults","unionErrors","childCtx","dirty","getDiscriminator","ZodLazy","ZodLiteral","ZodEnum","ZodNativeEnum","ZodDiscriminatedUnion","discriminator","discriminatorValue","optionsMap","discriminatorValues","mergeValues","aType","bType","bKeys","sharedKeys","newObj","sharedValue","newArray","itemA","itemB","handleParsed","parsedLeft","parsedRight","merged","left","right","itemIndex","rest","schemas","ZodRecord","keyType","valueType","third","ZodMap","finalMap","ZodSet","finalizeSet","elements","parsedSet","element","minSize","maxSize","size","ZodFunction","makeArgsIssue","makeReturnsIssue","returns","me","parsedArgs","parsedReturns","returnType","func","getter","expectedValues","enumValues","opt","nativeEnumValues","promisified","effect","checkCtx","arg","processed","executeRefinement","acc","inner","base","preprocess","newCtx","ZodNaN","BRAND","inResult","custom","fatal","_fatal","p2","late","instanceOfType","cls","stringType","numberType","nanType","bigIntType","booleanType","dateType","symbolType","undefinedType","nullType","anyType","unknownType","neverType","voidType","arrayType","objectType","strictObjectType","unionType","discriminatedUnionType","intersectionType","tupleType","recordType","mapType","setType","functionType","lazyType","literalType","enumType","nativeEnumType","promiseType","effectsType","optionalType","nullableType","preprocessType","pipelineType","ostring","onumber","oboolean","coerce","NEVER","z","keycloakUrl","keycloakRealm","keycloakClientId","getKeycloakAccountUrl","locale","accountUrl","searchParams","App","jsx","ContextualizedApp","isUserLoggedIn","logout","jsxs","Fragment","Jwt"],"mappings":"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","x_google_ignoreList":[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}