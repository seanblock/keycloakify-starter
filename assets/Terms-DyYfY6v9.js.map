{"version":3,"file":"Terms-DyYfY6v9.js","sources":["../../src/keycloak-theme/login/pages/Terms.tsx"],"sourcesContent":["import { clsx } from \"keycloakify/tools/clsx\";\nimport { useRerenderOnStateChange } from \"evt/hooks\";\nimport { Markdown } from \"keycloakify/tools/Markdown\";\nimport type { PageProps } from \"keycloakify/login/pages/PageProps\";\nimport { useGetClassName } from \"keycloakify/login/lib/useGetClassName\";\nimport { evtTermMarkdown } from \"keycloakify/login/lib/useDownloadTerms\";\nimport type { KcContext } from \"../kcContext\";\nimport type { I18n } from \"../i18n\";\nimport { useDownloadTerms } from \"keycloakify/login\";\n\nexport default function Terms(props: PageProps<Extract<KcContext, { pageId: \"terms.ftl\" }>, I18n>) {\n    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;\n\n    const { getClassName } = useGetClassName({\n        doUseDefaultCss,\n        classes\n    });\n\n    const { msg, msgStr } = i18n;\n\n    // NOTE: If you aren't going to customize the layout of the page you can move this hook to \n    // KcApp.tsx, see: https://docs.keycloakify.dev/terms-and-conditions\n    useDownloadTerms({\n        kcContext,\n        \"downloadTermMarkdown\": async ({currentLanguageTag}) => {\n\n            const tos_url = (() => {\n                switch (currentLanguageTag) {\n                    case \"fr\": return `${import.meta.env.BASE_URL}terms/fr.md`;\n                    default: return `${import.meta.env.BASE_URL}terms/en.md`;\n                }\n            })();\n\n            const markdownString = await fetch(tos_url).then(response => response.text());\n\n            return markdownString;\n\n        }\n    });\n\n    useRerenderOnStateChange(evtTermMarkdown);\n\n    const { url } = kcContext;\n\n    const termMarkdown = evtTermMarkdown.state;\n\n    if (termMarkdown === undefined) {\n        return null;\n    }\n\n    return (\n        <Template {...{ kcContext, i18n, doUseDefaultCss, classes }} displayMessage={false} headerNode={msg(\"termsTitle\")}>\n            <div id=\"kc-terms-text\">\n                <Markdown>{termMarkdown}</Markdown>\n            </div>\n            <form className=\"form-actions\" action={url.loginAction} method=\"POST\">\n                <input\n                    className={clsx(\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonPrimaryClass\"),\n                        getClassName(\"kcButtonLargeClass\")\n                    )}\n                    name=\"accept\"\n                    id=\"kc-accept\"\n                    type=\"submit\"\n                    value={msgStr(\"doAccept\")}\n                />\n                <input\n                    className={clsx(getClassName(\"kcButtonClass\"), getClassName(\"kcButtonDefaultClass\"), getClassName(\"kcButtonLargeClass\"))}\n                    name=\"cancel\"\n                    id=\"kc-decline\"\n                    type=\"submit\"\n                    value={msgStr(\"doDecline\")}\n                />\n            </form>\n            <div className=\"clearfix\" />\n        </Template>\n    );\n}\n"],"names":["Terms","props","kcContext","i18n","doUseDefaultCss","Template","classes","getClassName","useGetClassName","msg","msgStr","useDownloadTerms","currentLanguageTag","tos_url","response","useRerenderOnStateChange","evtTermMarkdown","url","termMarkdown","jsx","Markdown","jsxs","clsx"],"mappings":"yMAUA,SAAwBA,EAAMC,EAAqE,CAC/F,KAAM,CAAE,UAAAC,EAAW,KAAAC,EAAM,gBAAAC,EAAiB,SAAAC,EAAU,QAAAC,CAAY,EAAAL,EAE1D,CAAE,aAAAM,CAAa,EAAIC,EAAgB,CACrC,gBAAAJ,EACA,QAAAE,CAAA,CACH,EAEK,CAAE,IAAAG,EAAK,OAAAC,CAAW,EAAAP,EAIPQ,EAAA,CACb,UAAAT,EACA,qBAAwB,MAAO,CAAC,mBAAAU,KAAwB,CAEpD,MAAMC,GAAW,IAAM,CACnB,OAAQD,EAAoB,CACxB,IAAK,KAAa,MAAA,GAAG,OAAA,YAAA,OAAA,IAAA,OAAA,UAAA,IAAA,cAAA,SAAwB,cAC7C,QAAgB,MAAA,GAAG,OAAA,YAAA,OAAA,IAAA,OAAA,UAAA,IAAA,cAAA,SAAwB,aAC/C,CAAA,KAKG,OAFgB,MAAM,MAAMC,CAAO,EAAE,KAAKC,GAAYA,EAAS,KAAA,CAAM,CAIhF,CAAA,CACH,EAEDC,EAAA,yBAAyBC,CAAe,EAElC,KAAA,CAAE,IAAAC,CAAQ,EAAAf,EAEVgB,EAAeF,EAAgB,MAErC,OAAIE,IAAiB,OACV,YAINb,EAAA,CAAe,UAAAH,EAAW,KAAAC,EAAM,gBAAAC,EAAiB,QAAAE,EAAW,eAAgB,GAAO,WAAYG,EAAI,YAAY,EAC5G,SAAA,CAACU,EAAAA,IAAA,OAAI,GAAG,gBACJ,SAACA,MAAAC,EAAA,CAAU,WAAa,EAC5B,EACAC,EAAAA,KAAC,QAAK,UAAU,eAAe,OAAQJ,EAAI,YAAa,OAAO,OAC3D,SAAA,CAAAE,EAAA,IAAC,QAAA,CACG,UAAWG,EACPf,EAAa,eAAe,EAC5BA,EAAa,eAAe,EAC5BA,EAAa,eAAe,EAC5BA,EAAa,sBAAsB,EACnCA,EAAa,oBAAoB,CACrC,EACA,KAAK,SACL,GAAG,YACH,KAAK,SACL,MAAOG,EAAO,UAAU,CAAA,CAC5B,EACAS,EAAA,IAAC,QAAA,CACG,UAAWG,EAAKf,EAAa,eAAe,EAAGA,EAAa,sBAAsB,EAAGA,EAAa,oBAAoB,CAAC,EACvH,KAAK,SACL,GAAG,aACH,KAAK,SACL,MAAOG,EAAO,WAAW,CAAA,CAC7B,CAAA,EACJ,EACCS,EAAAA,IAAA,MAAI,CAAA,UAAU,WAAW,GAC9B,CAER"}