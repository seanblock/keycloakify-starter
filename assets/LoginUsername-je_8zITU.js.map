{"version":3,"file":"LoginUsername-je_8zITU.js","sources":["../../node_modules/keycloakify/login/pages/LoginUsername.js"],"sourcesContent":["import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from \"react\";\nimport { clsx } from \"../../tools/clsx\";\nimport { useConstCallback } from \"../../tools/useConstCallback\";\nimport { useGetClassName } from \"../../login/lib/useGetClassName\";\nexport default function LoginUsername(props) {\n    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;\n    const { getClassName } = useGetClassName({\n        doUseDefaultCss,\n        classes\n    });\n    const { social, realm, url, usernameHidden, login, registrationDisabled } = kcContext;\n    const { msg, msgStr } = i18n;\n    const [isLoginButtonDisabled, setIsLoginButtonDisabled] = useState(false);\n    const onSubmit = useConstCallback(e => {\n        var _a;\n        e.preventDefault();\n        setIsLoginButtonDisabled(true);\n        const formElement = e.target;\n        //NOTE: Even if we login with email Keycloak expect username and password in\n        //the POST request.\n        (_a = formElement.querySelector(\"input[name='email']\")) === null || _a === void 0 ? void 0 : _a.setAttribute(\"name\", \"username\");\n        formElement.submit();\n    });\n    return (_jsx(Template, Object.assign({}, { kcContext, i18n, doUseDefaultCss, classes }, { displayInfo: social.displayInfo, displayWide: realm.password && social.providers !== undefined, headerNode: msg(\"doLogIn\"), infoNode: realm.password &&\n            realm.registrationAllowed &&\n            !registrationDisabled && (_jsx(\"div\", Object.assign({ id: \"kc-registration\" }, { children: _jsxs(\"span\", { children: [msg(\"noAccount\"), _jsx(\"a\", Object.assign({ tabIndex: 6, href: url.registrationUrl }, { children: msg(\"doRegister\") }))] }) }))) }, { children: _jsxs(\"div\", Object.assign({ id: \"kc-form\", className: clsx(realm.password && social.providers !== undefined && getClassName(\"kcContentWrapperClass\")) }, { children: [_jsx(\"div\", Object.assign({ id: \"kc-form-wrapper\", className: clsx(realm.password &&\n                        social.providers && [getClassName(\"kcFormSocialAccountContentClass\"), getClassName(\"kcFormSocialAccountClass\")]) }, { children: realm.password && (_jsxs(\"form\", Object.assign({ id: \"kc-form-login\", onSubmit: onSubmit, action: url.loginAction, method: \"post\" }, { children: [_jsx(\"div\", Object.assign({ className: getClassName(\"kcFormGroupClass\") }, { children: !usernameHidden &&\n                                    (() => {\n                                        var _a;\n                                        const label = !realm.loginWithEmailAllowed\n                                            ? \"username\"\n                                            : realm.registrationEmailAsUsername\n                                                ? \"email\"\n                                                : \"usernameOrEmail\";\n                                        const autoCompleteHelper = label === \"usernameOrEmail\" ? \"username\" : label;\n                                        return (_jsxs(_Fragment, { children: [_jsx(\"label\", Object.assign({ htmlFor: autoCompleteHelper, className: getClassName(\"kcLabelClass\") }, { children: msg(label) })), _jsx(\"input\", { tabIndex: 1, id: autoCompleteHelper, className: getClassName(\"kcInputClass\"), \n                                                    //NOTE: This is used by Google Chrome auto fill so we use it to tell\n                                                    //the browser how to pre fill the form but before submit we put it back\n                                                    //to username because it is what keycloak expects.\n                                                    name: autoCompleteHelper, defaultValue: (_a = login.username) !== null && _a !== void 0 ? _a : \"\", type: \"text\", autoFocus: true, autoComplete: \"off\" })] }));\n                                    })() })), _jsx(\"div\", Object.assign({ className: clsx(getClassName(\"kcFormGroupClass\"), getClassName(\"kcFormSettingClass\")) }, { children: _jsx(\"div\", Object.assign({ id: \"kc-form-options\" }, { children: realm.rememberMe && !usernameHidden && (_jsx(\"div\", Object.assign({ className: \"checkbox\" }, { children: _jsxs(\"label\", { children: [_jsx(\"input\", Object.assign({ tabIndex: 3, id: \"rememberMe\", name: \"rememberMe\", type: \"checkbox\" }, (login.rememberMe === \"on\"\n                                                    ? {\n                                                        \"checked\": true\n                                                    }\n                                                    : {}))), msg(\"rememberMe\")] }) }))) })) })), _jsx(\"div\", Object.assign({ id: \"kc-form-buttons\", className: getClassName(\"kcFormGroupClass\") }, { children: _jsx(\"input\", { tabIndex: 4, className: clsx(getClassName(\"kcButtonClass\"), getClassName(\"kcButtonPrimaryClass\"), getClassName(\"kcButtonBlockClass\"), getClassName(\"kcButtonLargeClass\")), name: \"login\", id: \"kc-login\", type: \"submit\", value: msgStr(\"doLogIn\"), disabled: isLoginButtonDisabled }) }))] }))) })), realm.password && social.providers !== undefined && (_jsx(\"div\", Object.assign({ id: \"kc-social-providers\", className: clsx(getClassName(\"kcFormSocialAccountContentClass\"), getClassName(\"kcFormSocialAccountClass\")) }, { children: _jsx(\"ul\", Object.assign({ className: clsx(getClassName(\"kcFormSocialAccountListClass\"), social.providers.length > 4 && getClassName(\"kcFormSocialAccountDoubleListClass\")) }, { children: social.providers.map(p => (_jsx(\"li\", Object.assign({ className: getClassName(\"kcFormSocialAccountListLinkClass\") }, { children: _jsx(\"a\", Object.assign({ href: p.loginUrl, id: `zocial-${p.alias}`, className: clsx(\"zocial\", p.providerId) }, { children: _jsx(\"span\", { children: p.displayName }) })) }), p.providerId))) })) })))] })) })));\n}\n//# sourceMappingURL=LoginUsername.js.map"],"names":["LoginUsername","props","kcContext","i18n","doUseDefaultCss","Template","classes","getClassName","useGetClassName","social","realm","url","usernameHidden","login","registrationDisabled","msg","msgStr","isLoginButtonDisabled","setIsLoginButtonDisabled","useState","onSubmit","useConstCallback","e","_a","formElement","_jsx","_jsxs","clsx","label","autoCompleteHelper","_Fragment","p"],"mappings":"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","x_google_ignoreList":[0]}