"use strict";(self.webpackChunkkeycloakify_advanced_starter=self.webpackChunkkeycloakify_advanced_starter||[]).push([[326],{326:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var n=a(885),r=a(8214),i=a(5861),s=a(2791),c=a(2981),l=a(2138),u=a(3062),o=(u.YU,u.pJ,u.eV,u.US,u.tH),d=(u.Y2,a(8282)),p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},m=(0,s.memo)((function(e){var t=e.kcContext,a=e.i18n,u=e.doFetchDefaultThemeResources,m=void 0===u||u,h=e.Template,f=void 0===h?c.Z:h,b=p(e,["kcContext","i18n","doFetchDefaultThemeResources","Template"]),y=t.url,k=a.msg,v=a.msgStr,g=t.authenticators,E=t.challenge,w=t.shouldDisplayAuthenticators,C=t.userVerification,S=t.rpId,I=Number(t.createTimeout),N="true"==t.isUserIdentified,A=(0,l.R)().cx,x=(0,d.useConstCallback)((0,i.Z)((0,r.Z)().mark((function e(){var t,a,n,i,s,c,l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}return e.abrupt("return");case 2:if(t=g.authenticators.map((function(e){return{id:o.parse(e.credentialId,{loose:!0}),type:"public-key"}})),window.PublicKeyCredential){e.next=7;break}return ee(v("webauthn-unsupported-browser-text")),O(),e.abrupt("return");case 7:return a={rpId:S,challenge:o.parse(E,{loose:!0})},0!==I&&(a.timeout=1e3*I),t.length&&(a.allowCredentials=t),"not specified"!==C&&(a.userVerification=C),e.prev=11,e.next=14,navigator.credentials.get({publicKey:a});case 14:if((n=e.sent)&&"public-key"==n.type){e.next=17;break}return e.abrupt("return");case 17:if("authenticatorData"in(i=n).response){e.next=20;break}return e.abrupt("return");case 20:s=i.response,c=s.clientDataJSON,l=s.authenticatorData,u=s.signature,B(o.stringify(new Uint8Array(c),{pad:!1})),H(o.stringify(new Uint8Array(l),{pad:!1})),V(o.stringify(new Uint8Array(u),{pad:!1})),G(i.id),X(o.stringify(new Uint8Array(s.userHandle),{pad:!1})),O(),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(11),ee(String(e.t0)),O();case 36:case"end":return e.stop()}}),e,null,[[11,32]])})))),D=(0,s.useRef)(null),O=(0,d.useConstCallback)((function(){D.current.submit()})),F=(0,s.useState)(""),U=(0,n.Z)(F,2),L=U[0],B=U[1],P=(0,s.useState)(""),Z=(0,n.Z)(P,2),T=Z[0],H=Z[1],J=(0,s.useState)(""),R=(0,n.Z)(J,2),j=R[0],V=R[1],_=(0,s.useState)(""),Y=(0,n.Z)(_,2),K=Y[0],G=Y[1],W=(0,s.useState)(""),M=(0,n.Z)(W,2),Q=M[0],X=M[1],q=(0,s.useState)(""),z=(0,n.Z)(q,2),$=z[0],ee=z[1];return s.createElement(f,Object.assign({},Object.assign({kcContext:t,i18n:a,doFetchDefaultThemeResources:m},b),{headerNode:k("webauthn-login-title"),formNode:s.createElement("div",{id:"kc-form-webauthn",className:A(b.kcFormClass)},s.createElement("form",{id:"webauth",action:y.loginAction,ref:D,method:"post"},s.createElement("input",{type:"hidden",id:"clientDataJSON",name:"clientDataJSON",value:L}),s.createElement("input",{type:"hidden",id:"authenticatorData",name:"authenticatorData",value:T}),s.createElement("input",{type:"hidden",id:"signature",name:"signature",value:j}),s.createElement("input",{type:"hidden",id:"credentialId",name:"credentialId",value:K}),s.createElement("input",{type:"hidden",id:"userHandle",name:"userHandle",value:Q}),s.createElement("input",{type:"hidden",id:"error",name:"error",value:$})),s.createElement("div",{className:A(b.kcFormGroupClass)},g&&s.createElement("form",{id:"authn_select",className:A(b.kcFormClass)},g.authenticators.map((function(e){return s.createElement("input",{type:"hidden",name:"authn_use_chk",value:e.credentialId,key:e.credentialId})}))),g&&w&&s.createElement(s.Fragment,null,g.authenticators.length>1&&s.createElement("p",{className:A(b.kcSelectAuthListItemTitle)},k("webauthn-available-authenticators")),s.createElement("div",{className:A(b.kcFormClass)},g.authenticators.map((function(e){var t;return s.createElement("div",{id:"kc-webauthn-authenticator",className:A(b.kcSelectAuthListItemClass)},s.createElement("div",{className:A(b.kcSelectAuthListItemIconClass)},s.createElement("i",{className:A(null!==(t=b[e.transports.iconClass])&&void 0!==t?t:b.kcWebAuthnDefaultIcon,b.kcSelectAuthListItemIconPropertyClass)})),s.createElement("div",{className:A(b.kcSelectAuthListItemBodyClass)},s.createElement("div",{id:"kc-webauthn-authenticator-label",className:A(b.kcSelectAuthListItemHeadingClass)},e.label),e.transports&&e.transports.displayNameProperties.length&&s.createElement("div",{id:"kc-webauthn-authenticator-transport",className:A(b.kcSelectAuthListItemDescriptionClass)},e.transports.displayNameProperties.map((function(t,a){return s.createElement(s.Fragment,null,s.createElement("span",null,k(t)),a<e.transports.displayNameProperties.length-1&&s.createElement("span",null,", "))}))),s.createElement("div",{className:A(b.kcSelectAuthListItemDescriptionClass)},s.createElement("span",{id:"kc-webauthn-authenticator-created-label"},k("webauthn-createdAt-label")),s.createElement("span",{id:"kc-webauthn-authenticator-created"},e.createdAt))),s.createElement("div",{className:A(b.kcSelectAuthListItemFillClass)}))})))),s.createElement("div",{id:"kc-form-buttons",className:A(b.kcFormButtonsClass)},s.createElement("input",{id:"authenticateWebAuthnButton",type:"button",onClick:x,autoFocus:!0,value:v("webauthn-doAuthenticate"),className:A(b.kcButtonClass,b.kcButtonPrimaryClass,b.kcButtonBlockClass,b.kcButtonLargeClass)}))))}))}))},3062:function(e,t){function a(e,t,a){var n;if(void 0===a&&(a={}),!t.codes){t.codes={};for(var r=0;r<t.chars.length;++r)t.codes[t.chars[r]]=r}if(!a.loose&&e.length*t.bits&7)throw new SyntaxError("Invalid padding");for(var i=e.length;"="===e[i-1];)if(--i,!a.loose&&!((e.length-i)*t.bits&7))throw new SyntaxError("Invalid padding");for(var s=new(null!=(n=a.out)?n:Uint8Array)(i*t.bits/8|0),c=0,l=0,u=0,o=0;o<i;++o){var d=t.codes[e[o]];if(void 0===d)throw new SyntaxError("Invalid character "+e[o]);l=l<<t.bits|d,(c+=t.bits)>=8&&(c-=8,s[u++]=255&l>>c)}if(c>=t.bits||255&l<<8-c)throw new SyntaxError("Unexpected end of data");return s}function n(e,t,a){void 0===a&&(a={});for(var n=a.pad,r=void 0===n||n,i=(1<<t.bits)-1,s="",c=0,l=0,u=0;u<e.length;++u)for(l=l<<8|255&e[u],c+=8;c>t.bits;)c-=t.bits,s+=t.chars[i&l>>c];if(c&&(s+=t.chars[i&l<<t.bits-c]),r)for(;s.length*t.bits&7;)s+="=";return s}var r={chars:"0123456789ABCDEF",bits:4},i={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bits:5},s={chars:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bits:5},c={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bits:6},l={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6},u={parse:function(e,t){return a(e.toUpperCase(),r,t)},stringify:function(e,t){return n(e,r,t)}},o={parse:function(e,t){return void 0===t&&(t={}),a(t.loose?e.toUpperCase().replace(/0/g,"O").replace(/1/g,"L").replace(/8/g,"B"):e,i,t)},stringify:function(e,t){return n(e,i,t)}},d={parse:function(e,t){return a(e,s,t)},stringify:function(e,t){return n(e,s,t)}},p={parse:function(e,t){return a(e,c,t)},stringify:function(e,t){return n(e,c,t)}},m={parse:function(e,t){return a(e,l,t)},stringify:function(e,t){return n(e,l,t)}},h={parse:a,stringify:n};t.YU=u,t.pJ=o,t.eV=d,t.US=p,t.tH=m,t.Y2=h}}]);
//# sourceMappingURL=326.a582943b.chunk.js.map